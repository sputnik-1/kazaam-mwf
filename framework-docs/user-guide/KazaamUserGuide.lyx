#LyX 1.6.10 created this file. For more info see http://www.lyx.org/
\lyxformat 345
\begin_document
\begin_header
\textclass article
\begin_preamble
% DO NOT ALTER THIS PREAMBLE!!!
%
%This preamble is designed to ensure that the document prints
% out as advertised. If you mess with this preamble,
% parts of the document may not print out as expected.  If you
% have problems LaTeXing this file, please contact 
% the documentation team
% email: lyx-docs@lists.lyx.org

\usepackage{ifpdf} % part of the hyperref bundle
\ifpdf % if pdflatex is used

 % set fonts for nicer pdf view
 \IfFileExists{lmodern.sty}{\usepackage{lmodern}}{}

 % link all cross references and URLs in pdf output
 \usepackage[colorlinks=true, bookmarks, bookmarksnumbered,
  bookmarksopen, bookmarksopenlevel=2,
  linkcolor=blue, citecolor=black, urlcolor=blue, filecolor=blue,
  pdfpagelayout=OneColumn, pdfnewwindow=true,
  pdfstartview=XYZ, plainpages=false, pdfpagelabels,
  pdfauthor={Keith Roberts}, pdftex,
  pdftitle={Kazaam User Guide},pdfsubject={Kazaam Web Development User Guide},
  pdfkeywords={PHP, Web Development, Modular}]{hyperref}
 
\else % if dvi or ps is produced

 % link all cross references and URLs in dvi output
 \usepackage[ps2pdf]{hyperref}

\fi % end if pdflatex is used

 % the pages of the TOC are numbered roman
 % and a pdf-bookmark for the TOC is added
 \pagenumbering{roman}
 \let\myTOC\tableofcontents
 \renewcommand\tableofcontents{%
   \pdfbookmark[1]{Contents}{}
   \myTOC
   \cleardoublepage
   \pagenumbering{arabic} }

% redefine the \LyX macro for PDF bookmarks
\def\LyX{\texorpdfstring{%
  L\kern-.1667em\lower.25em\hbox{Y}\kern-.125emX\@}
  {LyX }}
\end_preamble
\use_default_options false
\language english
\inputencoding auto
\font_roman default
\font_sans default
\font_typewriter default
\font_default_family default
\font_sc false
\font_osf false
\font_sf_scale 100
\font_tt_scale 100

\graphics default
\paperfontsize 12
\spacing single
\use_hyperref false
\papersize a4paper
\use_geometry false
\use_amsmath 1
\use_esint 0
\cite_engine basic
\use_bibtopic false
\paperorientation portrait
\branch NotShown
\selected 0
\color #ff5500
\end_branch
\secnumdepth 5
\tocdepth 5
\paragraph_separation indent
\defskip medskip
\quotes_language english
\papercolumns 1
\papersides 1
\paperpagestyle default
\tracking_changes false
\output_changes false
\author "" 
\author "" 
\end_header

\begin_body

\begin_layout Title
Kazaam
\begin_inset Newline newline
\end_inset


\begin_inset VSpace defskip
\end_inset

PHP Modular Website Framework
\begin_inset Newline newline
\end_inset


\begin_inset VSpace defskip
\end_inset

User Guide 
\begin_inset Newline newline
\end_inset


\begin_inset VSpace defskip
\end_inset

version 0.5.0 
\size small
\emph on
beta
\end_layout

\begin_layout Author
by Keith Roberts
\end_layout

\begin_layout Standard

\emph on
\begin_inset space \hfill{}
\end_inset

Copyright (c) 2006 to date.
 Keith Roberts - All Rights Reserved.
\begin_inset space \hfill{}
\end_inset


\begin_inset VSpace defskip
\end_inset


\end_layout

\begin_layout Standard

\emph on
\begin_inset space \hfill{}
\end_inset

Released under the BSD licence.
\begin_inset space \hfill{}
\end_inset


\begin_inset VSpace defskip
\end_inset


\end_layout

\begin_layout Standard

\emph on
\begin_inset space \hfill{}
\end_inset

NB: This user guide is currently a work in progress.
\begin_inset space \hfill{}
\end_inset


\begin_inset VSpace defskip
\end_inset


\end_layout

\begin_layout Standard
\begin_inset CommandInset toc
LatexCommand tableofcontents

\end_inset


\end_layout

\begin_layout Section
Introduction to Kazaam
\end_layout

\begin_layout Subsection
Chapter Overview
\end_layout

\begin_layout Standard
This chapter covers:
\end_layout

\begin_layout Itemize
Target Audience
\end_layout

\begin_layout Itemize
Documentation Overview
\end_layout

\begin_layout Itemize
Kazaam Overview
\end_layout

\begin_layout Itemize
Kazaam System Requirements
\end_layout

\begin_layout Subsection
Target Audience
\end_layout

\begin_layout Standard
Kazaam is designed to make it easy for anyone, from novice to professional,
 to create usefull websites.
 A novice should find the framework, module structure, and page structure
 easy to grasp.
 A seasoned web developer should take to Kazaam like a duck to water.
 Whatever your level of expertise, using Kazaam should speed up the website
 development and maintenance process considerably.
\end_layout

\begin_layout Subsection
Documentation Overview
\end_layout

\begin_layout Standard
About the documentation layout.
 Do this bit last when the document is finished!
\end_layout

\begin_layout Subsection
Kazaam Overview
\end_layout

\begin_layout Subsubsection
In a Nutshell
\end_layout

\begin_layout Description
The
\begin_inset space ~
\end_inset

Kazaam
\begin_inset space ~
\end_inset

framework consists of three code branches called 
\emph on
develop
\emph default
, 
\emph on
intermediate
\emph default
 and 
\emph on
live
\emph default
, and their supporting directories and files.
\end_layout

\begin_layout Description
code
\begin_inset space ~
\end_inset

branches consist of websites and their support files.
\end_layout

\begin_layout Description
Websites consist of modules and their support files.
\end_layout

\begin_layout Description
Modules consist of pages and their support files.
\end_layout

\begin_layout Standard
\begin_inset Box Frameless
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
status open

\begin_layout LyX-Code

\series bold
└── kazaam-mwf
\end_layout

\begin_layout LyX-Code

\series bold
    ├── develop
\end_layout

\begin_layout LyX-Code

\series bold
    │   ├── karsites
\end_layout

\begin_layout LyX-Code

\series bold
    │   ├── kazaam-sitetpl
\end_layout

\begin_layout LyX-Code

\series bold
    │   ├── php-debuggers
\end_layout

\begin_layout LyX-Code

\series bold
    │   └── raised-from-the-dead
\end_layout

\begin_layout LyX-Code

\series bold
    ├── framework-docs
\end_layout

\begin_layout LyX-Code

\series bold
    │   ├── dtds
\end_layout

\begin_layout LyX-Code

\series bold
    │   ├── license
\end_layout

\begin_layout LyX-Code

\series bold
    │   └── user-guide
\end_layout

\begin_layout LyX-Code

\series bold
    ├── intermediate
\end_layout

\begin_layout LyX-Code

\series bold
    │   ├── karsites
\end_layout

\begin_layout LyX-Code

\series bold
    │   ├── kazaam-sitetpl
\end_layout

\begin_layout LyX-Code

\series bold
    │   ├── php-debuggers
\end_layout

\begin_layout LyX-Code

\series bold
    │   └── raised-from-the-dead
\end_layout

\begin_layout LyX-Code

\series bold
    ├── live
\end_layout

\begin_layout LyX-Code

\series bold
    │   ├── karsites
\end_layout

\begin_layout LyX-Code

\series bold
    │   ├── kazaam-sitetpl
\end_layout

\begin_layout LyX-Code

\series bold
    │   ├── php-debuggers
\end_layout

\begin_layout LyX-Code

\series bold
    │   └── raised-from-the-dead
\end_layout

\begin_layout LyX-Code

\series bold
    └── shared-host
\end_layout

\begin_layout LyX-Code

\series bold
        ├── classes
\end_layout

\begin_layout LyX-Code

\series bold
        ├── docs
\end_layout

\begin_layout LyX-Code

\series bold
        └── incs
\end_layout

\begin_layout LyX-Code

\end_layout

\end_inset


\end_layout

\begin_layout Subsubsection
Kazaam Design Goals
\end_layout

\begin_layout Standard
To create a website framework that is:
\end_layout

\begin_layout Itemize
Modular - allowing modules from one Kazaam website to be 'plugged-in' to
 other Kazaam websites, promoting code reuse.
\end_layout

\begin_layout Itemize
Extensible
\end_layout

\begin_layout Itemize
Easy to learn
\end_layout

\begin_layout Itemize
Easy to use and navigate
\end_layout

\begin_layout Itemize
W3C compliant
\end_layout

\begin_layout Itemize
Supports Apache name-based virtual hosts
\end_layout

\begin_layout Itemize
Uses 100% native code
\end_layout

\begin_layout Standard
Kazaam is a modular website framework for developing and deploying websites.
 By virtue of it's modular design, this makes the virtual websites in the
 framework easy to create, update, and extend.
 As each module in a website uses a uniform directory structure, once you
 have learnt the layout for one module, then finding your way around other
 modules is exactly the same and just as easy.
\end_layout

\begin_layout Standard
The framework consists of three code branches: a 
\emph on
develop
\emph default
(ment) code branch, an 
\emph on
intermediate
\emph default
 code branch, and a 
\emph on
live
\emph default
 code branch.
 The 
\emph on
develop
\emph default
 and 
\emph on
intermediate
\emph default
 code is not intended to be viewable online.
 Only websites in the 
\emph on
live
\emph default
 directory are.
 This allows development code to be updated and then tested in the 
\emph on
intermediate
\emph default
 directory, before being moved across to the 
\emph on
live
\emph default
 directory, without fear of breaking an existing live website.
\end_layout

\begin_layout Standard
\begin_inset VSpace defskip
\end_inset

All website development is done in the 
\emph on
develop
\emph default
 code branch.
 The 
\emph on
intermediate
\emph default
 and 
\emph on
live
\emph default
 branches are copied from the development code, using PHING scripts.
\begin_inset VSpace defskip
\end_inset

 The development sequence is:
\end_layout

\begin_layout Standard
\begin_inset VSpace defskip
\end_inset


\end_layout

\begin_layout Standard

\emph on
develop
\emph default
 \SpecialChar \menuseparator

\emph on
intermediate 
\emph default
\SpecialChar \menuseparator

\emph on
live
\end_layout

\begin_layout Standard
\begin_inset VSpace defskip
\end_inset

You can skip the 
\emph on
intermediate
\emph default
 step if you don't need it.
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

If you host your websites on a remote server, then you can setup kazaam
 on your local machine, and use the 
\emph on
develop
\emph default
 directory of kazaam for developing and testing websites on your local machine.
 You can then use your ftp program to upload the contents of the website
 in the 
\emph on
develop
\emph default
 directory, from your local machine to the remote host.
 This will allow you to keep backups of your website code on your local
 machine.
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

In the case of using a remote hosting package, the development sequence
 would be:
\end_layout

\begin_layout Standard
\begin_inset VSpace defskip
\end_inset


\end_layout

\begin_layout Standard

\emph on
local-machine develop
\emph default
 \SpecialChar \menuseparator

\emph on
remote-machine live
\end_layout

\begin_layout Standard
\begin_inset VSpace defskip
\end_inset

Each Kazaam website and associated pages uses:
\end_layout

\begin_layout Itemize
100% xhtml
\end_layout

\begin_layout Itemize
100% CSS
\end_layout

\begin_layout Itemize
100% Java-script
\end_layout

\begin_layout Itemize
100% PHP 5
\end_layout

\begin_layout Standard
so you do not have to learn any sort of template language at all.
 With Kazaam you can clone a new website from a standard website template
\begin_inset Foot
status open

\begin_layout Plain Layout
The website template I refer to here is actually the 
\emph on
kazaam-sitetpl
\emph default
 directory, in the 
\emph on
develop
\emph default
 code branch.
\end_layout

\end_inset

.
 You can then extend the website's functionality, by adding more modules
 to the website.
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

In theory, there is no limit to the number of websites you can create within
 the Kazaam framework, or the number modules you can create and add to each
 website.
 This limit is most likely up to the maximum amount of sub-directories your
 OS allows, or how much space you have left on your hard drive.
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

Additionally, any modules you have created for one website in the Kazaam
 framework, may be copied across to another website (or websites) in the
 same framework, and 'plugged-in' and re-used by the other website(s).
\begin_inset Newline newline
\end_inset


\end_layout

\begin_layout Subsection
Kazaam System Requirements
\end_layout

\begin_layout Standard
To use Kazaam you will need the following software installed:
\end_layout

\begin_layout Itemize
Apache 2.2.x web server (not tested with any other server).
\end_layout

\begin_layout Itemize
Apache 2.2.x PHP 5 module.
\end_layout

\begin_layout Itemize
PHP 5 CLI interpreter.
\end_layout

\begin_layout Itemize
PHING (Phing is a project build system based on Apache ant)
\begin_inset Newpage pagebreak
\end_inset


\end_layout

\begin_layout Section
The Kazaam Framework
\end_layout

\begin_layout Subsection
Chapter Overview
\end_layout

\begin_layout Standard
This chapter discusses the framework that all virtual hosts live in, and
 the directories and files shared by those virtual hosts.
\end_layout

\begin_layout Subsection
The topmost directory.
\end_layout

\begin_layout Standard
\begin_inset Box Frameless
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
status open

\begin_layout LyX-Code

\series bold
└── kazaam-mwf
\end_layout

\begin_layout LyX-Code

\series bold
    ├── develop
\end_layout

\begin_layout LyX-Code

\series bold
    ├── framework-docs
\end_layout

\begin_layout LyX-Code

\series bold
    ├── intermediate
\end_layout

\begin_layout LyX-Code

\series bold
    ├── live
\end_layout

\begin_layout LyX-Code

\series bold
    ├── phing-2.2.0
\end_layout

\begin_layout LyX-Code

\series bold
    ├── php-manual
\end_layout

\begin_layout LyX-Code

\series bold
    └── shared-host
\series default
 
\end_layout

\end_inset


\end_layout

\begin_layout Description
develop is where all website development is done.
 Each sub-dir in 
\emph on
develop
\emph default
 contains the code for a complete website.
 None of the websites in 
\emph on
develop 
\emph default
are accessible for public viewing on-line.
\end_layout

\begin_layout Description
framework-docs contains documentation for the Kazaam framework.
\end_layout

\begin_layout Description
intermediate contains sub-dirs of websites copied from the 
\emph on
develop
\emph default
 directory using PHING scripts, and is also not accessible for public viewing
 on-line.
 A website's code can be tweaked in the 
\emph on
intermediate
\emph default
 dir before being pushed to the 
\emph on
live
\emph default
 directory.
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

 For example, there might be code still under development in the 
\emph on
develop
\emph default
 dir, that you don't want to push into the 
\emph on
live
\emph default
 dir yet.
 Copying the website code to the 
\emph on
intermediate
\emph default
 dir allows you to check the site is how you want it to be seen by others.
 So you can make changes to things you don't want copied from the 
\emph on
inter
\emph default
mediate directory into the 
\emph on
live
\emph default
 directory for public viewing.
 This can be done automatically with the PHING script 
\series bold
int-build.xml.
\end_layout

\begin_layout Description
live contains sub directories of all websites that are available on-line
 for public viewing.
\end_layout

\begin_layout Description
phing-2.2.0 this is where I have put my PHING installation.
 However, if you have installed PHING using your OS's package manager, or
 the PEAR installer, your PHING installation is probably in a different
 location.
\end_layout

\begin_layout Description
php-manual contains a symbolic link to the PHP5 manual 
\emph on
html
\emph default
 directory.
 This allows PHP5 to display the relevant manual page when a PHP error occurs.
\end_layout

\begin_layout Description
shared-host contains files that are shared by all virtual hosts on a particular
 physical server, running a web server such as Apache.
\end_layout

\begin_layout Standard
Once you have run the relevant PHING scripts that move the website code
 from 
\emph on
develop
\emph default
 to 
\emph on
intermediate
\emph default
, and from 
\emph on
intermediate
\emph default
 to 
\emph on
live
\emph default
, the directory structure for the 
\emph on
intermediate
\emph default
 and 
\emph on
live
\emph default
 sub-directories should be similar to the 
\emph on
develop
\emph default
 directory.
 (What actually gets copied across depends on how you have modified your
 PHING scripts.) So the following example for the 
\emph on
develop
\emph default
 directory applies to 
\emph on
intermediate
\emph default
 and 
\emph on
live
\emph default
 directories too.
\end_layout

\begin_layout Subsection
Contents of 
\emph on
develop di
\emph default
rectory.
\end_layout

\begin_layout LyX-Code

\series bold
develop
\end_layout

\begin_layout LyX-Code

\series bold
├── karsites
\end_layout

\begin_layout LyX-Code

\series bold
├── kazaam-sitetpl
\end_layout

\begin_layout LyX-Code

\series bold
├── php-debuggers
\end_layout

\begin_layout LyX-Code

\series bold
└── raised-from-the-dead
\series default
 
\end_layout

\begin_layout Standard
\begin_inset VSpace defskip
\end_inset


\end_layout

\begin_layout Standard
This directory example contains four websites:
\end_layout

\begin_layout Itemize
karsites
\end_layout

\begin_layout Itemize
kazaam-sitetpl
\end_layout

\begin_layout Itemize
php-debuggers
\end_layout

\begin_layout Itemize
raised-from-the-dead
\end_layout

\begin_layout Standard
The naming convention used is generally the main part of the website's domain
 name.
 
\emph on
kazaam-sitetpl
\emph default
 is a template used by Kazaam for creating new websites.
 It must not be modified, unless you know 
\emph on
exactly
\emph default
 what you are doing.
\end_layout

\begin_layout Subsection
Contents of 
\emph on
shared-host di
\emph default
rectory.
\end_layout

\begin_layout Standard
This directory contains sub-directories of files shared by all pages in
 all virtual websites, accesible via the 
\series bold
$SHARED_HOST_CLASSES
\begin_inset Newline newline
\end_inset

 or $SHARED_HOST_INCS
\series default
 php variables.
 
\emph on
docs
\emph default
 is a place to put any notes with regard to files in 
\emph on
shared-host
\emph default
.
\end_layout

\begin_layout LyX-Code
\begin_inset Box Frameless
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
status open

\begin_layout LyX-Code

\series bold
shared-host
\end_layout

\begin_layout LyX-Code

\series bold
├── classes
\end_layout

\begin_layout LyX-Code

\series bold
├── docs
\end_layout

\begin_layout LyX-Code

\series bold
└── incs
\end_layout

\end_inset


\end_layout

\begin_layout LyX-Code
\begin_inset Newpage pagebreak
\end_inset


\end_layout

\begin_layout Section
Kazaam Websites
\end_layout

\begin_layout Subsection
Chapter Overview
\end_layout

\begin_layout Standard
This chapter looks at the directory structure for the 
\emph on
kazaam-sitetpl
\emph default
 website template, using the 
\emph on
develop
\emph default
 directory as an example.
 (Because websites can be copied from 
\emph on
develop
\emph default
 to 
\emph on
intermediate
\emph default
, and then from 
\emph on
intermediate
\emph default
 to 
\emph on
live
\emph default
, this discussion also applies to the 
\emph on
intermediate
\emph default
 and 
\emph on
live
\emph default
 directory structures.)
\end_layout

\begin_layout LyX-Code
\begin_inset Box Frameless
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
status open

\begin_layout Subsection
A Kazaam website (top-level) directory structure.
\end_layout

\begin_layout LyX-Code

\series bold
kazaam-sitetpl/
\end_layout

\begin_layout LyX-Code

\series bold
├── fedora-services/
\end_layout

\begin_layout LyX-Code

\series bold
├── home/
\end_layout

\begin_layout LyX-Code

\series bold
├── module-example1/
\end_layout

\begin_layout LyX-Code

\series bold
├── module-example2/
\end_layout

\begin_layout LyX-Code

\series bold
├── module-example3/
\end_layout

\begin_layout LyX-Code

\series bold
├── new-ext-module/
\end_layout

\begin_layout LyX-Code

\series bold
├── new-module/
\end_layout

\begin_layout LyX-Code

\series bold
├── shared/
\end_layout

\begin_layout LyX-Code

\series bold
├── shared-host/
\end_layout

\begin_layout LyX-Code

\series bold
├── tmp-backups/
\end_layout

\begin_layout LyX-Code

\series bold
├── website-docs/
\end_layout

\begin_layout LyX-Code

\series bold
├── create-new-ext-module.xml
\end_layout

\begin_layout LyX-Code

\series bold
├── create-new-ext-module.xml.bak
\end_layout

\begin_layout LyX-Code

\series bold
├── create-new-module.xml
\end_layout

\begin_layout LyX-Code

\series bold
├── create-new-module.xml.bak
\end_layout

\begin_layout LyX-Code

\series bold
├── int-build.xml
\end_layout

\begin_layout LyX-Code

\series bold
├── int-build.xml.bak
\end_layout

\begin_layout LyX-Code

\series bold
├── int-delete.xml
\end_layout

\begin_layout LyX-Code

\series bold
├── int-delete.xml.bak
\end_layout

\begin_layout LyX-Code

\series bold
├── live-build.xml
\end_layout

\begin_layout LyX-Code

\series bold
├── live-build.xml.bak
\end_layout

\begin_layout LyX-Code

\series bold
├── live-delete.xml
\end_layout

\begin_layout LyX-Code

\series bold
├── live-delete.xml.bak
\end_layout

\begin_layout LyX-Code

\series bold
├── robots.txt
\end_layout

\begin_layout LyX-Code

\series bold
└── robots.txt.bak
\end_layout

\end_inset


\end_layout

\begin_layout Description
fedora-services is an example module.
 It contains some outline pages for listing all the services available in
 Fedora Linux.
\end_layout

\begin_layout Description
home Each website has a 
\emph on
home
\emph default
 module.
 The 
\emph on
home
\emph default
 module contains the website's home page, and pages accessed from the top
 link bar.
\end_layout

\begin_layout Description
module-exampleX are more example modules.
 You can make backup copies these and fiddle around with the original modules
 to see how the code works.
\end_layout

\begin_layout Description
new-ext-module is a module template directory.
 It is used by Kazaam as a template to clone new modules with external page
 content.
 This must not be modified unless you are absolutely sure you know what
 you are doing.
\end_layout

\begin_layout Description
new-module is a module template directory.
 It is used by Kazaam as a template to clone new modules with combined content.
 This must not be modified unless you are absolutely sure you know what
 you are doing.
\end_layout

\begin_layout Description
shared is a set of sub-directories and associated files that are common
 to all pages in a particular website.
\end_layout

\begin_layout Description
shared-host contains /
\emph on
incs
\emph default
/ sub-dir with symbolic links to files in:
\begin_inset Newline newline
\end_inset


\emph on
/kazaam-mwf/shared-host/incs/
\begin_inset Newline newline
\end_inset


\emph default

\begin_inset Newline newline
\end_inset

This directory of symbolic links allows each virtual host to access the
 host-wide shared include files that are outside of their virtual host DocumentR
oot.
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

The 
\emph on
/kazaam-mwf/shared-host
\emph default
 directory is on the same level as 
\emph on
develop
\emph default
, 
\emph on
intermediate
\emph default
, and 
\emph on
live
\emph default
.
 
\begin_inset Newline newline
\end_inset

So all virtual hosts in all code branches of the kazaam framework can include
 any of the files in 
\emph on
/kazaam-mwf/shared-host/incs/.
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset


\emph default
For example: if a physical server machine is going off-line for a while,
 you can alter 
\emph on
kazaam-mwf/shared-host/incs/host.js 
\emph default
and uncomment the line:
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

// onPageLoad(showMaintenanceMesg);
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

This will use DHTML to display a customizable maintenance message, that
 appears at the top of all pages in all virtual hosts on a particular server.
 This happens whenever a page is reloaded, or a new page is requested.
\begin_inset Newline newline
\end_inset


\end_layout

\begin_layout Description
tmp-backups contains temporary backups for this directory.
\end_layout

\begin_layout Description
website-docs contains all the development documentation for this particular
 website.
\end_layout

\begin_layout Subsection
Files in the top-level directory
\end_layout

\begin_layout Description
create-new-ext-module.xml is a phing script to create a new external-content
 module for this website.
\end_layout

\begin_layout Description
create-new-module.xml is a phing script to create a new module for this website.
\end_layout

\begin_layout Description
int-build.xml is a phing script to copy the 
\emph on
develop
\emph default
 code branch of this website to the 
\emph on
intermediate
\emph default
 code branch.
\end_layout

\begin_layout Description
int-delete.xml is a phing script to clean up the contents of the 
\emph on
intermediate
\emph default
 directory for this website.
\end_layout

\begin_layout Description
live-build.xml is a phing script to copy the 
\emph on
intermediate 
\emph default
code branch of this website to the 
\emph on
live
\emph default
 code branch.
\end_layout

\begin_layout Description
live-delete.xml is a phing script to clean up the contents of the 
\emph on
live
\emph default
 directory for this website.
 
\color red
Be carefull with this script, as it will delete everything in a live website!
 
\color inherit
Best used before a website is comissioned.
\end_layout

\begin_layout Description
robots.txt is used to control search engine access to any parts of this website.
\end_layout

\begin_layout Subsection
Contents of 
\emph on
shared
\emph default
 directory.
\end_layout

\begin_layout Standard
\begin_inset Box Frameless
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
status open

\begin_layout LyX-Code

\series bold
shared/
\end_layout

\begin_layout LyX-Code

\series bold
├── classes/
\end_layout

\begin_layout LyX-Code

\series bold
├── images/
\end_layout

\begin_layout LyX-Code

\series bold
├── incs/
\end_layout

\begin_layout LyX-Code

\series bold
├── meta-menus/
\end_layout

\begin_layout LyX-Code

\series bold
└── themes/
\end_layout

\end_inset


\end_layout

\begin_layout Description
classes contains PHP5 classes that can be included by all pages in this
 website, if needed.
\end_layout

\begin_layout Description
images contains image files that can be included by all pages in this website,
 as needed.
\end_layout

\begin_layout Description
incs contains the following:
\end_layout

\begin_layout Standard
\begin_inset Box Frameless
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
status open

\begin_layout LyX-Code

\series bold
incs/
\end_layout

\begin_layout LyX-Code

\series bold
├── tmp-backups/
\end_layout

\begin_layout LyX-Code

\series bold
├── admin-details.php
\end_layout

\begin_layout LyX-Code

\series bold
├── admin-page-check.php
\end_layout

\begin_layout LyX-Code

\series bold
├── admin_link_bar.php
\end_layout

\begin_layout LyX-Code

\series bold
├── copyright.php
\end_layout

\begin_layout LyX-Code

\series bold
├── disclaimer.php
\end_layout

\begin_layout LyX-Code

\series bold
├── domain.conf.php
\end_layout

\begin_layout LyX-Code

\series bold
├── homepage-menu.php
\end_layout

\begin_layout LyX-Code

\series bold
├── meta-info.php
\end_layout

\begin_layout LyX-Code

\series bold
├── page-head.php
\end_layout

\begin_layout LyX-Code

\series bold
├── right-menu.php
\end_layout

\begin_layout LyX-Code

\series bold
├── session.funcs.php
\end_layout

\begin_layout LyX-Code

\series bold
├── site-config.php
\end_layout

\begin_layout LyX-Code

\series bold
├── site-js.js
\end_layout

\begin_layout LyX-Code

\series bold
├── top_link_bar.php
\end_layout

\begin_layout LyX-Code

\series bold
└── user.conf.php
\end_layout

\end_inset


\end_layout

\begin_layout Description
admin-details.php contains the website administrator's logon (username and
 password) details.
\end_layout

\begin_layout Description
admin-page-check.php is the website administrator's logon page.
\end_layout

\begin_layout Description
admin_link_bar.php provides a customizable top_link_bar for the website administr
ator's use only.
\end_layout

\begin_layout Description
copyright.php contains copyright bar content which is loaded at the bottom
 of each page
\series bold
.
\end_layout

\begin_layout Description
disclaimer-body.php contains content for the 
\emph on
/home/anyuser/disclaimer.php
\emph default
 page.
\end_layout

\begin_layout Description
domain.conf.php Virtual host configuration file.
 Used to set
\begin_inset Newline newline
\end_inset


\series bold
$WEBSITE_ROOT
\series default
 and 
\series bold
$DOMAIN_NAME
\series default
 values.
 Different values apply for each virtual host in the
\emph on
 develop
\emph default
, 
\emph on
intermediate
\emph default
 and 
\emph on
live
\emph default
 code branches.
\end_layout

\begin_layout Description
homepage-menu.php contains meta-menus for the 
\emph on
left_column
\emph default
 <
\series bold
div
\series default
> part of a page.
 This is the left-hand menu that appears in a 3-column and 2-column page.
\end_layout

\begin_layout Description
meta-info.php contains meta-tags for the <
\series bold
head
\series default
> section of a page.
 This file is required by 
\emph on
page-head.php
\end_layout

\begin_layout Description
page-head.php contains the <
\series bold
head
\series default
> section for every page in a particular virtual host.
\end_layout

\begin_layout Description
right-menu.php contains meta-menus for the 
\emph on
right_column
\emph default
 <
\series bold
div
\series default
> part of a page.
 This is the right-hand menu that appears in a 3-column page.
\end_layout

\begin_layout Description
session.funcs.php contains custom session handling functions for PHP.
 Needs rewriting to use sqlite database.
\end_layout

\begin_layout Description
site-config.php is a website's global configuration file.
 It is used to set directory paths for the framework and modules.
 This file is included by default at the top of every webpage that needs
 it.
\end_layout

\begin_layout Description
site-js.js global javascript file for all pages in a particular website.
\end_layout

\begin_layout Description
top_link_bar.php is the site navigation bar that appears below the site-logo
 banner.
\end_layout

\begin_layout Description
user.conf.php global configuration file included by site-config.php.
\begin_inset Newpage pagebreak
\end_inset


\end_layout

\begin_layout Section
Kazaam Modules
\end_layout

\begin_layout Subsection
Chapter Overview
\end_layout

\begin_layout Standard
This chapter looks at the structure of a Kazaam module, using the 
\emph on
'new-module' 
\emph default
template in the 
\emph on
kazaam-sitetpl 
\emph default
website template, as an example.
 
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

To add new functionality to a website, you can use the PHING script 
\series bold
create-new-module.xml.
 
\series default
This script will create a new module from the 
\emph on
new-module
\emph default
 template directory.
 The new module will be named using the name you specify at the start of
 the module creation script.
 This is how a website can be extended in a modular way.
\end_layout

\begin_layout Subsection
A Kazaam module top-level directory structure.
\end_layout

\begin_layout Standard
These are the sub-directories within each module:
\end_layout

\begin_layout LyX-Code

\series bold
new-module/
\end_layout

\begin_layout LyX-Code

\series bold
├── admin/
\end_layout

\begin_layout LyX-Code

\series bold
├── anyuser/
\end_layout

\begin_layout LyX-Code

\series bold
├── auth-user/
\end_layout

\begin_layout LyX-Code

\series bold
├── local/
\end_layout

\begin_layout LyX-Code

\series bold
├── module-docs/
\end_layout

\begin_layout LyX-Code

\series bold
└── page-templates/
\begin_inset Newline newline
\end_inset


\end_layout

\begin_layout Description
admin may contain web-pages or scripts to administer this module.
 Each module can have it's own administration pages, independent of other
 modules.
 If you copy a module to another virtual host, the module's admin pages
 will also go with it.
 Access to the 
\emph on
admin
\emph default
 directory can be controlled using Apache's httpd.conf authorization directives.
 If there are no administration pages to this module the 
\emph on
admin
\emph default
 directory will be empty.
\end_layout

\begin_layout Description
anyuser contains the web-pages that are accessible to anyone on the internet.
 There are no access restrictions on these pages.
\end_layout

\begin_layout Description
auth-user may contain web-pages with restricted access rights.
 These pages are only accessible to authorized users.
 Access to the 
\emph on
auth-user
\emph default
 directory can be controlled using Apache's httpd.conf authorization directives.
 If there are no pages for this module with restricted access the 
\emph on
auth-user
\emph default
 directory will be empty.
\end_layout

\begin_layout Description
local is a collection of various sub-dirs and files for this module.
\end_layout

\begin_layout Description
module-docs is a place to keep documentation about this particular module.
\end_layout

\begin_layout Description
page-templates contains a set of page templates automatically configured
 to work with this module.
 These are created by the
\series bold
 
\series default
\shape italic
create-new-module.xml
\shape default
 PHING script.
\end_layout

\begin_layout Standard
\begin_inset Box Frameless
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
status open

\begin_layout Subsection
Contents of 
\emph on
anyuser
\emph default
 directory
\end_layout

\begin_layout LyX-Code

\series bold
anyuser/
\end_layout

\begin_layout LyX-Code

\series bold
├── tmp-backups/
\end_layout

\begin_layout LyX-Code

\series bold
├── 1-column-page.php
\end_layout

\begin_layout LyX-Code

\series bold
├── 2-column-page.php
\end_layout

\begin_layout LyX-Code

\series bold
├── 3-column-page.php
\end_layout

\begin_layout LyX-Code

\series bold
└── new-module.php
\end_layout

\end_inset


\end_layout

\begin_layout Description
1-column-page.php is a page template without the 
\emph on
left_column
\emph default
 or 
\emph on
right_column
\emph default
 <
\series bold
div
\series default
> parts.
 This page's content window will fill the entire width of the screen, without
 displaying any left hand column or right hand column menus.
 Usefull for a page with very wide content.
\end_layout

\begin_layout Description
2-column-page.php is a page template with the 
\emph on
left_column
\emph default
 <
\series bold
div
\series default
> part, but without the 
\emph on
right_column
\emph default
 <
\series bold
div
\series default
> part.
 This page's content window will fill the right-hand side of the screen,
 and also display the left hand column menu.
 The left hand column menu can be either the website's default homepage
 menu, or the module's own customized left hand menu.
\end_layout

\begin_layout Description
3-column-page.php is a page template with the 
\emph on
left_column
\emph default
 and 
\emph on
right_column
\emph default
 <
\series bold
div
\series default
> parts.
 This page's content window will fill the middle section of the screen,
 and also display the left hand column menu, and the right hand column menu.
 The left hand column menu can be either the website's default homepage
 menu, or the module's own customized left hand column menu.
 The right hand column menu can be either the website's default right menu,
 or the module's own customized right hand menu.
\end_layout

\begin_layout Description
new-module.php is the homepage for this module.
 Each module has a homepage named after the module.
 When you create a new module with the PHING script 
\emph on
create-new-module.xml
\emph default
 (or 
\emph on
create-new-ext-module.xml
\emph default
), this page is also created, and renamed to the name of the new module.
\end_layout

\begin_layout Standard
\begin_inset Box Frameless
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
status open

\begin_layout Subsection
\begin_inset CommandInset label
LatexCommand label
name "sub:Contents-of-local-dir"

\end_inset

Contents of 
\emph on
local
\emph default
 directory
\end_layout

\begin_layout LyX-Code

\series bold
local/
\end_layout

\begin_layout LyX-Code

\series bold
├── classes/
\end_layout

\begin_layout LyX-Code

\series bold
├── images/
\end_layout

\begin_layout LyX-Code

\series bold
└── incs/
\end_layout

\end_inset


\end_layout

\begin_layout Description
classes is a container for PHP5 classes owned exclusively by this module.
 It may be empty if there are no PHP5 classes for this module.
\end_layout

\begin_layout Description
images is a container for images owned exclusively by this module.
 It may be empty if there are no images for this module.
\end_layout

\begin_layout Description
incs is a sub-dir containing the following:
\end_layout

\begin_layout LyX-Code
\begin_inset Box Frameless
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
status open

\begin_layout LyX-Code

\series bold
incs/
\end_layout

\begin_layout LyX-Code

\series bold
├── mod/
\end_layout

\begin_layout LyX-Code

\series bold
├── tmp-backups/
\end_layout

\begin_layout LyX-Code

\series bold
├── new-module.conf.php
\end_layout

\begin_layout LyX-Code

\series bold
└── new-module.conf.php.bak
\end_layout

\end_inset


\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset


\end_layout

\begin_layout Description
new-module.conf.php is the module's configuration file.
 Here you can set options that will apply to all pages in a particular module,
 such as the sql-database username and password for this module.
\end_layout

\begin_layout Description
mod is a sub-dir containing the following:
\end_layout

\begin_layout LyX-Code

\series bold
\begin_inset Box Frameless
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
status open

\begin_layout LyX-Code

\series bold
mod/
\end_layout

\begin_layout LyX-Code

\series bold
├── tmp-backups/
\end_layout

\begin_layout LyX-Code

\series bold
├── new-module-menu.php
\end_layout

\begin_layout LyX-Code

\series bold
└── new-module-right-menu.php
\end_layout

\end_inset


\end_layout

\begin_layout LyX-Code

\end_layout

\begin_layout Description
new-module-menu.php is a PHP file that pulls in the
\begin_inset Newline newline
\end_inset


\series bold
\emph on
/shared/incs/homepage-menu.php
\series default
\emph default
 
\emph on
left_column
\emph default
 menu, or contains content for it's own exclusive 
\emph on
left_column
\emph default
 menu.
\end_layout

\begin_layout Description
new-module-right-menu.php is a PHP file that pulls in the
\begin_inset Newline newline
\end_inset


\series bold
\emph on
/shared/incs/right-menu.php
\series default
\emph default
 
\emph on
right_column
\emph default
 menu, or contains content for it's own exclusive 
\emph on
right_column
\emph default
 menu.
\end_layout

\begin_layout Section
Kazaam Pages
\end_layout

\begin_layout Subsection
Chapter Overview
\end_layout

\begin_layout Standard
This chapter examines the structure of a typical xhtml page in Kazaam, using
 the 3-column page template from the 'new-module' module template as an
 example.
 We look at each line of the page, and see how the page is built on the
 server, using Apache's PHP5 module.
\begin_inset VSpace defskip
\end_inset


\end_layout

\begin_layout Subsection
Structure of a 3-Column Kazaam Page
\end_layout

\begin_layout Standard
When viewing the source code in a browser, the following 53 lines of code
 will generate a typical web page that is approximately 1100 lines long.
\begin_inset VSpace defskip
\end_inset


\end_layout

\begin_layout Standard

\lyxline

\end_layout

\begin_layout Standard

\series bold
\begin_inset CommandInset label
LatexCommand label
name "3-Column-Page-Template"

\end_inset

3-Column Page Template
\end_layout

\begin_layout LyX-Code

\series bold
01 <?php require "../../shared/incs/site-config.php"; ?>
\end_layout

\begin_layout LyX-Code

\series bold
02 <?php require "$MODULE_CONFIG/new-module.conf.php"; ?>
\end_layout

\begin_layout LyX-Code

\series bold
03
\end_layout

\begin_layout LyX-Code

\series bold
04 <?php $META_KEYWORDS = '*keywords* meta information -
\end_layout

\begin_layout LyX-Code

\series bold
05 may span multiple lines'; ?>
\end_layout

\begin_layout LyX-Code

\series bold
06
\end_layout

\begin_layout LyX-Code

\series bold
07 <?php $META_DESCRIPTION = '*description* meta information -
\end_layout

\begin_layout LyX-Code

\series bold
08 may span multiple lines'; ?>
\end_layout

\begin_layout LyX-Code

\series bold
09
\end_layout

\begin_layout LyX-Code

\series bold
10 <?php $MODULE_NAME = "$sitename - 3 Column page template"; ?>
\end_layout

\begin_layout LyX-Code

\series bold
11
\end_layout

\begin_layout LyX-Code

\series bold
12 <?php require "$SHARED_INCS/page-head.php"; ?>
\end_layout

\begin_layout LyX-Code

\series bold
13
\end_layout

\begin_layout LyX-Code

\series bold
14 <body>
\end_layout

\begin_layout LyX-Code

\series bold
15
\end_layout

\begin_layout LyX-Code

\series bold
16 <div id="main_window_3col">
\end_layout

\begin_layout LyX-Code

\series bold
17
\end_layout

\begin_layout LyX-Code

\series bold
18 <div class="box2">
\end_layout

\begin_layout LyX-Code

\series bold
19   <h3>New Module</h3>
\end_layout

\begin_layout LyX-Code

\series bold
20 </div>
\end_layout

\begin_layout LyX-Code

\series bold
21
\end_layout

\begin_layout LyX-Code

\series bold
22 <div class="box2">
\end_layout

\begin_layout LyX-Code

\series bold
23   <p>Main content for page goes here.</p>
\end_layout

\begin_layout LyX-Code

\series bold
24 </div>
\end_layout

\begin_layout LyX-Code

\series bold
25
\end_layout

\begin_layout LyX-Code

\series bold
26 <div class="update">
\end_layout

\begin_layout LyX-Code

\series bold
27   Last updated: Fri 23 Feb 07
\end_layout

\begin_layout LyX-Code

\series bold
28 </div>
\end_layout

\begin_layout LyX-Code

\series bold
29
\end_layout

\begin_layout LyX-Code

\series bold
30 </div> ~<!-- end of main_window_3col content -->
\end_layout

\begin_layout LyX-Code

\series bold
31
\end_layout

\begin_layout LyX-Code

\series bold
32 <img id="top_logo"
\end_layout

\begin_layout LyX-Code

\series bold
33      src="<?php echo $SHARED_IMAGES ?>/site-logo"
\end_layout

\begin_layout LyX-Code

\series bold
34      alt="site-logo" />
\end_layout

\begin_layout LyX-Code

\series bold
35
\end_layout

\begin_layout LyX-Code

\series bold
36 <div id="top_link_bar">
\end_layout

\begin_layout LyX-Code

\series bold
37   <?php require "$SHARED_INCS/top_link_bar.php"; ?>
\end_layout

\begin_layout LyX-Code

\series bold
38 </div>
\end_layout

\begin_layout LyX-Code

\series bold
39
\end_layout

\begin_layout LyX-Code

\series bold
40 <div id="left_column">
\end_layout

\begin_layout LyX-Code

\series bold
41   <?php require "$MODULE_PATH/new-module-menu.php" ?>
\end_layout

\begin_layout LyX-Code

\series bold
42 </div>
\end_layout

\begin_layout LyX-Code

\series bold
43
\end_layout

\begin_layout LyX-Code

\series bold
44 <div id="right_column">
\end_layout

\begin_layout LyX-Code

\series bold
45   <?php require "$MODULE_PATH/new-module-right-menu.php" ?>
\end_layout

\begin_layout LyX-Code

\series bold
46 </div>
\end_layout

\begin_layout LyX-Code

\series bold
47
\end_layout

\begin_layout LyX-Code

\series bold
48 <div id="copyright">
\end_layout

\begin_layout LyX-Code

\series bold
49   <?php require "$SHARED_INCS/copyright.php" ?>
\end_layout

\begin_layout LyX-Code

\series bold
50 </div>
\end_layout

\begin_layout LyX-Code

\series bold
51
\end_layout

\begin_layout LyX-Code

\series bold
52 </body>
\end_layout

\begin_layout LyX-Code

\series bold
53 </html>
\end_layout

\begin_layout Standard

\lyxline

\begin_inset VSpace defskip
\end_inset

A Kazaam 2-column page template is based on the 3-column page template,
 but does not have the 
\emph on
right_column
\emph default
 <
\series bold
div
\series default
> part, as in lines 44-46.
\end_layout

\begin_layout Standard
A Kazaam 1-column page template is based on the 3-column page template,
 but does not have the 
\emph on
left_column or right_column
\emph default
 <
\series bold
div
\series default
> parts, as in lines 40-46.
\end_layout

\begin_layout Subsection
How a Kazaam Page Loads
\end_layout

\begin_layout Description
line
\begin_inset space ~
\end_inset

01 loads the global configuration file for the website in:
\begin_inset Newline newline
\end_inset


\series bold
\emph on
website-name
\series default
/shared/incs/site-config.php
\emph default
 , where 
\series bold
\emph on
website-name 
\series default
\emph default
is a website's directory under the 
\emph on
develop
\emph default
, 
\emph on
intermediate
\emph default
 or 
\emph on
live
\emph default
 code branches.
 This global configuration file sets a number of PHP5 path variables, for
 including other parts of the page.
\end_layout

\begin_layout Description
line
\begin_inset space ~
\end_inset

02 loads the configuration file for the module this page belongs to:
\begin_inset Newline newline
\end_inset


\series bold
\emph on
website-name
\series default
/new-module/local/incs/new-module.conf.php
\emph default

\begin_inset Newline newline
\end_inset


\end_layout

\begin_layout Description
lines
\begin_inset space ~
\end_inset

04
\begin_inset space ~
\end_inset

-
\begin_inset space ~
\end_inset

08 these four lines override the value of the 
\series bold
$META_KEYWORDS
\begin_inset Newline newline
\end_inset


\series default
and $
\series bold
META_DESCRIPTION 
\series default
PHP5 variables.
 These two variables can be set globally for the whole of the website in
 
\series bold
\emph on
website-name
\series default
/shared/incs/user.conf.php, 
\emph default
overriden in each module's configuration file to apply to all pages in the
 module, or set individually in each page.
 This allows these two meta-tags to be customised on a page-by-page basis.
 Good for SEO.
 (search engine optimisation.)
\end_layout

\begin_layout Description
line
\begin_inset space ~
\end_inset

10 
\series bold
$MODULE_NAME 
\series default
is initially set in 
\emph on
new-module.conf.php .
 
\emph default
This allows any number of pages in a module to use all or part of this value
 in the <
\series bold
title
\series default
> tag for a page.
 Each page may append to this value, or totally overwrite it.
 The value of 
\series bold
$MODULE_NAME 
\series default
is the string displayed as the page's <
\series bold
title
\series default
> when it loads in the browser.
 see line 14, 
\series bold
Inside page-head.php 
\series default

\begin_inset CommandInset ref
LatexCommand vpageref
reference "sub:Inside-page-head.php"

\end_inset

, for details of how it's used.
\end_layout

\begin_layout Description
line
\begin_inset space ~
\end_inset

12 loads the <
\series bold
head
\series default
> part of the page:
\begin_inset Newline newline
\end_inset


\series bold
\emph on
website-name
\series default
/shared/incs/page-head.php .

\emph default
 For more
\emph on
 
\emph default
about 
\emph on
page-head.php 
\emph default
see 
\series bold
Inside page-head.php 
\series default

\begin_inset CommandInset ref
LatexCommand vpageref
reference "sub:Inside-page-head.php"

\end_inset

.
\end_layout

\begin_layout Description
line
\begin_inset space ~
\end_inset

14 is the start of the page's <
\series bold
body
\series default
> section.
\end_layout

\begin_layout Description
lines
\begin_inset space ~
\end_inset

16
\begin_inset space ~
\end_inset

-
\begin_inset space ~
\end_inset

30 
\emph on
main_window_3col 
\emph default
is the centre column and content for this 3-column page.
 This is first in the source code to make it easier for search engines to
 find the page's content.
\end_layout

\begin_layout Description
lines
\begin_inset space ~
\end_inset

32
\begin_inset space ~
\end_inset

-
\begin_inset space ~
\end_inset

34 load the banner to display across the top of each page:
\begin_inset Newline newline
\end_inset


\series bold
\emph on
website-name
\series default
/shared/images/site-logo
\emph default
 .
 Most browsers can identify the image type by the 
\emph on
site-logo
\emph default
 file contents.
 Using an image filename without an extension allows any image file to be
 copied to this 
\emph on
site-logo
\emph default
 file, and used as the site banner.
\end_layout

\begin_layout Description
lines
\begin_inset space ~
\end_inset

36
\begin_inset space ~
\end_inset

-
\begin_inset space ~
\end_inset

38 load the 
\series bold
\emph on
website-name
\series default
/shared/incs/top_link_bar.php .
 
\emph default
This is the site navigation bar that appears below the 
\emph on
site-logo
\emph default
.
\end_layout

\begin_layout Description
lines
\begin_inset space ~
\end_inset

40
\begin_inset space ~
\end_inset

-
\begin_inset space ~
\end_inset

42 load the:
\begin_inset Newline newline
\end_inset


\series bold
\emph on
website-name
\series default
/new-module/local/incs/mod/new-module-menu.php 
\emph default
file.
\begin_inset Newline newline
\end_inset

This file uses it's own custom menu for the module, or pulls in the
\begin_inset Newline newline
\end_inset


\series bold
\emph on
website-name
\series default
/shared/incs/homepage-menu.php
\emph default
 file instead.
 The menu is displayed in the left hand column of the page.
\end_layout

\begin_layout Description
lines
\begin_inset space ~
\end_inset

44
\begin_inset space ~
\end_inset

-
\begin_inset space ~
\end_inset

46 load the:
\begin_inset Newline newline
\end_inset


\series bold
\emph on
website-name
\series default
/new-module/local/incs/mod/new-module-right-menu.php 
\emph default
file.
 This file pulls in the
\begin_inset Newline newline
\end_inset


\series bold
\emph on
website-name
\series default
/shared/incs/right-menu.php
\emph default
 file, which is displayed in the right hand column of the page.
\end_layout

\begin_layout Description
lines
\begin_inset space ~
\end_inset

48
\begin_inset space ~
\end_inset

-
\begin_inset space ~
\end_inset

50 pull in the 
\series bold
\emph on
website-name
\series default
/shared/incs/copyright.php
\emph default
 file.
 This is the copyright bar that is displayed at the bottom of each page.
\end_layout

\begin_layout Description
lines
\begin_inset space ~
\end_inset

52
\begin_inset space ~
\end_inset

-
\begin_inset space ~
\end_inset

53 mark the end of the page's <
\series bold
body
\series default
> and <
\series bold
html
\series default
> sections.
\end_layout

\begin_layout Subsection
\begin_inset CommandInset label
LatexCommand label
name "sub:Inside-page-head.php"

\end_inset

Inside 
\emph on
page-head.php
\end_layout

\begin_layout Standard
Here we take a look at what's happening inside:
\begin_inset Newline newline
\end_inset


\series bold
\emph on
website-name
\series default
/shared/incs/page-head.php
\emph default

\begin_inset VSpace defskip
\end_inset


\end_layout

\begin_layout Standard

\lyxline

\end_layout

\begin_layout LyX-Code

\family roman
\series bold
page-head.php
\family default

\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

01 <?php
\end_layout

\begin_layout LyX-Code

\series bold
02  // database session management code
\end_layout

\begin_layout LyX-Code

\series bold
03  // require "$SHARED_INCS/session.funcs.php";
\end_layout

\begin_layout LyX-Code

\series bold
04  // session_start();
\end_layout

\begin_layout LyX-Code

\series bold
05 ?>
\end_layout

\begin_layout LyX-Code

\series bold
06
\end_layout

\begin_layout LyX-Code

\series bold
07 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
\end_layout

\begin_layout LyX-Code

\series bold
08  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
\end_layout

\begin_layout LyX-Code

\series bold
09
\end_layout

\begin_layout LyX-Code

\series bold
10 <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
\end_layout

\begin_layout LyX-Code

\series bold
11
\end_layout

\begin_layout LyX-Code

\series bold
12 <head>
\end_layout

\begin_layout LyX-Code

\series bold
13
\end_layout

\begin_layout LyX-Code

\series bold
14 <title><?php echo $MODULE_NAME ?></title>
\end_layout

\begin_layout LyX-Code

\series bold
15
\end_layout

\begin_layout LyX-Code

\series bold
16 <?php require "$CONFIG_PATH/meta-info.php"; ?>
\end_layout

\begin_layout LyX-Code

\series bold
17
\end_layout

\begin_layout LyX-Code

\series bold
18 <!-- ================================== -->
\end_layout

\begin_layout LyX-Code

\series bold
19 <!-- files common to this particular website only --> 
\end_layout

\begin_layout LyX-Code

\series bold
20
\end_layout

\begin_layout LyX-Code

\series bold
21 <script type="text/javascript"
\end_layout

\begin_layout LyX-Code

\series bold
22   src="<?php echo $SHARED_INCS ?>/site-js.js">
\end_layout

\begin_layout LyX-Code

\series bold
23 </script>
\end_layout

\begin_layout LyX-Code

\series bold
24
\end_layout

\begin_layout LyX-Code

\series bold
25 <?php /* for development purposes only */ ?>
\end_layout

\begin_layout LyX-Code

\series bold
26 <style type="text/css">
\end_layout

\begin_layout LyX-Code

\series bold
27   <?php require "$SITE_THEMES/site-css.php"; ?>
\end_layout

\begin_layout LyX-Code

\series bold
28 </style>
\end_layout

\begin_layout LyX-Code

\series bold
29
\end_layout

\begin_layout LyX-Code

\series bold
30 <?php /* for live pages only */ ?>
\end_layout

\begin_layout LyX-Code

\series bold
31 <!-- link rel="stylesheet" type="text/css"
\end_layout

\begin_layout LyX-Code

\series bold
32 href="<?php /* echo $SITE_THEMES */ ?>/site-css.css" / -->
\end_layout

\begin_layout LyX-Code

\series bold
33
\end_layout

\begin_layout LyX-Code

\series bold
34 <!-- ================================== -->
\end_layout

\begin_layout LyX-Code

\series bold
35 <!-- files shared by all websites on this server -->
\end_layout

\begin_layout LyX-Code

\series bold
36
\end_layout

\begin_layout LyX-Code

\series bold
37 <style type="text/css">
\end_layout

\begin_layout LyX-Code

\series bold
38   <?php require "$SHARED_HOST_INCS/host.css"; ?>
\end_layout

\begin_layout LyX-Code

\series bold
39 </style>
\end_layout

\begin_layout LyX-Code

\series bold
40
\end_layout

\begin_layout LyX-Code

\series bold
41 <script type="text/javascript"
\end_layout

\begin_layout LyX-Code

\series bold
42   src="<?php echo $SHARED_HOST_INCS ?>/host.js">
\end_layout

\begin_layout LyX-Code

\series bold
43 </script>
\end_layout

\begin_layout LyX-Code

\series bold
44
\end_layout

\begin_layout LyX-Code

\series bold
45 <!-- ================================== -->
\end_layout

\begin_layout LyX-Code

\series bold
46
\end_layout

\begin_layout LyX-Code

\series bold
47 <script type="text/javascript"
\end_layout

\begin_layout LyX-Code

\series bold
48   src="<?php echo $SHARED_HOST_INCS ?>/x_core.js">
\end_layout

\begin_layout LyX-Code

\series bold
49 </script>
\end_layout

\begin_layout LyX-Code

\series bold
50
\end_layout

\begin_layout LyX-Code

\series bold
51 <script type="text/javascript"
\end_layout

\begin_layout LyX-Code

\series bold
52   src="<?php echo $SHARED_HOST_INCS ?>/x_event.js">
\end_layout

\begin_layout LyX-Code

\series bold
53 </script>
\end_layout

\begin_layout LyX-Code

\series bold
54
\end_layout

\begin_layout LyX-Code

\series bold
55 <!-- ================================== -->
\end_layout

\begin_layout LyX-Code

\series bold
56
\end_layout

\begin_layout LyX-Code

\series bold
57 </head>
\end_layout

\begin_layout Standard

\lyxline

\end_layout

\begin_layout Subsection
How 
\emph on
page-head.php
\emph default
 builds the <head> section
\end_layout

\begin_layout Standard
All pages in a kazaam website use
\begin_inset Newline newline
\end_inset


\series bold
\emph on
website-name
\series default
/shared/incs/page-head.php
\emph default
, where 
\series bold
\emph on
website-name 
\series default
\emph default
is a website's directory under the 
\emph on
develop
\emph default
, 
\emph on
intermediate
\emph default
 or 
\emph on
live
\emph default
 code branches.
 So any modifications made to 
\emph on
page-head.php
\emph default
 will apply globally to one particular website.
\end_layout

\begin_layout Description
lines
\begin_inset space ~
\end_inset

03
\begin_inset space ~
\end_inset

-
\begin_inset space ~
\end_inset

04 uncomment these two lines to enable the use of PHP5's session management
 functions.
 
\series bold
Need to rewrite these as a PHP5 OOP class.
\end_layout

\begin_layout Description
lines
\begin_inset space ~
\end_inset

07
\begin_inset space ~
\end_inset

-
\begin_inset space ~
\end_inset

10 set the document type for all pages in this website to XHTML 1.0 Transitional.
\end_layout

\begin_layout Description
line
\begin_inset space ~
\end_inset

12 is the start of the <
\series bold
head
\series default
> section for the page.
\end_layout

\begin_layout Description
line
\begin_inset space ~
\end_inset

14 $MODULE_NAME
\series bold
 
\series default
is initially set in 
\emph on
new-module.conf.php 
\emph default
and may also be overidden in each page before 
\emph on
page-head.php
\emph default
 is loaded.
 After 
\emph on
page-head.php
\emph default
 has loaded, this line echoes the value of $MODULE_NAME and sets the <title>
 tag for the current page.
 See line 10 in the section about page structure starting 
\begin_inset CommandInset ref
LatexCommand vpageref
reference "3-Column-Page-Template"

\end_inset


\begin_inset space ~
\end_inset

.
\end_layout

\begin_layout Description
line
\begin_inset space ~
\end_inset

16 loads 
\series bold
\emph on
website-name
\series default
/shared/incs/meta-info.php .

\emph default
 This file contains global meta-tags and associated values that are applied
 to all pages by default.
 The '
\emph on
keywords
\emph default
' and '
\emph on
description
\emph default
' meta-tags can be set globally for the whole of a particular website in
\begin_inset Newline newline
\end_inset


\series bold
\emph on
website-name
\series default
/shared/incs/user.conf.php,
\emph default
 overriden in each module's configuration file to apply to all pages in
 the module, or set individually in each page.
 This allows these two meta-tags to be customised on a page-by-page basis,
 if required.
 Good for SEO.
 (search engine optimisation.)
\end_layout

\begin_layout Description
lines
\begin_inset space ~
\end_inset

21
\begin_inset space ~
\end_inset

-
\begin_inset space ~
\end_inset

23 load the 
\series bold
\emph on
website-name
\series default
/shared/incs/site-js.js 
\emph default
javascript file for this website.
\end_layout

\begin_layout Description
lines
\begin_inset space ~
\end_inset

25
\begin_inset space ~
\end_inset

-
\begin_inset space ~
\end_inset

28 load the 
\series bold
\emph on
website-name
\series default
/shared/themes/default/site-css.php 
\emph default
CSS file for this website.
 This is a PHP-enabled CSS file, used for development purposes only.
 See 
\series bold
CSS Site Themes
\series default

\begin_inset space ~
\end_inset


\begin_inset CommandInset ref
LatexCommand vpageref
reference "sec:CSS-Site-Themes"

\end_inset

 for more details.
\end_layout

\begin_layout Description
lines
\begin_inset space ~
\end_inset

30
\begin_inset space ~
\end_inset

-
\begin_inset space ~
\end_inset

32 load the 
\series bold
\emph on
website-name
\series default
/shared/themes/default/site-css.css
\begin_inset Newline newline
\end_inset


\emph default
CSS file for this website.
 This is a standard CSS file, derived from 
\emph on
site-css.php
\emph default
, and used for the live code branch.
\end_layout

\begin_layout Description
lines
\begin_inset space ~
\end_inset

37
\begin_inset space ~
\end_inset

-49 load the 
\series bold
\emph on
website-name
\series default
/shared-host/incs/host.css
\emph default
 CSS file
\emph on
.
 
\emph default
This is actually a symbolic link to:
\begin_inset Newline newline
\end_inset


\emph on
kazaam-mwf/shared-host/incs/host.css .
 
\emph default
This CSS file is part of the Kazaam framework, and used by all pages in
 all websites.
\end_layout

\begin_layout Description
lines
\begin_inset space ~
\end_inset

41
\begin_inset space ~
\end_inset

-43 load the 
\series bold
\emph on
website-name
\series default
/shared-host/incs/host.js 
\emph default
Javascript file
\emph on
.
 
\emph default
This is actually a symbolic link to:
\begin_inset Newline newline
\end_inset


\emph on
kazaam-mwf/shared-host/incs/host.js .
 
\emph default
This Javascript file is part of the Kazaam framework, and used by all pages
 in all websites.
\end_layout

\begin_layout Description
line
\begin_inset space ~
\end_inset

57 is the end of the <
\series bold
head
\series default
> section for the page.
\begin_inset Newpage pagebreak
\end_inset


\end_layout

\begin_layout Section
Kazaam Configuration files
\end_layout

\begin_layout Subsection
Chapter Overview
\end_layout

\begin_layout Standard
This chapter looks at the different types of configuration files in Kazaam.
 It then looks at the order in which these configuration files load, and
 the structure of each of these files in detail.
\end_layout

\begin_layout Subsection
Introduction
\end_layout

\begin_layout Standard
There are four types of configuration files in Kazaam:
\end_layout

\begin_layout Enumerate

\series bold
\emph on
website-name
\series default
\emph default
/shared/incs/
\emph on
site-config.php
\end_layout

\begin_layout Enumerate

\series bold
\emph on
website-name
\series default
\emph default
/shared/incs/
\emph on
user.conf.php
\end_layout

\begin_layout Enumerate

\series bold
\emph on
website-name
\series default
\emph default
/shared/incs/
\emph on
domain.conf.php
\end_layout

\begin_layout Enumerate

\series bold
\emph on
module-name
\series default
\emph default
/anyuser/local/incs/
\emph on
module-name
\emph default
.conf.php
\end_layout

\begin_layout Standard
where 
\series bold
\emph on
website-name
\series default
\emph default
 is the name of the respective website you are looking at either in the
 
\emph on
develop
\emph default
, 
\emph on
intermediate
\emph default
 or 
\emph on
live
\emph default
 code branches.
\begin_inset Newline newline
\end_inset


\end_layout

\begin_layout Standard
Each module has it's own configuration file, named after the module, as
 in item 4 above; and 
\series bold
\emph on
module-name 
\series default
\emph default
is a module under 
\series bold
\emph on
website-name 
\series default
\emph default
.
 All webpages belong to a module, and each webpage may use the module's
 configuration file, if needed.
 See 
\series bold
Contents of 
\emph on
local
\emph default
 directory
\series default
,
\begin_inset space ~
\end_inset


\begin_inset CommandInset ref
LatexCommand vpageref
reference "sub:Contents-of-local-dir"

\end_inset

 for more details.
\end_layout

\begin_layout Subsection
\begin_inset CommandInset label
LatexCommand label
name "sub:config-file-loading"

\end_inset

Loading order and precedence
\end_layout

\begin_layout Enumerate

\emph on
site-config.php
\end_layout

\begin_layout Enumerate

\emph on
user.conf.php
\end_layout

\begin_layout Enumerate

\emph on
domain.conf.php
\end_layout

\begin_layout Enumerate

\emph on
module-name
\emph default
.conf.php
\end_layout

\begin_layout Standard
The configuration files are loaded in the above order.
 So any variables that are set in configuration files that load later, will
 take precedence over the same variables in configuration files that have
 loaded earlier.
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

 Variables of the same name set in 
\emph on
user.conf.php
\emph default
, will override the same variables set in 
\emph on
site-config.php .
 
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset


\emph default
Variables of the same name set in 
\emph on
domain.conf.php, 
\emph default
will override the same variables set in 
\emph on
user.conf.php 
\emph default
and
\emph on
 site-config.php .
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset


\emph default
Variables of the same name set in 
\emph on
module-name.
\emph default
conf.php, will override the same variables set in 
\emph on
domain.conf.php, user.conf.php 
\emph default
and
\emph on
 site-config.php .
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset


\emph default
Generally there should be no need to override variables set by configuration
 files that have loaded earlier.
 The only variables that you may need to override are those you set for
 groups of pages in a module's configuration file, or individually for each
 page, such as 
\series bold
$META_KEYWORDS,
\series default
 $
\series bold
META_DESCRIPTION
\series default
, and 
\series bold
$MODULE_NAME
\series default
.
\begin_inset Newline newline
\end_inset


\end_layout

\begin_layout Subsection
site-config.php
\end_layout

\begin_layout Standard
This is the main configuration file that is required at the start of a web
 page.
 It sets required paths for loading other parts of the page.
\end_layout

\begin_layout Subsubsection
Contents of site-config.php
\end_layout

\begin_layout Standard

\lyxline

\end_layout

\begin_layout LyX-Code

\family roman
\series bold
site-config.php
\family default

\begin_inset Newline newline
\end_inset


\series default

\begin_inset Newline newline
\end_inset


\series bold
01 <?php
\end_layout

\begin_layout LyX-Code

\series bold
02
\end_layout

\begin_layout LyX-Code

\series bold
03 // kazaam-sitetpl global website configuration.
\end_layout

\begin_layout LyX-Code

\series bold
04 // file-id: /kazaam-sitetpl/shared/incs/site-config.php
\end_layout

\begin_layout LyX-Code

\series bold
05
\end_layout

\begin_layout LyX-Code

\series bold
06 // include this file at the top of each page.
\end_layout

\begin_layout LyX-Code

\series bold
07 // this config file will be encoded by ioncube encoder
\end_layout

\begin_layout LyX-Code

\series bold
08 // hiding the path layouts
\end_layout

\begin_layout LyX-Code

\series bold
09
\end_layout

\begin_layout LyX-Code

\series bold
10 /* ------------------------------------------- */
\end_layout

\begin_layout LyX-Code

\series bold
11 // module-specific shared files
\end_layout

\begin_layout LyX-Code

\series bold
12
\end_layout

\begin_layout LyX-Code

\series bold
13 // path to module specific config files
\end_layout

\begin_layout LyX-Code

\series bold
14 $MODULE_CONFIG = "../local/incs";
\end_layout

\begin_layout LyX-Code

\series bold
15
\end_layout

\begin_layout LyX-Code

\series bold
16 // path to this module's local file content
\end_layout

\begin_layout LyX-Code

\series bold
17 $MODULE_PATH = "../local/incs/mod";
\end_layout

\begin_layout LyX-Code

\series bold
18
\end_layout

\begin_layout LyX-Code

\series bold
19 // path to this module's local images
\end_layout

\begin_layout LyX-Code

\series bold
20 $LOCAL_IMAGES = "../local/images";
\end_layout

\begin_layout LyX-Code

\series bold
21
\end_layout

\begin_layout LyX-Code

\series bold
22 // path to this module's local include files
\end_layout

\begin_layout LyX-Code

\series bold
23 $LOCAL_INCS = "../local/incs";
\end_layout

\begin_layout LyX-Code

\series bold
24
\end_layout

\begin_layout LyX-Code

\series bold
25 // path to this module's local class files
\end_layout

\begin_layout LyX-Code

\series bold
26 $LOCAL_CLASSES = "../local/classes";
\end_layout

\begin_layout LyX-Code

\series bold
27
\end_layout

\begin_layout LyX-Code

\series bold
28 /* ------------------------------------------- */
\end_layout

\begin_layout LyX-Code

\series bold
29 // site-wide shared file paths
\end_layout

\begin_layout LyX-Code

\series bold
30
\end_layout

\begin_layout LyX-Code

\series bold
31 // path to site-wide shared include files
\end_layout

\begin_layout LyX-Code

\series bold
32 // and other site-wide includes
\end_layout

\begin_layout LyX-Code

\series bold
33 $CONFIG_PATH = "../../shared/incs";
\end_layout

\begin_layout LyX-Code

\series bold
34
\end_layout

\begin_layout LyX-Code

\series bold
35 // path to site-wide shared include files
\end_layout

\begin_layout LyX-Code

\series bold
36 // and other site-wide includes
\end_layout

\begin_layout LyX-Code

\series bold
37 $SHARED_INCS = "../../shared/incs";
\end_layout

\begin_layout LyX-Code

\series bold
38
\end_layout

\begin_layout LyX-Code

\series bold
39 // path to site-wide shared php classes
\end_layout

\begin_layout LyX-Code

\series bold
40 $SHARED_CLASSES = "../../shared/classes";
\end_layout

\begin_layout LyX-Code

\series bold
41
\end_layout

\begin_layout LyX-Code

\series bold
42 // path to site-wide shared meta-menus
\end_layout

\begin_layout LyX-Code

\series bold
43 $SHARED_META_MENUS = "../../shared/meta-menus";
\end_layout

\begin_layout LyX-Code

\series bold
44
\end_layout

\begin_layout LyX-Code

\series bold
45 // path to site-wide shared images
\end_layout

\begin_layout LyX-Code

\series bold
46 $SHARED_IMAGES = "../../shared/images";
\end_layout

\begin_layout LyX-Code

\series bold
47
\end_layout

\begin_layout LyX-Code

\series bold
48 // path to site-wide style themes
\end_layout

\begin_layout LyX-Code

\series bold
49 $SITE_THEMES = "../../shared/themes/default";
\end_layout

\begin_layout LyX-Code

\series bold
50
\end_layout

\begin_layout LyX-Code

\series bold
51 /* ------------------------------------------- */
\end_layout

\begin_layout LyX-Code

\series bold
52
\end_layout

\begin_layout LyX-Code

\series bold
53 // allow site admin to alter the website configuration globally
\end_layout

\begin_layout LyX-Code

\series bold
54 // this config file will not be encoded
\end_layout

\begin_layout LyX-Code

\series bold
55 // all files ending with .conf.php are not meant
\begin_inset Newline newline
\end_inset

56 // to be encoded
\end_layout

\begin_layout LyX-Code

\series bold
57 require "$SHARED_INCS/user.conf.php";
\end_layout

\begin_layout LyX-Code

\series bold
58
\end_layout

\begin_layout LyX-Code

\series bold
59 ?>
\end_layout

\begin_layout Standard

\lyxline

\end_layout

\begin_layout Subsubsection
Variables inside site-config.php
\end_layout

\begin_layout Standard
Not all of these path variables are used - but they are defined here just
 in case they are needed.
\end_layout

\begin_layout Description
line
\begin_inset space ~
\end_inset

14 $MODULE_CONFIG = "../local/incs";
\begin_inset Newline newline
\end_inset

path to the module's configuration file.
 It is used in the second line of a page, after site-config.php has loaded.
 See line 02 of the 
\series bold
3-Column
\begin_inset space ~
\end_inset

Page
\begin_inset space ~
\end_inset

Template 
\series default

\begin_inset CommandInset ref
LatexCommand vpageref
reference "3-Column-Page-Template"

\end_inset

 for how it is used.
\end_layout

\begin_layout Description
line
\begin_inset space ~
\end_inset

17 $MODULE_PATH = "../local/incs/mod";
\begin_inset Newline newline
\end_inset

path to the module's menu files.
\end_layout

\begin_layout Description
line
\begin_inset space ~
\end_inset

20 $LOCAL_IMAGES = "../local/images";
\begin_inset Newline newline
\end_inset

path to the image files used exclusively by this module.
\end_layout

\begin_layout Description
line
\begin_inset space ~
\end_inset

23 $LOCAL_INCS = "../local/incs";
\begin_inset Newline newline
\end_inset

path to the module's local include files.
\end_layout

\begin_layout Description
line
\begin_inset space ~
\end_inset

26 $LOCAL_CLASSES = "../local/classes";
\begin_inset Newline newline
\end_inset

path to the module's local PHP classes.
\end_layout

\begin_layout Description
line
\begin_inset space ~
\end_inset

33 $CONFIG_PATH = "../../shared/incs";
\begin_inset Newline newline
\end_inset

path to site-wide website configuration files.
\end_layout

\begin_layout Description
line
\begin_inset space ~
\end_inset

37 $SHARED_INCS = "../../shared/incs";
\begin_inset Newline newline
\end_inset

path to site-wide shared include files.
\end_layout

\begin_layout Description
line
\begin_inset space ~
\end_inset

40 $SHARED_CLASSES = "../../shared/classes";
\begin_inset Newline newline
\end_inset

path to site-wide shared PHP classes.
\end_layout

\begin_layout Description
line
\begin_inset space ~
\end_inset

43 $SHARED_META_MENUS = "../../shared/meta-menus";
\begin_inset Newline newline
\end_inset

path to site-wide shared meta-menus.
 Used to build the LH column and RH column menu structures for each page.
\end_layout

\begin_layout Description
line
\begin_inset space ~
\end_inset

46 $SHARED_IMAGES = "../../shared/images";
\begin_inset Newline newline
\end_inset

path to site-wide shared image files.
 Used for example, to load the site-logo image.
 See line 33 of the 
\series bold
3-Column
\begin_inset space ~
\end_inset

Page
\begin_inset space ~
\end_inset

Template 
\series default

\begin_inset CommandInset ref
LatexCommand vpageref
reference "3-Column-Page-Template"

\end_inset

 for how it is used.
\end_layout

\begin_layout Description
line
\begin_inset space ~
\end_inset

49 $SITE_THEMES = "../../shared/themes/default";
\begin_inset Newline newline
\end_inset

path to site-wide shared CSS stylesheet files.
\end_layout

\begin_layout Description
line
\begin_inset space ~
\end_inset

57 require "$SHARED_INCS/user.conf.php";
\begin_inset Newline newline
\end_inset

this line loads the 
\emph on
user.conf.php
\emph default
 configuration file.
\end_layout

\begin_layout Subsubsection
Path Synonyms
\end_layout

\begin_layout Standard
$MODULE_CONFIG is a synonym for $LOCAL_INCS.
 Both point to
\begin_inset Newline newline
\end_inset

../local/incs .
 $MODULE_CONFIG is used for the path to a module's configuration file, whereas
 $LOCAL_INCS can be used as a path to any other type of module include file(s).
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

$CONFIG_PATH is a synonym for $SHARED_INCS.
 Both point to
\begin_inset Newline newline
\end_inset

../../shared/incs .
 $CONFIG_PATH is used for paths to site-wide configuration files, whereas
 $SHARED_INCS can be used for any other type of site-wide include file(s).
\end_layout

\begin_layout Standard

\lyxline

\end_layout

\begin_layout Subsection
user.conf.php
\end_layout

\begin_layout Standard
This file is required by 
\emph on
site-config.php .
\end_layout

\begin_layout Subsubsection
Contents of user.conf.php
\end_layout

\begin_layout Standard

\lyxline

\end_layout

\begin_layout LyX-Code

\family roman
\series bold
user.conf.php
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset


\family default
01 <?php
\end_layout

\begin_layout LyX-Code

\series bold
02
\end_layout

\begin_layout LyX-Code

\series bold
03 // kazaam-sitetpl user configuration file
\end_layout

\begin_layout LyX-Code

\series bold
04 // file-id: /kazaam-sitetpl/shared/incs/user.conf.php
\end_layout

\begin_layout LyX-Code

\series bold
05
\end_layout

\begin_layout LyX-Code

\series bold
06 /**
\end_layout

\begin_layout LyX-Code

\series bold
07 this config file is included by site-config.php as plain text,
\end_layout

\begin_layout LyX-Code

\series bold
08 and not encoded.
 Values set here apply globally to a site,
\end_layout

\begin_layout LyX-Code

\series bold
09 but may be overidden in module-name.conf.php files.
\end_layout

\begin_layout LyX-Code

\series bold
10 **/
\end_layout

\begin_layout LyX-Code

\series bold
11
\end_layout

\begin_layout LyX-Code

\series bold
12 // uncomment this line to turn OFF all error messages globally
\end_layout

\begin_layout LyX-Code

\series bold
13 // error_reporting(0);
\end_layout

\begin_layout LyX-Code

\series bold
14
\end_layout

\begin_layout LyX-Code

\series bold
15 /* ---------------------------------------------- */
\end_layout

\begin_layout LyX-Code

\series bold
16 // this required config file will not be encoded
\end_layout

\begin_layout LyX-Code

\series bold
17 // and contains variables to set domain specific paths
\end_layout

\begin_layout LyX-Code

\series bold
18
\end_layout

\begin_layout LyX-Code

\series bold
19 require "$SHARED_INCS/domain.conf.php";
\end_layout

\begin_layout LyX-Code

\series bold
20 /* ---------------------------------------------- */
\end_layout

\begin_layout LyX-Code

\series bold
21
\end_layout

\begin_layout LyX-Code

\series bold
22 // meta keywords tag
\end_layout

\begin_layout LyX-Code

\series bold
23 $META_KEYWORDS = 'keyword default content for
\end_layout

\begin_layout LyX-Code

\series bold
24   kazaam-sitetpl website here - may span multiple lines';
\end_layout

\begin_layout LyX-Code

\series bold
25
\end_layout

\begin_layout LyX-Code

\series bold
26 // meta description tag
\end_layout

\begin_layout LyX-Code

\series bold
27 $META_DESCRIPTION = 'description default content for
\begin_inset Newline newline
\end_inset

28   kazaam-sitetpl website here - may span multiple lines';
\end_layout

\begin_layout LyX-Code

\series bold
29
\end_layout

\begin_layout LyX-Code

\series bold
30 /* ---------------------------------------------- */
\end_layout

\begin_layout LyX-Code

\series bold
31 // database connectivity
\end_layout

\begin_layout LyX-Code

\series bold
32 // each website has at least one database with the same
\end_layout

\begin_layout LyX-Code

\series bold
33 // name as the website
\end_layout

\begin_layout LyX-Code

\series bold
34
\end_layout

\begin_layout LyX-Code

\series bold
35 // Mysql hostname for this website
\end_layout

\begin_layout LyX-Code

\series bold
36 $hostname = 'localhost';
\end_layout

\begin_layout LyX-Code

\series bold
37
\end_layout

\begin_layout LyX-Code

\series bold
38 // default database for this website
\end_layout

\begin_layout LyX-Code

\series bold
39 $dbname = 'kazaam-sitetpl';
\end_layout

\begin_layout LyX-Code

\series bold
40
\end_layout

\begin_layout LyX-Code

\series bold
41 // $username is set for each module in
\begin_inset Newline newline
\end_inset

42 // module-name/local/incs/module-name.conf.php
\end_layout

\begin_layout LyX-Code

\series bold
43
\end_layout

\begin_layout LyX-Code

\series bold
44 // $password is set for each module in
\begin_inset Newline newline
\end_inset

45 // module-name/local/incs/module-name.conf.php
\end_layout

\begin_layout LyX-Code

\series bold
46 /* ---------------------------------------------- */
\end_layout

\begin_layout LyX-Code

\series bold
47
\end_layout

\begin_layout LyX-Code

\series bold
48 ?>
\end_layout

\begin_layout Standard

\lyxline

\end_layout

\begin_layout Subsubsection
Variables inside user.conf.php
\end_layout

\begin_layout Description
lines
\begin_inset space ~
\end_inset

03
\begin_inset space ~
\end_inset

-
\begin_inset space ~
\end_inset

04 when you create a new website with the PHING script 
\emph on
create-new-website.xml
\emph default
 , the string value 'kazaam-sitetpl' will be replaced with the name of the
 new website cloned from the kazaam-sitetpl template.
 This helps you identify which website the configuration file belongs to.
\end_layout

\begin_layout Description
line
\begin_inset space ~
\end_inset

13 // error_reporting(0);
\begin_inset Newline newline
\end_inset

uncomment this line to turn OFF all PHP error messages globally.
 May not be needed.
 Setting the values in httpd.conf might be better.
\end_layout

\begin_layout Description
line
\begin_inset space ~
\end_inset

19 require "$SHARED_INCS/domain.conf.php";
\begin_inset Newline newline
\end_inset

this line loads the domain.conf.php configuration file, discussed in the next
 section.
 Note - this require statement has moved to the end of user.conf.php as of
 kazaam-mwf
\end_layout

\begin_layout Description
lines
\begin_inset space ~
\end_inset

23
\begin_inset space ~
\end_inset

-
\begin_inset space ~
\end_inset

24 $META_KEYWORDS = 'keyword default content for kazaam-sitetpl website
 here - may span multiple lines';
\begin_inset Newline newline
\end_inset

Sets the meta-keywords value globally for a website.
\end_layout

\begin_layout Description
lines
\begin_inset space ~
\end_inset

27
\begin_inset space ~
\end_inset

-
\begin_inset space ~
\end_inset

28 $META_DESCRIPTION = 'description default content for kazaam-sitetpl website
 here - may span multiple lines';
\begin_inset Newline newline
\end_inset

Sets the meta-description value globally for a website.
\end_layout

\begin_layout Description
line
\begin_inset space ~
\end_inset

36 $hostname = 'localhost';
\begin_inset Newline newline
\end_inset

sets the hostname for mysql database connectivity.
\end_layout

\begin_layout Description
line
\begin_inset space ~
\end_inset

39 $dbname = 'kazaam-sitetpl';
\begin_inset Newline newline
\end_inset

sets the name of the default database for this website.
\end_layout

\begin_layout Standard

\lyxline

\end_layout

\begin_layout Subsection
domain.conf.php
\end_layout

\begin_layout Standard
This is required by 
\emph on
user.conf.php
\emph default
 .
 This file sets domain-specific paths for a particular website.
 Each code branch for a website uses different paths to access either the
 
\emph on
develop
\emph default
, 
\emph on
intermediate
\emph default
 or 
\emph on
live
\emph default
 code branches.
 When you create a new website with the PHING 
\emph on
create-new-website.xml
\emph default
 script, these domain.conf.php files are set up by the script, in the respective
 code branches.
\end_layout

\begin_layout Subsubsection
Contents of domain.conf.php
\end_layout

\begin_layout Standard

\lyxline

\end_layout

\begin_layout LyX-Code

\family roman
\series bold
domain.conf.php
\family default
\series default

\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset


\series bold
01 <?php
\end_layout

\begin_layout LyX-Code

\series bold
02 
\end_layout

\begin_layout LyX-Code

\series bold
03 /**
\end_layout

\begin_layout LyX-Code

\series bold
04 This config file is used to set domain specific paths
\begin_inset Newline newline
\end_inset

05 and values for a website in the develop, intermediate
\begin_inset Newline newline
\end_inset

06 and live directories.
 It is included by user.conf.php
\begin_inset Newline newline
\end_inset

07 as plain text, and not encoded.
 Values set here apply
\begin_inset Newline newline
\end_inset

08 globally to a site, and may NOT be overidden anywhere else.
\end_layout

\begin_layout LyX-Code

\series bold
09 Do NOT overwrite this file when updating site code from
\begin_inset Newline newline
\end_inset

10 develop or intermediate code branches.
 Different values
\begin_inset Newline newline
\end_inset

11 apply for each develop, intermediate and live directory.
\end_layout

\begin_layout LyX-Code

\series bold
12 **/
\end_layout

\begin_layout LyX-Code

\series bold
13
\end_layout

\begin_layout LyX-Code

\series bold
14 // URL for this website - used for validating xhtml & CSS.
\end_layout

\begin_layout LyX-Code

\series bold
15 // This needs to be set to the name of the virtual domain name
\end_layout

\begin_layout LyX-Code

\series bold
16 // when in a virtual server live directory container.
\end_layout

\begin_layout LyX-Code

\series bold
17 $DOMAIN_NAME = "http://www.kazaam-mwf.net";
\begin_inset Newline newline
\end_inset

18
\end_layout

\begin_layout LyX-Code

\series bold
19 // Full path to website's base directory relative
\begin_inset Newline newline
\end_inset

20 // to DocumentRoot setting.
\begin_inset Newline newline
\end_inset

21 // This needs to be set to "" when in a virtual server
\end_layout

\begin_layout LyX-Code

\series bold
22 // live directory container.
\end_layout

\begin_layout LyX-Code

\series bold
23 $WEBSITE_ROOT =
\begin_inset Newline newline
\end_inset

24 "/KAR/kazaam-mwf/kazaam-mwf/develop/kazaam-sitetpl";
\begin_inset Newline newline
\end_inset

25
\end_layout

\begin_layout LyX-Code

\series bold
26 // sitename to be used in page <title> tags.
\end_layout

\begin_layout LyX-Code

\series bold
27 $sitename = 'kazaam-sitetpl - DEVELOPMENT';
\end_layout

\begin_layout LyX-Code

\series bold
28
\end_layout

\begin_layout LyX-Code

\series bold
29 // path to shared-host include files.
\end_layout

\begin_layout LyX-Code

\series bold
30 // These include files are shared by all virtual hosts
\end_layout

\begin_layout LyX-Code

\series bold
31 // on this physical web server.
\end_layout

\begin_layout LyX-Code

\series bold
32 $SHARED_HOST_INCS = "../../../../shared-host/incs";
\end_layout

\begin_layout LyX-Code

\series bold
33
\end_layout

\begin_layout LyX-Code

\series bold
34 // Path to shared-host class files.
\end_layout

\begin_layout LyX-Code

\series bold
35 // These include files are shared by all virtual hosts
\end_layout

\begin_layout LyX-Code

\series bold
36 // on this physical web server.
\end_layout

\begin_layout LyX-Code

\series bold
37 $SHARED_HOST_CLASSES = "../../../../shared-host/classes";
\end_layout

\begin_layout LyX-Code

\series bold
38
\end_layout

\begin_layout LyX-Code

\series bold
39 ?>
\end_layout

\begin_layout LyX-Code

\end_layout

\begin_layout Standard

\lyxline

\end_layout

\begin_layout Subsubsection
Variables inside domain.conf.php
\end_layout

\begin_layout Description
line
\begin_inset space ~
\end_inset

17 $DOMAIN_NAME = "http://www.kazaam-mwf.net";
\begin_inset Newline newline
\end_inset

sets the domain name for the website.
 Used by the
\begin_inset Newline newline
\end_inset


\series bold
\emph on
website-name
\series default
/shared/meta-menus/page-checker.php
\series bold
 
\series default
\emph default
meta-menu, for validating xhtml and CSS, with W3C's online validators.
\end_layout

\begin_layout Description
lines
\begin_inset space ~
\end_inset

23
\begin_inset space ~
\end_inset

-
\begin_inset space ~
\end_inset

24 $WEBSITE_ROOT
\begin_inset space ~
\end_inset

=
\begin_inset Newline newline
\end_inset

"srv/kazaam-mwf/develop/kazaam-sitetpl";
\begin_inset Newline newline
\end_inset

sets the path to the 
\emph on
develop
\emph default
, 
\emph on
intermediate
\emph default
, or 
\emph on
live
\emph default
 code branch, and a website within that branch.
 Used by meta-menus to load pages residing on localhost.
 This does not include Apache's DocumentRoot, but follows on from there.
\end_layout

\begin_layout Description
line
\begin_inset space ~
\end_inset

27 $sitename = 'kazaam-sitetpl - DEVELOPMENT'; 
\begin_inset Newline newline
\end_inset

sets the name of the website and the code branch it lives in.
 Used as part of the <
\series bold
title
\series default
> tag for all pages in a website.
\end_layout

\begin_layout Description
line
\begin_inset space ~
\end_inset

32 $SHARED_HOST_INCS = "../../../../shared-host/incs";
\begin_inset Newline newline
\end_inset

sets the path to include files that are shared by all virtual hosts on this
 physical server.
\end_layout

\begin_layout Description
line
\begin_inset space ~
\end_inset

37 $SHARED_HOST_CLASSES = "../../../../shared-host/classes";
\begin_inset Newline newline
\end_inset

sets the path to PHP class files that are shared by all virtual hosts on
 this physical server.
\end_layout

\begin_layout Standard

\lyxline

\end_layout

\begin_layout Subsection

\emph on
module-name
\emph default
.conf.php
\end_layout

\begin_layout Standard
Each module has it's own configuration file.
 All pages that belong to a module may use the module's configuration file,
 if needed.
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

This example looks at
\begin_inset Newline newline
\end_inset


\series bold
\emph on
kazaam-sitetpl
\series default
/
\series bold
new-module
\series default
/local/incs/new-module.conf.php 
\emph default
.
\end_layout

\begin_layout Subsubsection
Contents of new-module.conf.php
\end_layout

\begin_layout Standard
For each new module that you create with 
\emph on
create-new-module.xml
\emph default
 , or 
\emph on
create-new-ext-module.xml
\emph default
 , a module configuration file is also created based on this pattern.
\end_layout

\begin_layout Standard

\lyxline

\end_layout

\begin_layout LyX-Code

\family roman
\series bold
new-module.conf.php
\family default
\series default

\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset


\series bold
01 <?php // new-module module config file.
\end_layout

\begin_layout LyX-Code

\series bold
02 
\end_layout

\begin_layout LyX-Code

\series bold
03 // include this file at the top of each page
\end_layout

\begin_layout LyX-Code

\series bold
04 // after the main site-config.php file.
\end_layout

\begin_layout LyX-Code

\series bold
05 
\end_layout

\begin_layout LyX-Code

\series bold
06 /* ---------------------------------------------- */
\end_layout

\begin_layout LyX-Code

\series bold
07 
\end_layout

\begin_layout LyX-Code

\series bold
08 // this global variable sets the <title> for this module
\end_layout

\begin_layout LyX-Code

\series bold
09 $MODULE_NAME = "$sitename - New Module";
\end_layout

\begin_layout LyX-Code

\series bold
10 
\end_layout

\begin_layout LyX-Code

\series bold
11 // each website has a database corresponding to the same
\end_layout

\begin_layout LyX-Code

\series bold
12 // name as the website
\end_layout

\begin_layout LyX-Code

\series bold
13 
\end_layout

\begin_layout LyX-Code

\series bold
14 // Mysql login details for this module
\end_layout

\begin_layout LyX-Code

\series bold
15 $username = 'mysql-username'; // username for this module
\end_layout

\begin_layout LyX-Code

\series bold
16 $password = 'mysql-password'; // password for this module
\end_layout

\begin_layout LyX-Code

\series bold
17 
\end_layout

\begin_layout LyX-Code

\series bold
18 // $hostname is set for each website in user.conf.php
\end_layout

\begin_layout LyX-Code

\series bold
19 // $dbname is set for each website in user.conf.php
\end_layout

\begin_layout LyX-Code

\series bold
20 
\end_layout

\begin_layout LyX-Code

\series bold
21 /* ---------------------------------------------- */
\end_layout

\begin_layout LyX-Code

\series bold
22 
\end_layout

\begin_layout LyX-Code

\series bold
23 ?>
\series default

\begin_inset Newline newline
\end_inset


\begin_inset VSpace defskip
\end_inset


\family roman
As a module's configuration file has the highest precedence
\begin_inset Newline newline
\end_inset

(apart from individual pages), each module may connect to a
\begin_inset Newline newline
\end_inset

different database by overriding the 
\emph on
$dbname
\emph default
 variable here,
\begin_inset Newline newline
\end_inset

with a new database name (which is initially set in
\begin_inset Newline newline
\end_inset


\series bold
\emph on
website-name
\series default
/shared/incs/user.conf.php ).
\end_layout

\begin_layout LyX-Code

\end_layout

\begin_layout Standard

\lyxline

\end_layout

\begin_layout Subsubsection
Variables inside new-module.conf.php
\end_layout

\begin_layout Description
line
\begin_inset space ~
\end_inset

09 $MODULE_NAME = "$sitename - New Module";
\begin_inset Newline newline
\end_inset

sets the string value to be echoed in the <
\series bold
title
\series default
> tag for each page in this module.
 This applies to all pages belonging to this module that use this configuration
 file.
 $MODULE_NAME can also be modified in each page 
\begin_inset space ~
\end_inset

-
\begin_inset space ~
\end_inset

 either appended to, or completely overwritten.
 This value is initially set when you use the PHING scripts 
\emph on
create-new-module.xml
\emph default
, or 
\emph on
create-new-ext-module.xml
\emph default
 .
\end_layout

\begin_layout Description
line
\begin_inset space ~
\end_inset

15 $username = 'mysql-username';
\begin_inset Newline newline
\end_inset

the mysql username this module uses to connect to the mysql database.
\end_layout

\begin_layout Description
line
\begin_inset space ~
\end_inset

16 $password = 'mysql-password';
\begin_inset Newline newline
\end_inset

the mysql password this module uses to connect to the mysql database.
\begin_inset Newpage pagebreak
\end_inset


\end_layout

\begin_layout Description
** 
\series bold
up to here **
\end_layout

\begin_layout Section
The PHING build scripts
\end_layout

\begin_layout Subsection
Chapter Overview
\end_layout

\begin_layout Standard
PHING scripts are used by Kazaam to create new websites, new modules for
 websites, and to copy a website from the 
\emph on
develop
\emph default
 to 
\emph on
intermediate, 
\emph default
and 
\emph on
intermediate 
\emph default
to 
\emph on
live,
\emph default
 code branches.
 Understanding how these scripts work will be helpfull when you use them
 in the next chapter.
 
\end_layout

\begin_layout Subsection
create-new-website.xml
\end_layout

\begin_layout Standard
\begin_inset Box Frameless
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
status collapsed

\begin_layout LyX-Code

\series bold
develop
\end_layout

\begin_layout LyX-Code

\series bold
├── karsites
\end_layout

\begin_layout LyX-Code

\series bold
├── kazaam-sitetpl   <- website-template
\end_layout

\begin_layout LyX-Code

\series bold
├── php-debuggers
\end_layout

\begin_layout LyX-Code

\series bold
├── raised-from-the-dead
\end_layout

\begin_layout LyX-Code

\series bold
└── create-new-website.xml
\end_layout

\end_inset


\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

The create-new-website.xml script lives in the 
\emph on
develop
\emph default
 directory of the Kazaam framework, and is used to create a new website
 in the Kazaam framework.
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

It prompts for the name of the new website, and copies the 
\emph on
kazaam-sitetpl
\emph default
 website-template directory, to a new website directory in the 
\emph on
develop
\emph default
 code branch.
 After copying the 
\emph on
kazaam-sitetpl
\emph default
 template to a new directory, various regular-expression string transformations
 are done on the newly created website's code.
 This customises the new website's code, for this particular website.
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

It then sets up the 
\emph on
domain.conf.php
\emph default
 files for this website in the 
\emph on
intermediate
\emph default
 and 
\emph on
live
\emph default
 code branches.
\end_layout

\begin_layout Subsubsection
Structure of create-new-website.xml
\end_layout

\begin_layout Standard
Here we take a look at the create-new-website.xml script.
\end_layout

\begin_layout Standard

\lyxline

\end_layout

\begin_layout LyX-Code

\family roman
\series bold
create-new-website.xml
\family default

\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

01 <?xml version="1.0" ?>
\end_layout

\begin_layout LyX-Code

\series bold
02 
\end_layout

\begin_layout LyX-Code

\series bold
03 <!--
\end_layout

\begin_layout LyX-Code

\series bold
04 
\end_layout

\begin_layout LyX-Code

\series bold
05 Phing script to create a new website,
\end_layout

\begin_layout LyX-Code

\series bold
06 by copying the kazaam-sitetpl website template,
\end_layout

\begin_layout LyX-Code

\series bold
07 to a new directory in the develop code branch.
\end_layout

\begin_layout LyX-Code

\series bold
08 
\end_layout

\begin_layout LyX-Code

\series bold
09 to run it use:
\end_layout

\begin_layout LyX-Code

\series bold
10 
\end_layout

\begin_layout LyX-Code

\series bold
11 # phing -f create-new-website.xml
\end_layout

\begin_layout LyX-Code

\series bold
12 
\end_layout

\begin_layout LyX-Code

\series bold
13 in the CWD of the above script (the develop code branch).
\end_layout

\begin_layout LyX-Code

\series bold
14 
\end_layout

\begin_layout LyX-Code

\series bold
15 Tell phing the name of the new website you want to create,
\end_layout

\begin_layout LyX-Code

\series bold
16 and phing will do it for you.
\end_layout

\begin_layout LyX-Code

\series bold
17 
\end_layout

\begin_layout LyX-Code

\series bold
18 -->
\end_layout

\begin_layout LyX-Code

\series bold
19 
\end_layout

\begin_layout LyX-Code

\series bold
20 <project name="Create new website"
\end_layout

\begin_layout LyX-Code

\series bold
21          default="finished" basedir=".">
\end_layout

\begin_layout LyX-Code

\series bold
22 
\end_layout

\begin_layout LyX-Code

\series bold
23 <target name="t1">
\end_layout

\begin_layout LyX-Code

\series bold
24   <echo></echo>
\end_layout

\begin_layout LyX-Code

\series bold
25   <input propertyname="websiteName">
\end_layout

\begin_layout LyX-Code

\series bold
26 Please enter name of new website:</input>
\end_layout

\begin_layout LyX-Code

\series bold
27   <echo>Creating new kazaam '${websiteName}' website</echo>
\end_layout

\begin_layout LyX-Code

\series bold
28 </target>
\end_layout

\begin_layout LyX-Code

\series bold
29 
\end_layout

\begin_layout LyX-Code

\series bold
30 
\end_layout

\begin_layout LyX-Code

\series bold
31 <!-- copy 'kazaam-sitetpl' website template
\end_layout

\begin_layout LyX-Code

\series bold
32      to the ${websiteName} directory -->
\end_layout

\begin_layout LyX-Code

\series bold
33 <target name="t2" depends="t1">
\end_layout

\begin_layout LyX-Code

\series bold
34 
\end_layout

\begin_layout LyX-Code

\series bold
35   <echo msg="Copying kazaam-sitetpl website template
\end_layout

\begin_layout LyX-Code

\series bold
36 to new '${websiteName}' website directory..." />
\end_layout

\begin_layout LyX-Code

\series bold
37 
\end_layout

\begin_layout LyX-Code

\series bold
38   <echo msg="" />
\end_layout

\begin_layout LyX-Code

\series bold
39   <echo msg="Please wait.
 This could take some time..." />
\end_layout

\begin_layout LyX-Code

\series bold
40   <echo msg="" />
\end_layout

\begin_layout LyX-Code

\series bold
41 
\end_layout

\begin_layout LyX-Code

\series bold
42   <copy todir="${websiteName}">
\end_layout

\begin_layout LyX-Code

\series bold
43     <!-- Fileset for all files to be copied -->
\end_layout

\begin_layout LyX-Code

\series bold
44     <fileset dir="kazaam-sitetpl">
\end_layout

\begin_layout LyX-Code

\series bold
45       <include name="**/*" />
\end_layout

\begin_layout LyX-Code

\series bold
46       <!-- exclude name="**/about.*" /-->
\end_layout

\begin_layout LyX-Code

\series bold
47     </fileset>
\end_layout

\begin_layout LyX-Code

\series bold
48   </copy>
\end_layout

\begin_layout LyX-Code

\series bold
49 </target>
\end_layout

\begin_layout LyX-Code

\series bold
50
\end_layout

\begin_layout LyX-Code

\series bold
51 
\end_layout

\begin_layout LyX-Code

\series bold
52 <!-- change text strings in all files in newly created
\end_layout

\begin_layout LyX-Code

\series bold
53     ${websiteName} directory to work with this
\end_layout

\begin_layout LyX-Code

\series bold
54      new website directory -->
\end_layout

\begin_layout LyX-Code

\series bold
55 <target name="t3" depends="t2">
\end_layout

\begin_layout LyX-Code

\series bold
56   <echo msg="replacing 'kazaam-sitetpl' text with
\begin_inset Newline newline
\end_inset

57 '${websiteName}'" />
\end_layout

\begin_layout LyX-Code

\series bold
58
\end_layout

\begin_layout LyX-Code

\series bold
59   <reflexive>
\end_layout

\begin_layout LyX-Code

\series bold
60     <fileset dir="${websiteName}">
\end_layout

\begin_layout LyX-Code

\series bold
61       <include name="**/*" />
\end_layout

\begin_layout LyX-Code

\series bold
62     </fileset>
\begin_inset Newline newline
\end_inset

63
\end_layout

\begin_layout LyX-Code

\series bold
64     <filterchain>
\end_layout

\begin_layout LyX-Code

\series bold
65       <replaceregexp>
\end_layout

\begin_layout LyX-Code

\series bold
66         <regexp pattern="kazaam-sitetpl"
\begin_inset Newline newline
\end_inset

67                 replace="${websiteName}" />
\end_layout

\begin_layout LyX-Code

\series bold
68       </replaceregexp>
\end_layout

\begin_layout LyX-Code

\series bold
69     </filterchain>
\end_layout

\begin_layout LyX-Code

\series bold
70 
\end_layout

\begin_layout LyX-Code

\series bold
71   </reflexive>
\end_layout

\begin_layout LyX-Code

\series bold
72 
\end_layout

\begin_layout LyX-Code

\series bold
73 </target>
\end_layout

\begin_layout LyX-Code

\series bold
74
\end_layout

\begin_layout LyX-Code

\series bold
75 
\end_layout

\begin_layout LyX-Code

\series bold
76 <target name="t4" depends="t3">
\end_layout

\begin_layout LyX-Code

\series bold
77   <echo msg="New kazaam website '${websiteName}' created OK!" />
\end_layout

\begin_layout LyX-Code

\series bold
78 </target>
\end_layout

\begin_layout LyX-Code

\series bold
79
\end_layout

\begin_layout LyX-Code

\series bold
80
\end_layout

\begin_layout LyX-Code

\series bold
81 <!-- initialise intermediate directory 
\end_layout

\begin_layout LyX-Code

\series bold
82      with domain.conf.php files -->
\end_layout

\begin_layout LyX-Code

\series bold
83 
\end_layout

\begin_layout LyX-Code

\series bold
84 <!-- copy '${websiteName}/shared/incs/domain.conf.php
\end_layout

\begin_layout LyX-Code

\series bold
85      files to intermediate/${websiteName}/shared/incs/
\end_layout

\begin_layout LyX-Code

\series bold
86      directory -->
\end_layout

\begin_layout LyX-Code

\series bold
87 
\end_layout

\begin_layout LyX-Code

\series bold
88 <target name="t5" depends="t4">
\end_layout

\begin_layout LyX-Code

\series bold
89   <echo msg="Copying domain.conf.php files to new
\begin_inset Newline newline
\end_inset

90 'intermediate/${websiteName}/shared/incs/' directory..." />
\end_layout

\begin_layout LyX-Code

\series bold
91
\end_layout

\begin_layout LyX-Code

\series bold
92   <copy todir="../intermediate/${websiteName}/shared/incs/">
\end_layout

\begin_layout LyX-Code

\series bold
93     <!-- Fileset for all files to be copied -->
\end_layout

\begin_layout LyX-Code

\series bold
94     <fileset dir="./${websiteName}/shared/incs/">
\end_layout

\begin_layout LyX-Code

\series bold
95       <include name="**/domain.conf.php*" />
\end_layout

\begin_layout LyX-Code

\series bold
96       <!-- exclude name="**/about.*" /-->
\end_layout

\begin_layout LyX-Code

\series bold
97     </fileset>
\end_layout

\begin_layout LyX-Code

\series bold
98   </copy>
\end_layout

\begin_layout LyX-Code

\series bold
99 </target>
\end_layout

\begin_layout LyX-Code

\series bold
100
\end_layout

\begin_layout LyX-Code

\series bold
101 
\end_layout

\begin_layout LyX-Code

\series bold
102 <!-- change text strings in domain.conf.php files
\end_layout

\begin_layout LyX-Code

\series bold
103      in newly created ${websiteName} directory,
\end_layout

\begin_layout LyX-Code

\series bold
104      to work with this new website -->
\end_layout

\begin_layout LyX-Code

\series bold
105 
\end_layout

\begin_layout LyX-Code

\series bold
106 <target name="t6" depends="t5">
\end_layout

\begin_layout LyX-Code

\series bold
107   <echo msg="replacing 'develop' text with 'intermediate'" />
\end_layout

\begin_layout LyX-Code

\series bold
108   <echo msg="replacing 'DEVELOPMENT' text with 'INTERMEDIATE'" />
\end_layout

\begin_layout LyX-Code

\series bold
109 
\end_layout

\begin_layout LyX-Code

\series bold
110   <reflexive>
\end_layout

\begin_layout LyX-Code

\series bold
111     <fileset dir="../intermediate/${websiteName}/shared/incs/">
\end_layout

\begin_layout LyX-Code

\series bold
112       <include name="**/domain.conf.php*" />
\end_layout

\begin_layout LyX-Code

\series bold
113     </fileset>
\end_layout

\begin_layout LyX-Code

\series bold
114 
\end_layout

\begin_layout LyX-Code

\series bold
115     <filterchain>
\end_layout

\begin_layout LyX-Code

\series bold
116       <replaceregexp>
\end_layout

\begin_layout LyX-Code

\series bold
117         <regexp pattern="develop
\backslash
/${websiteName}"
\end_layout

\begin_layout LyX-Code

\series bold
118                 replace="intermediate/${websiteName}" />
\end_layout

\begin_layout LyX-Code

\series bold
119         <regexp pattern="DEVELOPMENT" replace="INTERMEDIATE" />
\end_layout

\begin_layout LyX-Code

\series bold
120       </replaceregexp>
\end_layout

\begin_layout LyX-Code

\series bold
121     </filterchain>
\end_layout

\begin_layout LyX-Code

\series bold
122 
\end_layout

\begin_layout LyX-Code

\series bold
123 </reflexive>
\end_layout

\begin_layout LyX-Code

\series bold
124
\end_layout

\begin_layout LyX-Code

\series bold
125 </target>
\end_layout

\begin_layout LyX-Code

\series bold
126
\end_layout

\begin_layout LyX-Code

\series bold
127 
\end_layout

\begin_layout LyX-Code

\series bold
128 <!-- initialise live directory
\end_layout

\begin_layout LyX-Code

\series bold
129      with domain.conf.php files -->
\end_layout

\begin_layout LyX-Code

\series bold
130 
\end_layout

\begin_layout LyX-Code

\series bold
131 <!-- copy '${websiteName}/shared/incs/domain.conf.php
\end_layout

\begin_layout LyX-Code

\series bold
132      files to live/${websiteName}/shared/incs/
\end_layout

\begin_layout LyX-Code

\series bold
133      directory -->
\end_layout

\begin_layout LyX-Code

\series bold
134
\end_layout

\begin_layout LyX-Code

\series bold
135 <target name="t7" depends="t6">
\end_layout

\begin_layout LyX-Code

\series bold
136   <echo msg="Copying domain.conf.php files to new
\begin_inset Newline newline
\end_inset

137 'live/${websiteName}/shared/incs/' directory..." />
\end_layout

\begin_layout LyX-Code

\series bold
138 
\end_layout

\begin_layout LyX-Code

\series bold
139   <copy todir="../live/${websiteName}/shared/incs/">
\end_layout

\begin_layout LyX-Code

\series bold
140     <!-- Fileset for all files to be copied -->
\end_layout

\begin_layout LyX-Code

\series bold
141     <fileset dir="./${websiteName}/shared/incs/">
\end_layout

\begin_layout LyX-Code

\series bold
142       <include name="**/domain.conf.php*" />
\end_layout

\begin_layout LyX-Code

\series bold
143       <!-- exclude name="**/about.*" /-->
\end_layout

\begin_layout LyX-Code

\series bold
144     </fileset>
\end_layout

\begin_layout LyX-Code

\series bold
145   </copy>
\end_layout

\begin_layout LyX-Code

\series bold
146 </target>
\end_layout

\begin_layout LyX-Code

\series bold
147
\end_layout

\begin_layout LyX-Code

\series bold
148
\end_layout

\begin_layout LyX-Code

\series bold
149 <!-- change text strings in domain.conf.php files
\end_layout

\begin_layout LyX-Code

\series bold
150      in newly created ${websiteName} directory,
\end_layout

\begin_layout LyX-Code

\series bold
151      to work with this new website -->
\end_layout

\begin_layout LyX-Code

\series bold
152 
\end_layout

\begin_layout LyX-Code

\series bold
153 <target name="t8" depends="t7">
\end_layout

\begin_layout LyX-Code

\series bold
154   <echo msg="replacing 'develop' text with 'live'" />
\end_layout

\begin_layout LyX-Code

\series bold
155   <echo msg="replacing 'DEVELOPMENT' text with 'LIVE'" />
\end_layout

\begin_layout LyX-Code

\series bold
156
\end_layout

\begin_layout LyX-Code

\series bold
157   <reflexive>
\end_layout

\begin_layout LyX-Code

\series bold
158     <fileset dir="../live/${websiteName}/shared/incs/">
\end_layout

\begin_layout LyX-Code

\series bold
159       <include name="**/domain.conf.php*" />
\end_layout

\begin_layout LyX-Code

\series bold
160     </fileset>
\end_layout

\begin_layout LyX-Code

\series bold
161 
\end_layout

\begin_layout LyX-Code

\series bold
162     <filterchain>
\end_layout

\begin_layout LyX-Code

\series bold
163       <replaceregexp>
\end_layout

\begin_layout LyX-Code

\series bold
164         <regexp pattern="develop
\backslash
/${websiteName}"
\end_layout

\begin_layout LyX-Code

\series bold
165                 replace="live/${websiteName}" />
\end_layout

\begin_layout LyX-Code

\series bold
166         <regexp pattern="DEVELOPMENT" replace="LIVE" />
\end_layout

\begin_layout LyX-Code

\series bold
167       </replaceregexp>
\end_layout

\begin_layout LyX-Code

\series bold
168     </filterchain>
\end_layout

\begin_layout LyX-Code

\series bold
169
\end_layout

\begin_layout LyX-Code

\series bold
170   </reflexive>
\end_layout

\begin_layout LyX-Code

\series bold
171
\end_layout

\begin_layout LyX-Code

\series bold
172 </target>
\end_layout

\begin_layout LyX-Code

\series bold
173
\end_layout

\begin_layout LyX-Code

\series bold
174
\end_layout

\begin_layout LyX-Code

\series bold
175 <target name="finished" depends="t8">
\end_layout

\begin_layout LyX-Code

\series bold
176   <echo msg="New kazaam website '${websiteName}' created OK!" />
\end_layout

\begin_layout LyX-Code

\series bold
177 
\end_layout

\begin_layout LyX-Code

\series bold
178   <echo msg="intermediate directory for new kazaam website
\end_layout

\begin_layout LyX-Code

\series bold
179 '${websiteName}' created OK!" />
\end_layout

\begin_layout LyX-Code

\series bold
180 
\end_layout

\begin_layout LyX-Code

\series bold
181   <echo msg="live directory for new kazaam website
\end_layout

\begin_layout LyX-Code

\series bold
182 '${websiteName}' created OK!" />
\end_layout

\begin_layout LyX-Code

\series bold
183 </target>
\end_layout

\begin_layout LyX-Code

\series bold
184 
\end_layout

\begin_layout LyX-Code

\series bold
185 </project>
\end_layout

\begin_layout Standard

\lyxline

\end_layout

\begin_layout Subsubsection
How create-new-website.xml works
\end_layout

\begin_layout Standard
Here we look at some important lines of code in this script.
\end_layout

\begin_layout Description
line
\begin_inset space ~
\end_inset

01 declares the document type as xml version one.
\end_layout

\begin_layout Description
lines
\begin_inset space ~
\end_inset

03
\begin_inset space ~
\end_inset

-
\begin_inset space ~
\end_inset

18 are comments about the script's usage.
\end_layout

\begin_layout Description
lines
\begin_inset space ~
\end_inset

20
\begin_inset space ~
\end_inset

-
\begin_inset space ~
\end_inset

21 the start of the PHING script.
\end_layout

\begin_layout Description
lines
\begin_inset space ~
\end_inset

23
\begin_inset space ~
\end_inset

-
\begin_inset space ~
\end_inset

28 target 
\series bold
\emph on
t1 
\series default
\emph default
is the first target in the script.
 It asks for the name of the new website you want to create.
 This value is stored in the PHING variable 
\emph on
${websiteName}.
\end_layout

\begin_layout Description
lines
\begin_inset space ~
\end_inset

33
\begin_inset space ~
\end_inset

-
\begin_inset space ~
\end_inset

49 target 
\series bold
\emph on
t2
\series default
\emph default
 copies the 
\emph on
kazaam-sitetpl
\emph default
 website template directory in the 
\emph on
develop 
\emph default
code branch, to the name of the new website directory specified in 
\emph on
${websiteName}.
 
\emph default
New websites are only created in the 
\emph on
develop
\emph default
 directory.
\end_layout

\begin_layout Description
lines
\begin_inset space ~
\end_inset

55
\begin_inset space ~
\end_inset

-
\begin_inset space ~
\end_inset

73 target 
\series bold
\emph on
t3 
\series default
\emph default
performs a regular expression find and replace on all files in the new website.
 Any strings found that are equal to 'kazaam-sitetpl' will be replaced with
 whatever value is in 
\emph on
${websiteName}.
\end_layout

\begin_layout Description
lines
\begin_inset space ~
\end_inset

76
\begin_inset space ~
\end_inset

-
\begin_inset space ~
\end_inset

78 target 
\series bold
\emph on
t4 
\series default
\emph default
outputs the message: 
\begin_inset Quotes eld
\end_inset

New kazaam website 
\emph on
${websiteName}
\emph default
 created OK!" 
\end_layout

\begin_layout Description
lines
\begin_inset space ~
\end_inset

88
\begin_inset space ~
\end_inset

-
\begin_inset space ~
\end_inset

99 target 
\series bold
\emph on
t5 
\series default
\emph default
copies the domain.conf.php file(s) from the newly created website (in /develop/
\emph on
${websiteName}
\emph default
/shared/incs/
\emph on
,)
\begin_inset Newline newline
\end_inset


\emph default
to /intermediate/
\emph on
${websiteName}
\emph default
/shared/incs/
\emph on
 .
 
\emph default
It also creates the 
\emph on
${websiteName}
\emph default
/shared/incs/ directories in the 
\emph on
intermediate
\emph default
 directory first, before copying the files.
\end_layout

\begin_layout Description
lines
\begin_inset space ~
\end_inset

106
\begin_inset space ~
\end_inset

-
\begin_inset space ~
\end_inset

125 target 
\series bold
\emph on
t6 
\series default
\emph default
performs a regular expression find-and-replace on the domain.conf.php files
 copied to /intermediate/
\emph on
${websiteName}
\emph default
/shared/incs/ .
 This changes the 
\series bold
$WEBSITE_ROOT 
\series default
path variable to point to the 
\emph on
intermediate
\emph default
 code branch.
 It also changes the 
\emph on
$sitename
\series bold
 
\series default
\emph default
variable
\series bold
\emph on
 
\series default
\emph default
from 'DEVELOPMENT' to 'INTERMEDIATE'.
 This string is shown as part of the <
\series bold
title
\series default
> tag for each page in a website, and helps identify what code branch you
 are in.
\end_layout

\begin_layout Description
lines
\begin_inset space ~
\end_inset

135
\begin_inset space ~
\end_inset

-
\begin_inset space ~
\end_inset

146 target 
\series bold
\emph on
t7 
\series default
\emph default
copies the domain.conf.php file(s) from the newly created website (in /develop/
\emph on
${websiteName}
\emph default
/shared/incs/
\emph on
,)
\begin_inset Newline newline
\end_inset


\emph default
to /live/
\emph on
${websiteName}
\emph default
/shared/incs/
\emph on
 .
 
\emph default
It also creates the
\begin_inset Newline newline
\end_inset


\emph on
${websiteName}
\emph default
/shared/incs/ directories in the 
\emph on
live
\emph default
 directory first,
\begin_inset Newline newline
\end_inset

before copying the files.
\end_layout

\begin_layout Description
lines
\begin_inset space ~
\end_inset

153
\begin_inset space ~
\end_inset

-
\begin_inset space ~
\end_inset

172 target 
\series bold
\emph on
t8 
\series default
\emph default
performs a regular expression find-and-replace on the domain.conf.php files
 copied to /live/
\emph on
${websiteName}
\emph default
/shared/incs/ .
 This changes the 
\series bold
$WEBSITE_ROOT 
\series default
path variable to point to the 
\emph on
live
\emph default
 code branch.
 It also changes the 
\emph on
$sitename
\series bold
 
\series default
\emph default
variable
\series bold
\emph on
 
\series default
\emph default
from
\begin_inset Newline newline
\end_inset

'DEVELOPMENT' to 'LIVE'.
 This string is shown as part of the <
\series bold
title
\series default
> tag for each page in a website, and helps identify what code branch you
 are in.
\end_layout

\begin_layout Description
lines
\begin_inset space ~
\end_inset

175
\begin_inset space ~
\end_inset

-
\begin_inset space ~
\end_inset

183 target 
\series bold
\emph on
finished 
\series default
\emph default
outputs a message to say the website has been created OK, and that the 
\emph on
intermediate
\emph default
 and 
\emph on
live
\emph default
 code branch directories have been created and populated with their respective
 copies of the domain.conf.php files for this particular website.
\end_layout

\begin_layout Standard

\lyxline

\end_layout

\begin_layout Standard

\series bold
\begin_inset VSpace defskip
\end_inset


\end_layout

\begin_layout Subsection
Other PHING Scripts 
\end_layout

\begin_layout Standard
The other PHING scripts are inside a 
\series bold
\emph on
website's
\series default
\emph default
 directory, in the 
\emph on
develop
\emph default
 code branch.
 Each website in the 
\emph on
develop
\emph default
 code branch has it's own set of PHING scripts, customised to work with
 that particular website.
 These customisations to a website's PHING scripts are done when the website
 is first created using 
\series bold
create-new-website.xml
\series default
 .
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

Using the 
\emph on
kazaam-sitetpl
\emph default
 website template as an example, here is the directory structure showing
 the PHING scripts it contains:
\end_layout

\begin_layout Standard
\begin_inset Box Frameless
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
status open

\begin_layout LyX-Code

\series bold
develop
\end_layout

\begin_layout LyX-Code

\series bold
└── kazaam-sitetpl
\end_layout

\begin_layout LyX-Code

\series bold
    ├── fedora-services
\end_layout

\begin_layout LyX-Code

\series bold
    ├── home
\end_layout

\begin_layout LyX-Code

\series bold
    ├── module-example1
\end_layout

\begin_layout LyX-Code

\series bold
    ├── module-example2
\end_layout

\begin_layout LyX-Code

\series bold
    ├── module-example3
\end_layout

\begin_layout LyX-Code

\series bold
    ├── new-ext-module
\end_layout

\begin_layout LyX-Code

\series bold
    ├── new-module
\end_layout

\begin_layout LyX-Code

\series bold
    ├── shared
\end_layout

\begin_layout LyX-Code

\series bold
    ├── shared-host
\end_layout

\begin_layout LyX-Code

\series bold
    ├── tmp-backups
\end_layout

\begin_layout LyX-Code

\series bold
    ├── website-docs
\end_layout

\begin_layout LyX-Code

\series bold
    ├── create-new-ext-module.xml ─┐
\end_layout

\begin_layout LyX-Code

\series bold
    ├── create-new-module.xml      │  
\end_layout

\begin_layout LyX-Code

\series bold
    ├── int-build.xml              ├ phing scripts
\end_layout

\begin_layout LyX-Code

\series bold
    ├── int-delete.xml             │
\end_layout

\begin_layout LyX-Code

\series bold
    ├── live-build.xml             │
\end_layout

\begin_layout LyX-Code

\series bold
    ├── live-delete.xml ───────────┘
\end_layout

\begin_layout LyX-Code

\series bold
    └── robots.txt
\end_layout

\end_inset


\end_layout

\begin_layout Subsection
create-new-ext-module.xml
\end_layout

\begin_layout Standard
This script is used to create a new module for a website.
 This module's pages are designed to make it easy to convert an existing
 website's content, to work with the Kazaam framework.
 Normally you would just use 
\emph on
create-new-module.xml
\emph default
 when creating a new module with new content.
\end_layout

\begin_layout Subsubsection
Structure of create-new-ext-module.xml
\end_layout

\begin_layout Standard
Here we take a look at the create-new-ext-module.xml script.
\end_layout

\begin_layout Standard

\lyxline

\end_layout

\begin_layout LyX-Code

\family roman
\series bold
create-new-ext-module.xml
\family default

\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

01 <?xml version="1.0" ?>
\end_layout

\begin_layout LyX-Code

\series bold
02 
\end_layout

\begin_layout LyX-Code

\series bold
03 <!--
\end_layout

\begin_layout LyX-Code

\series bold
04 
\end_layout

\begin_layout LyX-Code

\series bold
05 Phing script to create a new website module,
\end_layout

\begin_layout LyX-Code

\series bold
06 with external body content, from kazaam's
\end_layout

\begin_layout LyX-Code

\series bold
07 'new-ext-module' (module template) directory.
\end_layout

\begin_layout LyX-Code

\series bold
08 
\end_layout

\begin_layout LyX-Code

\series bold
09 to run it use:
\end_layout

\begin_layout LyX-Code

\series bold
10 
\end_layout

\begin_layout LyX-Code

\series bold
11 # phing -f create-new-ext-module.xml
\end_layout

\begin_layout LyX-Code

\series bold
12 
\end_layout

\begin_layout LyX-Code

\series bold
13 in the CWD of the above script.
\end_layout

\begin_layout LyX-Code

\series bold
14 
\end_layout

\begin_layout LyX-Code

\series bold
15 Tell phing the name of the new module you want to create,
\end_layout

\begin_layout LyX-Code

\series bold
16 and phing will do it for you.
\end_layout

\begin_layout LyX-Code

\series bold
17 
\end_layout

\begin_layout LyX-Code

\series bold
18 -->
\end_layout

\begin_layout LyX-Code

\series bold
19 
\end_layout

\begin_layout LyX-Code

\series bold
20 <project name="Create new external-content website module"
\end_layout

\begin_layout LyX-Code

\series bold
21          default="meta-menu-created" basedir=".">
\end_layout

\begin_layout LyX-Code

\series bold
22 
\end_layout

\begin_layout LyX-Code

\series bold
23 <target name="get-module-name">
\end_layout

\begin_layout LyX-Code

\series bold
24   <input propertyname="moduleName">
\end_layout

\begin_layout LyX-Code

\series bold
25 Please enter new module name:</input>
\end_layout

\begin_layout LyX-Code

\series bold
26   <echo>Creating new kazaam '${moduleName}' module</echo>
\end_layout

\begin_layout LyX-Code

\series bold
27 </target>
\end_layout

\begin_layout LyX-Code

\series bold
28
\end_layout

\begin_layout LyX-Code

\series bold
29 
\end_layout

\begin_layout LyX-Code

\series bold
30 <!-- copy 'new-ext-module' template
\end_layout

\begin_layout LyX-Code

\series bold
31      to the ${moduleName} directory -->
\end_layout

\begin_layout LyX-Code

\series bold
32 <target name="copy-module-files"
\end_layout

\begin_layout LyX-Code

\series bold
33         depends="get-module-name">
\end_layout

\begin_layout LyX-Code

\series bold
34
\end_layout

\begin_layout LyX-Code

\series bold
35   <echo msg="Copying files to new '${moduleName}'
\end_layout

\begin_layout LyX-Code

\series bold
36 module directory..." />
\end_layout

\begin_layout LyX-Code

\series bold
37 
\end_layout

\begin_layout LyX-Code

\series bold
38   <copy todir="${moduleName}">
\end_layout

\begin_layout LyX-Code

\series bold
39     <!-- Fileset for all files to be copied -->
\end_layout

\begin_layout LyX-Code

\series bold
40     <fileset dir="new-ext-module">
\end_layout

\begin_layout LyX-Code

\series bold
41       <include name="**/*" />
\end_layout

\begin_layout LyX-Code

\series bold
42       <!-- exclude name="**/about.*" /-->
\end_layout

\begin_layout LyX-Code

\series bold
43     </fileset>
\end_layout

\begin_layout LyX-Code

\series bold
44   </copy>
\end_layout

\begin_layout LyX-Code

\series bold
45
\end_layout

\begin_layout LyX-Code

\series bold
46   <!-- ================================= -->
\end_layout

\begin_layout LyX-Code

\series bold
47
\end_layout

\begin_layout LyX-Code

\series bold
48   <!-- rename new-ext-module.php
\end_layout

\begin_layout LyX-Code

\series bold
49        to ${moduleName}.php -->
\end_layout

\begin_layout LyX-Code

\series bold
50   <property name="path1"
\end_layout

\begin_layout LyX-Code

\series bold
51             value="${moduleName}/anyuser" />
\end_layout

\begin_layout LyX-Code

\series bold
52
\end_layout

\begin_layout LyX-Code

\series bold
53   <move file="${path1}/new-ext-module.php"
\end_layout

\begin_layout LyX-Code

\series bold
54         tofile="${path1}/${moduleName}.php"
\end_layout

\begin_layout LyX-Code

\series bold
55         overwrite="true" />
\end_layout

\begin_layout LyX-Code

\series bold
56 
\end_layout

\begin_layout LyX-Code

\series bold
57   <move file="${path1}/new-ext-module.php.bak"
\end_layout

\begin_layout LyX-Code

\series bold
58         tofile="${path1}/${moduleName}.php.bak"
\end_layout

\begin_layout LyX-Code

\series bold
59         overwrite="true" />
\end_layout

\begin_layout LyX-Code

\series bold
60
\end_layout

\begin_layout LyX-Code

\series bold
61   <!-- rename backup directory filenames -->
\end_layout

\begin_layout LyX-Code

\series bold
62   <property name="path2"
\end_layout

\begin_layout LyX-Code

\series bold
63             value="${moduleName}/anyuser/tmp-backups" />
\end_layout

\begin_layout LyX-Code

\series bold
64
\end_layout

\begin_layout LyX-Code

\series bold
65   <move file="${path2}/new-ext-module.php"
\end_layout

\begin_layout LyX-Code

\series bold
66         tofile="${path2}/${moduleName}.php"
\end_layout

\begin_layout LyX-Code

\series bold
67         overwrite="true" />
\end_layout

\begin_layout LyX-Code

\series bold
68
\end_layout

\begin_layout LyX-Code

\series bold
69   <move file="${path2}/new-ext-module.php.bak"
\end_layout

\begin_layout LyX-Code

\series bold
70         tofile="${path2}/${moduleName}.php.bak"
\end_layout

\begin_layout LyX-Code

\series bold
71         overwrite="true" />
\end_layout

\begin_layout LyX-Code

\series bold
72
\end_layout

\begin_layout LyX-Code

\series bold
73   <!-- ================================= -->
\end_layout

\begin_layout LyX-Code

\series bold
74
\end_layout

\begin_layout LyX-Code

\series bold
75   <!-- rename new-ext-module.conf.php
\end_layout

\begin_layout LyX-Code

\series bold
76        to ${moduleName}.conf.php -->
\end_layout

\begin_layout LyX-Code

\series bold
77   <property name="path3"
\end_layout

\begin_layout LyX-Code

\series bold
78             value="${moduleName}/local/incs" />
\end_layout

\begin_layout LyX-Code

\series bold
79
\end_layout

\begin_layout LyX-Code

\series bold
80   <move file="${path3}/new-ext-module.conf.php"
\end_layout

\begin_layout LyX-Code

\series bold
81         tofile="${path3}/${moduleName}.conf.php"
\end_layout

\begin_layout LyX-Code

\series bold
82         overwrite="true" />
\end_layout

\begin_layout LyX-Code

\series bold
83
\end_layout

\begin_layout LyX-Code

\series bold
84   <move file="${path3}/new-ext-module.conf.php.bak"
\end_layout

\begin_layout LyX-Code

\series bold
85         tofile="${path3}/${moduleName}.conf.php.bak"
\end_layout

\begin_layout LyX-Code

\series bold
86         overwrite="true" />
\end_layout

\begin_layout LyX-Code

\series bold
87
\end_layout

\begin_layout LyX-Code

\series bold
88   <!-- rename backup directory filenames -->
\end_layout

\begin_layout LyX-Code

\series bold
89   <property name="path4"
\end_layout

\begin_layout LyX-Code

\series bold
90             value="${moduleName}/local/incs/tmp-backups" />
\end_layout

\begin_layout LyX-Code

\series bold
91
\end_layout

\begin_layout LyX-Code

\series bold
92   <move file="${path4}/new-ext-module.conf.php"
\end_layout

\begin_layout LyX-Code

\series bold
93         tofile="${path4}/${moduleName}.conf.php"
\end_layout

\begin_layout LyX-Code

\series bold
94         overwrite="true" />
\end_layout

\begin_layout LyX-Code

\series bold
95 
\end_layout

\begin_layout LyX-Code

\series bold
96   <move file="${path4}/new-ext-module.conf.php.bak"
\end_layout

\begin_layout LyX-Code

\series bold
97         tofile="${path4}/${moduleName}.conf.php.bak"
\end_layout

\begin_layout LyX-Code

\series bold
98         overwrite="true" />
\end_layout

\begin_layout LyX-Code

\series bold
99 
\end_layout

\begin_layout LyX-Code

\series bold
100   <!-- ================================= -->
\end_layout

\begin_layout LyX-Code

\series bold
101 
\end_layout

\begin_layout LyX-Code

\series bold
102   <!-- rename new-ext-module-menu.php
\end_layout

\begin_layout LyX-Code

\series bold
103        to ${moduleName}-menu.php -->
\end_layout

\begin_layout LyX-Code

\series bold
104   <property name="path5"
\end_layout

\begin_layout LyX-Code

\series bold
105             value="${moduleName}/local/incs/mod" />
\end_layout

\begin_layout LyX-Code

\series bold
106
\end_layout

\begin_layout LyX-Code

\series bold
107   <move file="${path5}/new-ext-module-menu.php"
\end_layout

\begin_layout LyX-Code

\series bold
108         tofile="${path5}/${moduleName}-menu.php"
\end_layout

\begin_layout LyX-Code

\series bold
109         overwrite="true" />
\end_layout

\begin_layout LyX-Code

\series bold
110
\end_layout

\begin_layout LyX-Code

\series bold
111   <move file="${path5}/new-ext-module-menu.php.bak"
\end_layout

\begin_layout LyX-Code

\series bold
112         tofile="${path5}/${moduleName}-menu.php.bak"
\end_layout

\begin_layout LyX-Code

\series bold
113         overwrite="true" />
\end_layout

\begin_layout LyX-Code

\series bold
114
\end_layout

\begin_layout LyX-Code

\series bold
115   <!-- rename backup directory filenames -->
\end_layout

\begin_layout LyX-Code

\series bold
116   <property name="path6"
\end_layout

\begin_layout LyX-Code

\series bold
117             value="${moduleName}/local/incs/mod/tmp-backups" />
\end_layout

\begin_layout LyX-Code

\series bold
118 
\end_layout

\begin_layout LyX-Code

\series bold
119   <move file="${path6}/new-ext-module-menu.php"
\end_layout

\begin_layout LyX-Code

\series bold
120         tofile="${path6}/${moduleName}-menu.php"
\end_layout

\begin_layout LyX-Code

\series bold
121         overwrite="true" />
\end_layout

\begin_layout LyX-Code

\series bold
122
\end_layout

\begin_layout LyX-Code

\series bold
123   <move file="${path6}/new-ext-module-menu.php.bak"
\end_layout

\begin_layout LyX-Code

\series bold
124         tofile="${path6}/${moduleName}-menu.php.bak"
\end_layout

\begin_layout LyX-Code

\series bold
125         overwrite="true" />
\end_layout

\begin_layout LyX-Code

\series bold
126
\end_layout

\begin_layout LyX-Code

\series bold
127   <!-- ================================= -->
\end_layout

\begin_layout LyX-Code

\series bold
128
\end_layout

\begin_layout LyX-Code

\series bold
129   <!-- rename new-ext-module-right-menu.php
\end_layout

\begin_layout LyX-Code

\series bold
130        to ${moduleName}-right-menu.php -->
\end_layout

\begin_layout LyX-Code

\series bold
131   <property name="path7"
\end_layout

\begin_layout LyX-Code

\series bold
132             value="${moduleName}/local/incs/mod" />
\end_layout

\begin_layout LyX-Code

\series bold
133
\end_layout

\begin_layout LyX-Code

\series bold
134   <move file="${path7}/new-ext-module-right-menu.php"
\end_layout

\begin_layout LyX-Code

\series bold
135         tofile="${path7}/${moduleName}-right-menu.php"
\end_layout

\begin_layout LyX-Code

\series bold
136         overwrite="true" />
\end_layout

\begin_layout LyX-Code

\series bold
137
\end_layout

\begin_layout LyX-Code

\series bold
138   <move file="${path7}/new-ext-module-right-menu.php.bak"
\end_layout

\begin_layout LyX-Code

\series bold
139         tofile="${path7}/${moduleName}-right-menu.php.bak"
\end_layout

\begin_layout LyX-Code

\series bold
140         overwrite="true" />
\end_layout

\begin_layout LyX-Code

\series bold
141
\end_layout

\begin_layout LyX-Code

\series bold
142   <!-- rename backup directory filenames -->
\end_layout

\begin_layout LyX-Code

\series bold
143   <property name="path8"
\end_layout

\begin_layout LyX-Code

\series bold
144             value="${moduleName}/local/incs/mod/tmp-backups" />
\end_layout

\begin_layout LyX-Code

\series bold
145
\end_layout

\begin_layout LyX-Code

\series bold
146   <move file="${path8}/new-ext-module-right-menu.php"
\end_layout

\begin_layout LyX-Code

\series bold
147         tofile="${path8}/${moduleName}-right-menu.php"
\end_layout

\begin_layout LyX-Code

\series bold
148         overwrite="true" />
\end_layout

\begin_layout LyX-Code

\series bold
149
\end_layout

\begin_layout LyX-Code

\series bold
150   <move file="${path8}/new-ext-module-right-menu.php.bak"
\end_layout

\begin_layout LyX-Code

\series bold
151         tofile="${path8}/${moduleName}-right-menu.php.bak"
\end_layout

\begin_layout LyX-Code

\series bold
152         overwrite="true" />
\end_layout

\begin_layout LyX-Code

\series bold
153
\end_layout

\begin_layout LyX-Code

\series bold
154   <!-- ================================= -->
\end_layout

\begin_layout LyX-Code

\series bold
155
\end_layout

\begin_layout LyX-Code

\series bold
156   <!-- rename new-ext-module.cont.php
\end_layout

\begin_layout LyX-Code

\series bold
157        to ${moduleName}.cont.php -->
\end_layout

\begin_layout LyX-Code

\series bold
158   <property name="path9"
\end_layout

\begin_layout LyX-Code

\series bold
159             value="${moduleName}/anyuser" />
\end_layout

\begin_layout LyX-Code

\series bold
160
\end_layout

\begin_layout LyX-Code

\series bold
161   <move file="${path9}/new-ext-module.cont.php"
\end_layout

\begin_layout LyX-Code

\series bold
162         tofile="${path9}/${moduleName}.cont.php"
\end_layout

\begin_layout LyX-Code

\series bold
163         overwrite="true" />
\end_layout

\begin_layout LyX-Code

\series bold
164
\end_layout

\begin_layout LyX-Code

\series bold
165   <move file="${path9}/new-ext-module.cont.php.bak"
\end_layout

\begin_layout LyX-Code

\series bold
166         tofile="${path9}/${moduleName}.cont.php.bak"
\end_layout

\begin_layout LyX-Code

\series bold
167         overwrite="true" />
\end_layout

\begin_layout LyX-Code

\series bold
168
\end_layout

\begin_layout LyX-Code

\series bold
169   <!-- rename backup directory filenames -->
\end_layout

\begin_layout LyX-Code

\series bold
170   <property name="path10"
\end_layout

\begin_layout LyX-Code

\series bold
171             value="${moduleName}/anyuser/tmp-backups" />
\end_layout

\begin_layout LyX-Code

\series bold
172
\end_layout

\begin_layout LyX-Code

\series bold
173   <move file="${path10}/new-ext-module.cont.php"
\end_layout

\begin_layout LyX-Code

\series bold
174         tofile="${path10}/${moduleName}.cont.php"
\end_layout

\begin_layout LyX-Code

\series bold
175         overwrite="true" />
\end_layout

\begin_layout LyX-Code

\series bold
176
\end_layout

\begin_layout LyX-Code

\series bold
177   <move file="${path10}/new-ext-module.cont.php.bak"
\end_layout

\begin_layout LyX-Code

\series bold
178         tofile="${path10}/${moduleName}.cont.php.bak"
\end_layout

\begin_layout LyX-Code

\series bold
179         overwrite="true" />
\end_layout

\begin_layout LyX-Code

\series bold
180
\end_layout

\begin_layout LyX-Code

\series bold
181   <!-- ================================= -->
\end_layout

\begin_layout LyX-Code

\series bold
182 
\end_layout

\begin_layout LyX-Code

\series bold
183 </target>
\end_layout

\begin_layout LyX-Code

\series bold
184
\end_layout

\begin_layout LyX-Code

\series bold
185
\end_layout

\begin_layout LyX-Code

\series bold
186 <!-- remove the new-ext-module* template files
\end_layout

\begin_layout LyX-Code

\series bold
187      from the newly created ${moduleName} module -->
\end_layout

\begin_layout LyX-Code

\series bold
188 <target name="clean-up" depends="copy-module-files">
\end_layout

\begin_layout LyX-Code

\series bold
189   <echo msg="Cleaning up unnecessary template files" />
\end_layout

\begin_layout LyX-Code

\series bold
190
\end_layout

\begin_layout LyX-Code

\series bold
191   <delete>
\end_layout

\begin_layout LyX-Code

\series bold
192     <!-- Fileset for all files to be deleted -->
\end_layout

\begin_layout LyX-Code

\series bold
193     <fileset dir="${moduleName}">
\end_layout

\begin_layout LyX-Code

\series bold
194       <include name="**/new-ext-module*" />
\end_layout

\begin_layout LyX-Code

\series bold
195       <include name="**/tmp-backups/new-ext-module*" />
\end_layout

\begin_layout LyX-Code

\series bold
196     </fileset>
\end_layout

\begin_layout LyX-Code

\series bold
197   </delete>
\end_layout

\begin_layout LyX-Code

\series bold
198
\end_layout

\begin_layout LyX-Code

\series bold
199 </target>
\end_layout

\begin_layout LyX-Code

\series bold
200
\end_layout

\begin_layout LyX-Code

\series bold
201
\end_layout

\begin_layout LyX-Code

\series bold
202 <!-- change text strings in all files in newly created
\end_layout

\begin_layout LyX-Code

\series bold
203      ${moduleName} directory to work with this
\end_layout

\begin_layout LyX-Code

\series bold
204      new module directory -->
\end_layout

\begin_layout LyX-Code

\series bold
205 <target name="replace-module-text" depends="clean-up">
\end_layout

\begin_layout LyX-Code

\series bold
206
\end_layout

\begin_layout LyX-Code

\series bold
207   <echo msg="replacing 'new-ext-module' text
\end_layout

\begin_layout LyX-Code

\series bold
208 with '${moduleName}'" />
\end_layout

\begin_layout LyX-Code

\series bold
209 
\end_layout

\begin_layout LyX-Code

\series bold
210   <echo msg="replacing 'New Ext Module' text
\end_layout

\begin_layout LyX-Code

\series bold
211 with '${moduleName}'" />
\end_layout

\begin_layout LyX-Code

\series bold
212 
\end_layout

\begin_layout LyX-Code

\series bold
213   <reflexive>
\end_layout

\begin_layout LyX-Code

\series bold
214     <fileset dir="${moduleName}">
\end_layout

\begin_layout LyX-Code

\series bold
215       <include name="**/*" />
\end_layout

\begin_layout LyX-Code

\series bold
216     </fileset>
\end_layout

\begin_layout LyX-Code

\series bold
217
\end_layout

\begin_layout LyX-Code

\series bold
218     <filterchain>
\end_layout

\begin_layout LyX-Code

\series bold
219       <replaceregexp>
\end_layout

\begin_layout LyX-Code

\series bold
220         <regexp pattern="new-ext-module"
\end_layout

\begin_layout LyX-Code

\series bold
221                 replace="${moduleName}" />
\end_layout

\begin_layout LyX-Code

\series bold
222
\end_layout

\begin_layout LyX-Code

\series bold
223         <regexp pattern="New Ext Module"
\end_layout

\begin_layout LyX-Code

\series bold
224                 replace="${moduleName}" />
\end_layout

\begin_layout LyX-Code

\series bold
225       </replaceregexp>
\end_layout

\begin_layout LyX-Code

\series bold
226     </filterchain>
\end_layout

\begin_layout LyX-Code

\series bold
227
\end_layout

\begin_layout LyX-Code

\series bold
228   </reflexive>
\end_layout

\begin_layout LyX-Code

\series bold
229
\end_layout

\begin_layout LyX-Code

\series bold
230 </target>
\end_layout

\begin_layout LyX-Code

\series bold
231
\end_layout

\begin_layout LyX-Code

\series bold
232
\end_layout

\begin_layout LyX-Code

\series bold
233 <target name="module-created"
\end_layout

\begin_layout LyX-Code

\series bold
234         depends="replace-module-text">
\end_layout

\begin_layout LyX-Code

\series bold
235   <echo msg="New kazaam module '${moduleName}' created OK!" />
\end_layout

\begin_layout LyX-Code

\series bold
236 </target>
\end_layout

\begin_layout LyX-Code

\series bold
237
\end_layout

\begin_layout LyX-Code

\series bold
238
\end_layout

\begin_layout LyX-Code

\series bold
239 <!-- create the meta-menu for the new module -->
\end_layout

\begin_layout LyX-Code

\series bold
240
\end_layout

\begin_layout LyX-Code

\series bold
241 <target name="create-ext-meta-menu"
\end_layout

\begin_layout LyX-Code

\series bold
242         depends="module-created">
\end_layout

\begin_layout LyX-Code

\series bold
243   <echo></echo>
\end_layout

\begin_layout LyX-Code

\series bold
244   <echo>Creating meta-menu for new kazaam
\end_layout

\begin_layout LyX-Code

\series bold
245 module '${moduleName}'</echo>
\end_layout

\begin_layout LyX-Code

\series bold
246 </target>
\end_layout

\begin_layout LyX-Code

\series bold
247
\end_layout

\begin_layout LyX-Code

\series bold
248
\end_layout

\begin_layout LyX-Code

\series bold
249 <target name="copy-meta-menu-files"
\end_layout

\begin_layout LyX-Code

\series bold
250         depends="create-ext-meta-menu">
\end_layout

\begin_layout LyX-Code

\series bold
251
\end_layout

\begin_layout LyX-Code

\series bold
252   <echo msg="Copying 'new-ext-module.php' (meta-menu
\end_layout

\begin_layout LyX-Code

\series bold
253 template files) to '${moduleName}.php'" />
\end_layout

\begin_layout LyX-Code

\series bold
254
\end_layout

\begin_layout LyX-Code

\series bold
255   <!-- copy './shared/meta-menus/new-ext-module.php'
\end_layout

\begin_layout LyX-Code

\series bold
256        meta-menu template file to '${moduleName}.php' -->
\end_layout

\begin_layout LyX-Code

\series bold
257   <property name="path11"
\end_layout

\begin_layout LyX-Code

\series bold
258             value="./shared/meta-menus" />
\end_layout

\begin_layout LyX-Code

\series bold
259
\end_layout

\begin_layout LyX-Code

\series bold
260   <copy file="${path11}/new-ext-module.php"
\end_layout

\begin_layout LyX-Code

\series bold
261         tofile="${path11}/${moduleName}.php"
\end_layout

\begin_layout LyX-Code

\series bold
262         overwrite="true"/>
\end_layout

\begin_layout LyX-Code

\series bold
263
\end_layout

\begin_layout LyX-Code

\series bold
264   <copy file="${path11}/new-ext-module.php.bak"
\end_layout

\begin_layout LyX-Code

\series bold
265         tofile="${path11}/${moduleName}.php.bak"
\end_layout

\begin_layout LyX-Code

\series bold
266         overwrite="true"/>
\end_layout

\begin_layout LyX-Code

\series bold
267
\end_layout

\begin_layout LyX-Code

\series bold
268   <!-- copy backup directory files -->
\end_layout

\begin_layout LyX-Code

\series bold
269   <property name="path12"
\end_layout

\begin_layout LyX-Code

\series bold
270             value="./shared/meta-menus/tmp-backups" />
\end_layout

\begin_layout LyX-Code

\series bold
271
\end_layout

\begin_layout LyX-Code

\series bold
272   <copy file="${path12}/new-ext-module.php"
\end_layout

\begin_layout LyX-Code

\series bold
273         tofile="${path12}/${moduleName}.php"
\end_layout

\begin_layout LyX-Code

\series bold
274         overwrite="true"/>
\end_layout

\begin_layout LyX-Code

\series bold
275
\end_layout

\begin_layout LyX-Code

\series bold
276   <copy file="${path12}/new-ext-module.php.bak"
\end_layout

\begin_layout LyX-Code

\series bold
277         tofile="${path12}/${moduleName}.php.bak"
\end_layout

\begin_layout LyX-Code

\series bold
278         overwrite="true"/>
\end_layout

\begin_layout LyX-Code

\series bold
279
\end_layout

\begin_layout LyX-Code

\series bold
280 </target>
\end_layout

\begin_layout LyX-Code

\series bold
281
\end_layout

\begin_layout LyX-Code

\series bold
282
\end_layout

\begin_layout LyX-Code

\series bold
283 <!-- tweak text strings in newly created
\end_layout

\begin_layout LyX-Code

\series bold
284      ${moduleName}.php files -->
\end_layout

\begin_layout LyX-Code

\series bold
285 <target name="replace-meta-menu-text"
\end_layout

\begin_layout LyX-Code

\series bold
286         depends="copy-meta-menu-files">
\end_layout

\begin_layout LyX-Code

\series bold
287
\end_layout

\begin_layout LyX-Code

\series bold
288   <echo msg="replacing 'new-ext-module' text
\end_layout

\begin_layout LyX-Code

\series bold
289 with '${moduleName}'" />
\end_layout

\begin_layout LyX-Code

\series bold
290
\end_layout

\begin_layout LyX-Code

\series bold
291   <echo msg="replacing 'New Ext Module' text
\end_layout

\begin_layout LyX-Code

\series bold
292 with '${moduleName}'" />
\end_layout

\begin_layout LyX-Code

\series bold
293
\end_layout

\begin_layout LyX-Code

\series bold
294   <reflexive>
\end_layout

\begin_layout LyX-Code

\series bold
295     <fileset dir="./shared/meta-menus/">
\end_layout

\begin_layout LyX-Code

\series bold
296       <include name="${moduleName}.*" />
\end_layout

\begin_layout LyX-Code

\series bold
297       <include name="**/tmp-backups/${moduleName}.*" />
\end_layout

\begin_layout LyX-Code

\series bold
298     </fileset>
\end_layout

\begin_layout LyX-Code

\series bold
299
\end_layout

\begin_layout LyX-Code

\series bold
300     <filterchain>
\end_layout

\begin_layout LyX-Code

\series bold
301       <replaceregexp>
\end_layout

\begin_layout LyX-Code

\series bold
302         <regexp pattern="new-ext-module"
\end_layout

\begin_layout LyX-Code

\series bold
303                 replace="${moduleName}" />
\end_layout

\begin_layout LyX-Code

\series bold
304
\end_layout

\begin_layout LyX-Code

\series bold
305         <regexp pattern="New Ext Module"
\end_layout

\begin_layout LyX-Code

\series bold
306                 replace="${moduleName}" />
\end_layout

\begin_layout LyX-Code

\series bold
307       </replaceregexp>
\end_layout

\begin_layout LyX-Code

\series bold
308     </filterchain>
\end_layout

\begin_layout LyX-Code

\series bold
309
\end_layout

\begin_layout LyX-Code

\series bold
310   </reflexive>
\end_layout

\begin_layout LyX-Code

\series bold
311
\end_layout

\begin_layout LyX-Code

\series bold
312 </target>
\end_layout

\begin_layout LyX-Code

\series bold
313
\end_layout

\begin_layout LyX-Code

\series bold
314
\end_layout

\begin_layout LyX-Code

\series bold
315 <target name="meta-menu-created"
\end_layout

\begin_layout LyX-Code

\series bold
316         depends="replace-meta-menu-text">
\end_layout

\begin_layout LyX-Code

\series bold
317   <echo msg="meta-menu for new kazaam module
\end_layout

\begin_layout LyX-Code

\series bold
318 '${moduleName}' created OK!" />
\end_layout

\begin_layout LyX-Code

\series bold
319 </target>
\end_layout

\begin_layout LyX-Code

\series bold
320
\end_layout

\begin_layout LyX-Code

\series bold
321 </project>
\end_layout

\begin_layout Standard

\lyxline

\end_layout

\begin_layout Subsubsection
How create-new-ext-module.xml works
\end_layout

\begin_layout Standard
Here we look at some important lines of code in this script.
\end_layout

\begin_layout Description
line
\begin_inset space ~
\end_inset

01 declares the document type as xml version one.
\end_layout

\begin_layout Description
lines
\begin_inset space ~
\end_inset

03
\begin_inset space ~
\end_inset

-
\begin_inset space ~
\end_inset

18 are comments about the script's usage.
\end_layout

\begin_layout Description
lines
\begin_inset space ~
\end_inset

20
\begin_inset space ~
\end_inset

-
\begin_inset space ~
\end_inset

21 This is the start of the PHING script.
\end_layout

\begin_layout Description
lines
\begin_inset space ~
\end_inset

23
\begin_inset space ~
\end_inset

-
\begin_inset space ~
\end_inset

27 target 
\series bold
\emph on
get-module-name
\series default
\emph default
 is the first target in the script.
 It asks for the name of the new module you want to create.
 This value is stored in the PHING variable 
\emph on
${moduleName}.
\end_layout

\begin_layout Description
lines
\begin_inset space ~
\end_inset

32
\begin_inset space ~
\end_inset

-
\begin_inset space ~
\end_inset

183 target 
\series bold
\emph on
copy-module-files
\series default
\emph default
 copies the 
\emph on
new-ext-module 
\emph default
module template directory to the name of the new module directory specified
 in 
\emph on
${moduleName}
\emph default
 .

\emph on
 
\emph default
New modules are only created in websites under the 
\emph on
develop
\emph default
 directory.
 Lines 48 - 180 change the names of certain files in the module to match
 the new module just created.
\end_layout

\begin_layout Description
lines
\begin_inset space ~
\end_inset

188
\begin_inset space ~
\end_inset

-
\begin_inset space ~
\end_inset

199 target 
\series bold
\emph on
clean-up
\series default
\emph default
 removes any unnecessary module template files from the newly created module.
\end_layout

\begin_layout Description
lines
\begin_inset space ~
\end_inset

205
\begin_inset space ~
\end_inset

-
\begin_inset space ~
\end_inset

230 target 
\series bold
\emph on
replace-module-text 
\series default
\emph default
performs a regular expression search-and-replace on the contents of all
 the files in the newly created module.
 It replaces any occurence of 'new-ext-module' or 'New Ext Module' with
 the value in 
\emph on
${moduleName} .
 
\end_layout

\begin_layout Description
lines
\begin_inset space ~
\end_inset

233
\begin_inset space ~
\end_inset

-
\begin_inset space ~
\end_inset

236 target 
\series bold
\emph on
module-created 
\series default
\emph default
outputs a message saying the new module has been created OK.
\end_layout

\begin_layout Description
lines
\begin_inset space ~
\end_inset

241
\begin_inset space ~
\end_inset

-
\begin_inset space ~
\end_inset

246 target 
\series bold
\emph on
create-ext-meta-menu 
\series default
\emph default
outputs a message saying a meta-menu is being created for the new module.
\end_layout

\begin_layout Description
lines
\begin_inset space ~
\end_inset

249
\begin_inset space ~
\end_inset

-
\begin_inset space ~
\end_inset

280 target 
\series bold
\emph on
copy-meta-menu-files 
\series default
\emph default
creates a 
\emph on
meta-menu
\emph default
 for this new module from the
\begin_inset Newline newline
\end_inset


\series bold
\emph on
website-name
\series default
/shared/meta-menus/
\emph default
new-ext-module.php meta-menu template.
 
\emph on
(A meta-menu 
\emph default
can be added to either the 
\emph on
homepage-menu.php, 
\emph default
or the
\emph on
 right-menu.php
\emph default
, both which live in:
\begin_inset Newline newline
\end_inset


\series bold
\emph on
website-name
\series default
/shared/incs/ .)
\end_layout

\begin_layout Description
lines
\begin_inset space ~
\end_inset

285
\begin_inset space ~
\end_inset

-
\begin_inset space ~
\end_inset

312 target 
\series bold
\emph on
replace-meta-menu-text 
\series default
\emph default
performs a regular expression search-and-replace on the contents of the
 newly created meta-menu files for this new module.
 It replaces any occurence of 'new-ext-module' or 'New Ext Module' with
 the value in 
\emph on
${moduleName} .
\end_layout

\begin_layout Description
lines
\begin_inset space ~
\end_inset

315
\begin_inset space ~
\end_inset

-
\begin_inset space ~
\end_inset

319 target 
\series bold
\emph on
meta-menu-created 
\series default
\emph default
outputs a message saying the meta-menu for the new module has been created
 OK.
\end_layout

\begin_layout Standard

\lyxline

\end_layout

\begin_layout Subsection
create-new-module.xml
\end_layout

\begin_layout Standard
Each website has it's own customised copy of 
\emph on
create-new-module.xml
\emph default
 .
 This script will create a new module for a given website.
\end_layout

\begin_layout Subsubsection
Structure of create-new-module.xml
\end_layout

\begin_layout Standard
Here we take a look at the create-new-module.xml script.
\end_layout

\begin_layout Standard

\lyxline

\end_layout

\begin_layout LyX-Code

\family roman
\series bold
create-new-module.xml
\family default

\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

01 <?xml version="1.0" ?>
\end_layout

\begin_layout LyX-Code

\series bold
02 
\end_layout

\begin_layout LyX-Code

\series bold
03 <!--
\end_layout

\begin_layout LyX-Code

\series bold
04 
\end_layout

\begin_layout LyX-Code

\series bold
05 Phing script to create a new website module,
\end_layout

\begin_layout LyX-Code

\series bold
06 from kazaam's 'new-module' (module template) directory.
\end_layout

\begin_layout LyX-Code

\series bold
07 
\end_layout

\begin_layout LyX-Code

\series bold
08 to run it use:
\end_layout

\begin_layout LyX-Code

\series bold
09 # phing -f create-new-module.xml
\end_layout

\begin_layout LyX-Code

\series bold
10 in the CWD of the above script.
\end_layout

\begin_layout LyX-Code

\series bold
11 
\end_layout

\begin_layout LyX-Code

\series bold
12 Tell phing the name of the new module you want to create,
\end_layout

\begin_layout LyX-Code

\series bold
13 and phing will do it for you.
\end_layout

\begin_layout LyX-Code

\series bold
14 
\end_layout

\begin_layout LyX-Code

\series bold
15 -->
\end_layout

\begin_layout LyX-Code

\series bold
16 
\end_layout

\begin_layout LyX-Code

\series bold
17 <project name="Create new website module"
\end_layout

\begin_layout LyX-Code

\series bold
18 default="meta-menu-created" basedir=".">
\end_layout

\begin_layout LyX-Code

\series bold
19
\end_layout

\begin_layout LyX-Code

\series bold
20 <target name="get-module-name">
\end_layout

\begin_layout LyX-Code

\series bold
21   <echo></echo>
\end_layout

\begin_layout LyX-Code

\series bold
22   <input propertyname="moduleName">
\end_layout

\begin_layout LyX-Code

\series bold
23 Please enter new module name:</input>
\end_layout

\begin_layout LyX-Code

\series bold
24   <echo>Creating new kazaam '${moduleName}' module</echo>
\end_layout

\begin_layout LyX-Code

\series bold
25 </target>
\end_layout

\begin_layout LyX-Code

\series bold
26 
\end_layout

\begin_layout LyX-Code

\series bold
27 <!-- copy 'new-module' template to the ${moduleName}
\begin_inset Newline newline
\end_inset

28 directory -->
\end_layout

\begin_layout LyX-Code

\series bold
29 <target name="copy-module-files"
\end_layout

\begin_layout LyX-Code

\series bold
30         depends="get-module-name">
\end_layout

\begin_layout LyX-Code

\series bold
31 
\end_layout

\begin_layout LyX-Code

\series bold
32 <echo msg="Copying files to '${moduleName}' module directory..." />
\end_layout

\begin_layout LyX-Code

\series bold
33 
\end_layout

\begin_layout LyX-Code

\series bold
34 <copy todir="${moduleName}">
\end_layout

\begin_layout LyX-Code

\series bold
35   <!-- Fileset for all files to be copied -->
\end_layout

\begin_layout LyX-Code

\series bold
36   <fileset dir="new-module">
\end_layout

\begin_layout LyX-Code

\series bold
37     <include name="**/*" />
\end_layout

\begin_layout LyX-Code

\series bold
38     <!-- exclude name="**/about.*" /-->
\end_layout

\begin_layout LyX-Code

\series bold
39   </fileset>
\end_layout

\begin_layout LyX-Code

\series bold
40 </copy>
\end_layout

\begin_layout LyX-Code

\series bold
41 
\end_layout

\begin_layout LyX-Code

\series bold
42 <!-- ================================== -->
\end_layout

\begin_layout LyX-Code

\series bold
43 
\end_layout

\begin_layout LyX-Code

\series bold
44 <!-- rename new-module.php to ${moduleName}.php -->
\end_layout

\begin_layout LyX-Code

\series bold
45 <property name="path1"
\end_layout

\begin_layout LyX-Code

\series bold
46           value="${moduleName}/anyuser" />
\end_layout

\begin_layout LyX-Code

\series bold
47 
\end_layout

\begin_layout LyX-Code

\series bold
48 <move file="${path1}/new-module.php"
\end_layout

\begin_layout LyX-Code

\series bold
49       tofile="${path1}/${moduleName}.php"
\end_layout

\begin_layout LyX-Code

\series bold
50       overwrite="true" />
\end_layout

\begin_layout LyX-Code

\series bold
51 
\end_layout

\begin_layout LyX-Code

\series bold
52 <move file="${path1}/new-module.php.bak"
\end_layout

\begin_layout LyX-Code

\series bold
53       tofile="${path1}/${moduleName}.php.bak"
\end_layout

\begin_layout LyX-Code

\series bold
54       overwrite="true" />
\end_layout

\begin_layout LyX-Code

\series bold
55 
\end_layout

\begin_layout LyX-Code

\series bold
56 <!-- rename backup directory filenames -->
\end_layout

\begin_layout LyX-Code

\series bold
57 <property name="path2"
\end_layout

\begin_layout LyX-Code

\series bold
58           value="${moduleName}/anyuser/tmp-backups" />
\end_layout

\begin_layout LyX-Code

\series bold
59 
\end_layout

\begin_layout LyX-Code

\series bold
60 <move file="${path2}/new-module.php"
\end_layout

\begin_layout LyX-Code

\series bold
61       tofile="${path2}/${moduleName}.php"
\end_layout

\begin_layout LyX-Code

\series bold
62       overwrite="true" />
\end_layout

\begin_layout LyX-Code

\series bold
63 
\end_layout

\begin_layout LyX-Code

\series bold
64 <move file="${path2}/new-module.php.bak"
\end_layout

\begin_layout LyX-Code

\series bold
65       tofile="${path2}/${moduleName}.php.bak"
\end_layout

\begin_layout LyX-Code

\series bold
66       overwrite="true" />
\end_layout

\begin_layout LyX-Code

\series bold
67 
\end_layout

\begin_layout LyX-Code

\series bold
68 <!-- ================================= -->
\end_layout

\begin_layout LyX-Code

\series bold
69 
\end_layout

\begin_layout LyX-Code

\series bold
70 <!-- rename new-module.conf.php to ${moduleName}.conf.php -->
\end_layout

\begin_layout LyX-Code

\series bold
71 <property name="path3"
\end_layout

\begin_layout LyX-Code

\series bold
72           value="${moduleName}/local/incs" />
\end_layout

\begin_layout LyX-Code

\series bold
73 
\end_layout

\begin_layout LyX-Code

\series bold
74 <move file="${path3}/new-module.conf.php"
\end_layout

\begin_layout LyX-Code

\series bold
75       tofile="${path3}/${moduleName}.conf.php"
\end_layout

\begin_layout LyX-Code

\series bold
76       overwrite="true" />
\end_layout

\begin_layout LyX-Code

\series bold
77 
\end_layout

\begin_layout LyX-Code

\series bold
78 <move file="${path3}/new-module.conf.php.bak"
\end_layout

\begin_layout LyX-Code

\series bold
79       tofile="${path3}/${moduleName}.conf.php.bak"
\end_layout

\begin_layout LyX-Code

\series bold
80       overwrite="true" />
\end_layout

\begin_layout LyX-Code

\series bold
81 
\end_layout

\begin_layout LyX-Code

\series bold
82 <!-- rename backup directory filenames -->
\end_layout

\begin_layout LyX-Code

\series bold
83 <property name="path4"
\end_layout

\begin_layout LyX-Code

\series bold
84           value="${moduleName}/local/incs/tmp-backups" />
\end_layout

\begin_layout LyX-Code

\series bold
85 
\end_layout

\begin_layout LyX-Code

\series bold
86 <move file="${path4}/new-module.conf.php"
\end_layout

\begin_layout LyX-Code

\series bold
87       tofile="${path4}/${moduleName}.conf.php"
\end_layout

\begin_layout LyX-Code

\series bold
88       overwrite="true" />
\end_layout

\begin_layout LyX-Code

\series bold
89 
\end_layout

\begin_layout LyX-Code

\series bold
90 <move file="${path4}/new-module.conf.php.bak"
\end_layout

\begin_layout LyX-Code

\series bold
91       tofile="${path4}/${moduleName}.conf.php.bak"
\end_layout

\begin_layout LyX-Code

\series bold
92       overwrite="true" />
\end_layout

\begin_layout LyX-Code

\series bold
93 
\end_layout

\begin_layout LyX-Code

\series bold
94 <!-- ================================= -->
\end_layout

\begin_layout LyX-Code

\series bold
95 
\end_layout

\begin_layout LyX-Code

\series bold
96 <!-- rename new-module-menu.php to ${moduleName}-menu.php -->
\end_layout

\begin_layout LyX-Code

\series bold
97 <property name="path5"
\end_layout

\begin_layout LyX-Code

\series bold
98           value="${moduleName}/local/incs/mod" />
\end_layout

\begin_layout LyX-Code

\series bold
99 
\end_layout

\begin_layout LyX-Code

\series bold
100 <move file="${path5}/new-module-menu.php"
\end_layout

\begin_layout LyX-Code

\series bold
101       tofile="${path5}/${moduleName}-menu.php"
\end_layout

\begin_layout LyX-Code

\series bold
102       overwrite="true" />
\end_layout

\begin_layout LyX-Code

\series bold
103 
\end_layout

\begin_layout LyX-Code

\series bold
104 <move file="${path5}/new-module-menu.php.bak"
\end_layout

\begin_layout LyX-Code

\series bold
105       tofile="${path5}/${moduleName}-menu.php.bak"
\end_layout

\begin_layout LyX-Code

\series bold
106       overwrite="true" />
\end_layout

\begin_layout LyX-Code

\series bold
107 
\end_layout

\begin_layout LyX-Code

\series bold
108 <!-- rename backup directory filenames -->
\end_layout

\begin_layout LyX-Code

\series bold
109 <property name="path6"
\end_layout

\begin_layout LyX-Code

\series bold
110 value="${moduleName}/local/incs/mod/tmp-backups" />
\end_layout

\begin_layout LyX-Code

\series bold
111 
\end_layout

\begin_layout LyX-Code

\series bold
112 <move file="${path6}/new-module-menu.php"
\end_layout

\begin_layout LyX-Code

\series bold
113       tofile="${path6}/${moduleName}-menu.php"
\end_layout

\begin_layout LyX-Code

\series bold
114       overwrite="true" />
\end_layout

\begin_layout LyX-Code

\series bold
115 
\end_layout

\begin_layout LyX-Code

\series bold
116 <move file="${path6}/new-module-menu.php.bak"
\end_layout

\begin_layout LyX-Code

\series bold
117       tofile="${path6}/${moduleName}-menu.php.bak"
\end_layout

\begin_layout LyX-Code

\series bold
118       overwrite="true" />
\end_layout

\begin_layout LyX-Code

\series bold
119 
\end_layout

\begin_layout LyX-Code

\series bold
120 <!-- ================================= -->
\end_layout

\begin_layout LyX-Code

\series bold
121 
\end_layout

\begin_layout LyX-Code

\series bold
122 <!-- rename new-module-right-menu.php
\end_layout

\begin_layout LyX-Code

\series bold
123      to ${moduleName}-right-menu.php -->
\end_layout

\begin_layout LyX-Code

\series bold
124 <property name="path7"
\end_layout

\begin_layout LyX-Code

\series bold
125           value="${moduleName}/local/incs/mod" />
\end_layout

\begin_layout LyX-Code

\series bold
126 
\end_layout

\begin_layout LyX-Code

\series bold
127 <move file="${path7}/new-module-right-menu.php"
\end_layout

\begin_layout LyX-Code

\series bold
128       tofile="${path7}/${moduleName}-right-menu.php"
\end_layout

\begin_layout LyX-Code

\series bold
129       overwrite="true" />
\end_layout

\begin_layout LyX-Code

\series bold
130 
\end_layout

\begin_layout LyX-Code

\series bold
131 <move file="${path7}/new-module-right-menu.php.bak"
\end_layout

\begin_layout LyX-Code

\series bold
132       tofile="${path7}/${moduleName}-right-menu.php.bak"
\end_layout

\begin_layout LyX-Code

\series bold
133       overwrite="true" />
\end_layout

\begin_layout LyX-Code

\series bold
134 
\end_layout

\begin_layout LyX-Code

\series bold
135 <!-- rename backup directory filenames -->
\end_layout

\begin_layout LyX-Code

\series bold
136 <property name="path8"
\end_layout

\begin_layout LyX-Code

\series bold
137      value="${moduleName}/local/incs/mod/tmp-backups" />
\end_layout

\begin_layout LyX-Code

\series bold
138
\end_layout

\begin_layout LyX-Code

\series bold
139 <move file="${path8}/new-module-right-menu.php"
\end_layout

\begin_layout LyX-Code

\series bold
140       tofile="${path8}/${moduleName}-right-menu.php"
\end_layout

\begin_layout LyX-Code

\series bold
141       overwrite="true" />
\end_layout

\begin_layout LyX-Code

\series bold
142 
\end_layout

\begin_layout LyX-Code

\series bold
143 <move file="${path8}/new-module-right-menu.php.bak"
\end_layout

\begin_layout LyX-Code

\series bold
144       tofile="${path8}/${moduleName}-right-menu.php.bak"
\end_layout

\begin_layout LyX-Code

\series bold
145       overwrite="true" />
\end_layout

\begin_layout LyX-Code

\series bold
146 
\end_layout

\begin_layout LyX-Code

\series bold
147 </target>
\end_layout

\begin_layout LyX-Code

\series bold
148 
\end_layout

\begin_layout LyX-Code

\series bold
149 <!-- remove the new-module* template files
\end_layout

\begin_layout LyX-Code

\series bold
150      from the newly created ${moduleName} module -->
\end_layout

\begin_layout LyX-Code

\series bold
151 <target name="clean-up" depends="copy-module-files">
\end_layout

\begin_layout LyX-Code

\series bold
152 
\end_layout

\begin_layout LyX-Code

\series bold
153   <echo msg="Cleaning up unnecessary template files" />
\end_layout

\begin_layout LyX-Code

\series bold
154   <delete>
\end_layout

\begin_layout LyX-Code

\series bold
155 
\end_layout

\begin_layout LyX-Code

\series bold
156     <!-- Fileset for all files to be deleted -->
\end_layout

\begin_layout LyX-Code

\series bold
157     <fileset dir="${moduleName}">
\end_layout

\begin_layout LyX-Code

\series bold
158       <include name="**/new-module*" />
\end_layout

\begin_layout LyX-Code

\series bold
159       <include name="**/tmp-backups/new-module*" />
\end_layout

\begin_layout LyX-Code

\series bold
160     </fileset>
\end_layout

\begin_layout LyX-Code

\series bold
161 
\end_layout

\begin_layout LyX-Code

\series bold
162   </delete>
\end_layout

\begin_layout LyX-Code

\series bold
163 </target>
\end_layout

\begin_layout LyX-Code

\series bold
164
\end_layout

\begin_layout LyX-Code

\series bold
165 
\end_layout

\begin_layout LyX-Code

\series bold
166 <!-- change text strings in all files in newly created
\end_layout

\begin_layout LyX-Code

\series bold
167      ${moduleName} directory to work with this
\end_layout

\begin_layout LyX-Code

\series bold
168      new module directory -->
\end_layout

\begin_layout LyX-Code

\series bold
169 <target name="replace-module-text" depends="clean-up">
\end_layout

\begin_layout LyX-Code

\series bold
170   <echo msg="replacing 'new-module' text with '${moduleName}'" />
\end_layout

\begin_layout LyX-Code

\series bold
171   <echo msg="replacing 'New Module' text with '${moduleName}'" />
\end_layout

\begin_layout LyX-Code

\series bold
172 
\end_layout

\begin_layout LyX-Code

\series bold
173 <reflexive>
\end_layout

\begin_layout LyX-Code

\series bold
174   <fileset dir="${moduleName}">
\end_layout

\begin_layout LyX-Code

\series bold
175     <include name="**/*" />
\end_layout

\begin_layout LyX-Code

\series bold
176   </fileset>
\end_layout

\begin_layout LyX-Code

\series bold
177 
\end_layout

\begin_layout LyX-Code

\series bold
178   <filterchain>
\end_layout

\begin_layout LyX-Code

\series bold
179     <replaceregexp>
\end_layout

\begin_layout LyX-Code

\series bold
180       <regexp pattern="new-module" replace="${moduleName}" />
\end_layout

\begin_layout LyX-Code

\series bold
181       <regexp pattern="New Module" replace="${moduleName}" />
\end_layout

\begin_layout LyX-Code

\series bold
182     </replaceregexp>
\end_layout

\begin_layout LyX-Code

\series bold
183   </filterchain>
\end_layout

\begin_layout LyX-Code

\series bold
184 </reflexive>
\end_layout

\begin_layout LyX-Code

\series bold
185 
\end_layout

\begin_layout LyX-Code

\series bold
186 </target>
\end_layout

\begin_layout LyX-Code

\series bold
187 
\end_layout

\begin_layout LyX-Code

\series bold
188 <target name="module-created" depends="replace-module-text">
\end_layout

\begin_layout LyX-Code

\series bold
189   <echo msg="New kazaam module '${moduleName}' created OK!" />
\end_layout

\begin_layout LyX-Code

\series bold
190 </target>
\end_layout

\begin_layout LyX-Code

\series bold
191
\end_layout

\begin_layout LyX-Code

\series bold
192 
\end_layout

\begin_layout LyX-Code

\series bold
193 <!-- create the meta-menu for the new module -->
\end_layout

\begin_layout LyX-Code

\series bold
194 
\end_layout

\begin_layout LyX-Code

\series bold
195 <target name="create-meta-menu" depends="module-created">
\end_layout

\begin_layout LyX-Code

\series bold
196   <echo></echo>
\end_layout

\begin_layout LyX-Code

\series bold
197   <echo>Creating meta-menu for new kazaam module
\begin_inset Newline newline
\end_inset

198    '${moduleName}'</echo>
\end_layout

\begin_layout LyX-Code

\series bold
199 </target>
\end_layout

\begin_layout LyX-Code

\series bold
200
\end_layout

\begin_layout LyX-Code

\series bold
201 
\end_layout

\begin_layout LyX-Code

\series bold
202 <target name="copy-meta-menu-files"
\end_layout

\begin_layout LyX-Code

\series bold
203         depends="create-meta-menu">
\end_layout

\begin_layout LyX-Code

\series bold
204 
\end_layout

\begin_layout LyX-Code

\series bold
205   <echo msg="Copying 'new-module.php' (meta-menu template files)
\end_layout

\begin_layout LyX-Code

\series bold
206    to '${moduleName}.php'" />
\end_layout

\begin_layout LyX-Code

\series bold
207 
\end_layout

\begin_layout LyX-Code

\series bold
208 <!-- copy './shared/meta-menus/new-module.php' meta-menu template
\end_layout

\begin_layout LyX-Code

\series bold
209 file to '${moduleName}.php' -->
\end_layout

\begin_layout LyX-Code

\series bold
210 <property name="path9"
\end_layout

\begin_layout LyX-Code

\series bold
211           value="./shared/meta-menus" />
\end_layout

\begin_layout LyX-Code

\series bold
212 
\end_layout

\begin_layout LyX-Code

\series bold
213 <copy file="${path9}/new-module.php"
\end_layout

\begin_layout LyX-Code

\series bold
214       tofile="${path9}/${moduleName}.php"
\end_layout

\begin_layout LyX-Code

\series bold
215       overwrite="true"/>
\end_layout

\begin_layout LyX-Code

\series bold
216 
\end_layout

\begin_layout LyX-Code

\series bold
217 <copy file="${path9}/new-module.php.bak"
\end_layout

\begin_layout LyX-Code

\series bold
218       tofile="${path9}/${moduleName}.php.bak"
\end_layout

\begin_layout LyX-Code

\series bold
219       overwrite="true"/>
\end_layout

\begin_layout LyX-Code

\series bold
220 
\end_layout

\begin_layout LyX-Code

\series bold
221 <!-- copy backup directory files -->
\end_layout

\begin_layout LyX-Code

\series bold
222 <property name="path10"
\end_layout

\begin_layout LyX-Code

\series bold
223           value="./shared/meta-menus/tmp-backups" />
\end_layout

\begin_layout LyX-Code

\series bold
224 
\end_layout

\begin_layout LyX-Code

\series bold
225 <copy file="${path10}/new-module.php"
\end_layout

\begin_layout LyX-Code

\series bold
226       tofile="${path10}/${moduleName}.php"
\end_layout

\begin_layout LyX-Code

\series bold
227       overwrite="true"/>
\end_layout

\begin_layout LyX-Code

\series bold
228 
\end_layout

\begin_layout LyX-Code

\series bold
229 <copy file="${path10}/new-module.php.bak"
\end_layout

\begin_layout LyX-Code

\series bold
230       tofile="${path10}/${moduleName}.php.bak"
\end_layout

\begin_layout LyX-Code

\series bold
231      overwrite="true"/>
\end_layout

\begin_layout LyX-Code

\series bold
232 
\end_layout

\begin_layout LyX-Code

\series bold
233 </target>
\end_layout

\begin_layout LyX-Code

\series bold
234
\end_layout

\begin_layout LyX-Code

\series bold
235 
\end_layout

\begin_layout LyX-Code

\series bold
236 <!-- tweak text strings in newly created
\end_layout

\begin_layout LyX-Code

\series bold
237      ${moduleName}.php files -->
\end_layout

\begin_layout LyX-Code

\series bold
238 <target name="replace-meta-menu-text"
\end_layout

\begin_layout LyX-Code

\series bold
239         depends="copy-meta-menu-files">
\end_layout

\begin_layout LyX-Code

\series bold
240 
\end_layout

\begin_layout LyX-Code

\series bold
241   <echo msg="replacing 'new-module' text with '${moduleName}'" />
\end_layout

\begin_layout LyX-Code

\series bold
242   <echo msg="replacing 'New Module' text with '${moduleName}'" />
\end_layout

\begin_layout LyX-Code

\series bold
243 
\end_layout

\begin_layout LyX-Code

\series bold
244   <reflexive>
\end_layout

\begin_layout LyX-Code

\series bold
245     <fileset dir="./shared/meta-menus/">
\end_layout

\begin_layout LyX-Code

\series bold
246       <include name="${moduleName}.*" />
\end_layout

\begin_layout LyX-Code

\series bold
247       <include name="**/tmp-backups/${moduleName}.*" />
\end_layout

\begin_layout LyX-Code

\series bold
248     </fileset>
\end_layout

\begin_layout LyX-Code

\series bold
249 
\end_layout

\begin_layout LyX-Code

\series bold
250     <filterchain>
\end_layout

\begin_layout LyX-Code

\series bold
251       <replaceregexp>
\end_layout

\begin_layout LyX-Code

\series bold
252         <regexp pattern="new-module" replace="${moduleName}" />
\end_layout

\begin_layout LyX-Code

\series bold
253         <regexp pattern="New Module" replace="${moduleName}" />
\end_layout

\begin_layout LyX-Code

\series bold
254       </replaceregexp>
\end_layout

\begin_layout LyX-Code

\series bold
255     </filterchain>
\end_layout

\begin_layout LyX-Code

\series bold
256 
\end_layout

\begin_layout LyX-Code

\series bold
257   </reflexive>
\end_layout

\begin_layout LyX-Code

\series bold
258 
\end_layout

\begin_layout LyX-Code

\series bold
259 </target>
\end_layout

\begin_layout LyX-Code

\series bold
260
\end_layout

\begin_layout LyX-Code

\series bold
261 
\end_layout

\begin_layout LyX-Code

\series bold
262 <target name="meta-menu-created"
\end_layout

\begin_layout LyX-Code

\series bold
263         depends="replace-meta-menu-text">
\end_layout

\begin_layout LyX-Code

\series bold
264   <echo msg="meta-menu for new kazaam module
\begin_inset Newline newline
\end_inset

265    '${moduleName}' created OK!" />
\end_layout

\begin_layout LyX-Code

\series bold
266 </target>
\end_layout

\begin_layout LyX-Code

\series bold
267 
\end_layout

\begin_layout LyX-Code

\series bold
268 </project>
\end_layout

\begin_layout Standard

\lyxline

\end_layout

\begin_layout Subsubsection
How create-new-module.xml works
\end_layout

\begin_layout Standard
Here we look at some important lines of code in this script.
\end_layout

\begin_layout Description
line
\begin_inset space ~
\end_inset

01 declares the document type as xml version one.
\end_layout

\begin_layout Description
lines
\begin_inset space ~
\end_inset

03
\begin_inset space ~
\end_inset

-
\begin_inset space ~
\end_inset

15 are comments about the script's usage.
\end_layout

\begin_layout Description
lines
\begin_inset space ~
\end_inset

17
\begin_inset space ~
\end_inset

-
\begin_inset space ~
\end_inset

18 This is the start of the PHING script.
\end_layout

\begin_layout Description
lines
\begin_inset space ~
\end_inset

20
\begin_inset space ~
\end_inset

-
\begin_inset space ~
\end_inset

25 target 
\series bold
\emph on
get-module-name
\series default
\emph default
 is the first target in the script.
 It asks for the name of the new module you want to create.
 This value is stored in the PHING variable 
\emph on
${moduleName}.
\end_layout

\begin_layout Description
lines
\begin_inset space ~
\end_inset

29
\begin_inset space ~
\end_inset

-
\begin_inset space ~
\end_inset

147 target 
\series bold
\emph on
copy-module-files
\series default
\emph default
 copies the 
\emph on
new-module 
\emph default
module template directory to the name of the new module directory specified
 in 
\emph on
${moduleName}
\emph default
 .

\emph on
 
\emph default
New modules are only created in websites under the 
\emph on
develop
\emph default
 directory.
 Lines 44 - 145 change the names of certain files in the module to match
 the new module just created.
\end_layout

\begin_layout Description
lines
\begin_inset space ~
\end_inset

151
\begin_inset space ~
\end_inset

-
\begin_inset space ~
\end_inset

163 target 
\series bold
\emph on
clean-up
\series default
\emph default
 removes any unnecessary module template files from the newly created module.
\end_layout

\begin_layout Description
lines
\begin_inset space ~
\end_inset

169
\begin_inset space ~
\end_inset

-
\begin_inset space ~
\end_inset

186 target 
\series bold
\emph on
replace-module-text 
\series default
\emph default
performs a regular expression search-and-replace on the contents of all
 the files in the newly created module.
 It replaces any occurence of 'new-module' or 'New Module' with the value
 in 
\emph on
${moduleName} .
 
\end_layout

\begin_layout Description
lines
\begin_inset space ~
\end_inset

188
\begin_inset space ~
\end_inset

-
\begin_inset space ~
\end_inset

190 target 
\series bold
\emph on
module-created 
\series default
\emph default
outputs a message saying the new module has been created OK.
\end_layout

\begin_layout Description
lines
\begin_inset space ~
\end_inset

195
\begin_inset space ~
\end_inset

-
\begin_inset space ~
\end_inset

199 target 
\series bold
\emph on
create-meta-menu 
\series default
\emph default
outputs a message saying a meta-menu is being created for the new module.
\end_layout

\begin_layout Description
lines
\begin_inset space ~
\end_inset

202
\begin_inset space ~
\end_inset

-
\begin_inset space ~
\end_inset

233 target 
\series bold
\emph on
copy-meta-menu-files 
\series default
\emph default
creates a 
\emph on
meta-menu
\emph default
 for this new module from the
\begin_inset Newline newline
\end_inset


\series bold
\emph on
website-name
\series default
/shared/meta-menus/
\emph default
new-module.php meta-menu template.
 
\emph on
(A meta-menu 
\emph default
can be added to either the 
\emph on
homepage-menu.php, 
\emph default
or the
\emph on
 right-menu.php
\emph default
, both which live in:
\begin_inset Newline newline
\end_inset


\series bold
\emph on
website-name
\series default
/shared/incs/ .)
\end_layout

\begin_layout Description
lines
\begin_inset space ~
\end_inset

238
\begin_inset space ~
\end_inset

-
\begin_inset space ~
\end_inset

259 target 
\series bold
\emph on
replace-meta-menu-text 
\series default
\emph default
performs a regular expression search-and-replace on the contents of the
 newly created meta-menu files for this new module.
 It replaces any occurence of 'new-module' or 'New Module' with the value
 in 
\emph on
${moduleName} .
\end_layout

\begin_layout Description
lines
\begin_inset space ~
\end_inset

262
\begin_inset space ~
\end_inset

-
\begin_inset space ~
\end_inset

266 target 
\series bold
\emph on
meta-menu-created 
\series default
\emph default
outputs a message saying the meta-menu for the new module has been created
 OK.
\end_layout

\begin_layout Standard

\lyxline

\end_layout

\begin_layout Subsection
int-build.xml
\end_layout

\begin_layout Standard
This script is used to copy a complete website from the 
\emph on
develop
\emph default
 code branch, to the 
\emph on
intermediate
\emph default
 code branch.
\end_layout

\begin_layout Subsubsection
Structure of int-build.xml
\end_layout

\begin_layout Standard
Here we take a look at the int-build.xml script.
\end_layout

\begin_layout Standard

\lyxline

\end_layout

\begin_layout LyX-Code

\family roman
\series bold
int-build.xml
\family default
\series default

\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset


\series bold
01 <?xml version="1.0" ?>
\end_layout

\begin_layout LyX-Code

\series bold
02
\end_layout

\begin_layout LyX-Code

\series bold
03 <project name="kazaam-sitetpl"
\end_layout

\begin_layout LyX-Code

\series bold
04          default="finished" basedir=".">
\end_layout

\begin_layout LyX-Code

\series bold
05 
\end_layout

\begin_layout LyX-Code

\series bold
06 <target name="t1">
\end_layout

\begin_layout LyX-Code

\series bold
07   <echo>Copying kazaam-sitetpl development files
\end_layout

\begin_layout LyX-Code

\series bold
08           to intermediate directory...
\end_layout

\begin_layout LyX-Code

\series bold
09   </echo>
\end_layout

\begin_layout LyX-Code

\series bold
10 
\end_layout

\begin_layout LyX-Code

\series bold
11   <echo>Except the following files:
\end_layout

\begin_layout LyX-Code

\series bold
12 /shared/incs/domain.* files...
\end_layout

\begin_layout LyX-Code

\series bold
13 /shared-host/incs/*.* symbolic link files...
\end_layout

\begin_layout LyX-Code

\series bold
14   </echo>
\end_layout

\begin_layout LyX-Code

\series bold
15 
\end_layout

\begin_layout LyX-Code

\series bold
16   <echo>Please wait.
 This could take some time
\end_layout

\begin_layout LyX-Code

\series bold
17   </echo>
\end_layout

\begin_layout LyX-Code

\series bold
18 
\end_layout

\begin_layout LyX-Code

\series bold
19   <copy todir="../../intermediate/kazaam-sitetpl"
\end_layout

\begin_layout LyX-Code

\series bold
20         overwrite="true">
\end_layout

\begin_layout LyX-Code

\series bold
21
\end_layout

\begin_layout LyX-Code

\series bold
22     <!-- Fileset for all files to be copied -->
\end_layout

\begin_layout LyX-Code

\series bold
23     <fileset dir=".">
\end_layout

\begin_layout LyX-Code

\series bold
24       <include name="**" />
\end_layout

\begin_layout LyX-Code

\series bold
25
\end_layout

\begin_layout LyX-Code

\series bold
26       <!-- don't overwrite domain.* files -->
\end_layout

\begin_layout LyX-Code

\series bold
27       <!-- each website's code branch has it's own domain.* files
\end_layout

\begin_layout LyX-Code

\series bold
28            with specific settings -->
\end_layout

\begin_layout LyX-Code

\series bold
29       <exclude name="**/domain.*" />
\end_layout

\begin_layout LyX-Code

\series bold
30
\end_layout

\begin_layout LyX-Code

\series bold
31       <!-- do not copy these directories for now -->
\end_layout

\begin_layout LyX-Code

\series bold
32       <!-- shared-host contains symbolic link files
\end_layout

\begin_layout LyX-Code

\series bold
33            so we don't want to overwrite them with REAL files -->
\end_layout

\begin_layout LyX-Code

\series bold
34       <exclude name="**/shared-host/**" />
\end_layout

\begin_layout LyX-Code

\series bold
35
\end_layout

\begin_layout LyX-Code

\series bold
36       <!-- also do not copy these example files for now -->
\end_layout

\begin_layout LyX-Code

\series bold
37       <exclude name="**/file1.*" />
\end_layout

\begin_layout LyX-Code

\series bold
38       <exclude name="**/file2.*" />
\end_layout

\begin_layout LyX-Code

\series bold
39
\end_layout

\begin_layout LyX-Code

\series bold
40     </fileset>
\end_layout

\begin_layout LyX-Code

\series bold
41   </copy>
\end_layout

\begin_layout LyX-Code

\series bold
42 </target>
\end_layout

\begin_layout LyX-Code

\series bold
43 
\end_layout

\begin_layout LyX-Code

\series bold
44 <target name="finished" depends="t1">
\end_layout

\begin_layout LyX-Code

\series bold
45   <echo msg="All development files copied
\end_layout

\begin_layout LyX-Code

\series bold
46 to intermediate directory OK!" />
\end_layout

\begin_layout LyX-Code

\series bold
47 </target>
\end_layout

\begin_layout LyX-Code

\series bold
48
\end_layout

\begin_layout LyX-Code

\series bold
49 </project>
\end_layout

\begin_layout Standard

\lyxline

\end_layout

\begin_layout Subsubsection
How int-build.xml works
\end_layout

\begin_layout Standard
Here we look at some important lines of code in this script.
\end_layout

\begin_layout Description
line
\begin_inset space ~
\end_inset

01 declares the document type as xml version one.
\end_layout

\begin_layout Description
lines
\begin_inset space ~
\end_inset

03
\begin_inset space ~
\end_inset

-
\begin_inset space ~
\end_inset

04 This is the start of the PHING script.
\end_layout

\begin_layout Description
line
\begin_inset space ~
\end_inset

06 is the start of target 
\series bold
\emph on
t1.
\end_layout

\begin_layout Description
lines
\begin_inset space ~
\end_inset

07
\begin_inset space ~
\end_inset

-
\begin_inset space ~
\end_inset

09 output an information message about the script.
\end_layout

\begin_layout Description
lines
\begin_inset space ~
\end_inset

11
\begin_inset space ~
\end_inset

-
\begin_inset space ~
\end_inset

14 output a message saying which files are NOT being copied.
\end_layout

\begin_layout Description
lines
\begin_inset space ~
\end_inset

16
\begin_inset space ~
\end_inset

-
\begin_inset space ~
\end_inset

17 output an information message about the script.
\end_layout

\begin_layout Description
line
\begin_inset space ~
\end_inset

19 sets the directory destination where the files will be copied to.
\end_layout

\begin_layout Description
line
\begin_inset space ~
\end_inset

20 overwrites any existing directories or files while copying.
\end_layout

\begin_layout Description
line
\begin_inset space ~
\end_inset

23 sets the source directory to copy from.
\end_layout

\begin_layout Description
line
\begin_inset space ~
\end_inset

24 copies all directories & files from the source directory.
\end_layout

\begin_layout Description
line
\begin_inset space ~
\end_inset

29 does not copy any files matching this pattern.
\end_layout

\begin_layout Description
line
\begin_inset space ~
\end_inset

34 does not copy anything from the directory matching this pattern.
\end_layout

\begin_layout Description
lines
\begin_inset space ~
\end_inset

37
\begin_inset space ~
\end_inset

-
\begin_inset space ~
\end_inset

38 example pattern to exclude any files (or directories) for this website
 you do not want copied to the 
\emph on
intermediate
\emph default
 code branch.
\end_layout

\begin_layout Description
line
\begin_inset space ~
\end_inset

42 is the end of target 
\series bold
\emph on
t1.
\end_layout

\begin_layout Description
lines
\begin_inset space ~
\end_inset

44
\begin_inset space ~
\end_inset

-
\begin_inset space ~
\end_inset

47 target 
\series bold
\emph on
finished
\series default
\emph default
 outputs a message saying the development code for this website has been
 copied to the 
\emph on
intermediate
\emph default
 code branch ok.
\end_layout

\begin_layout Standard

\lyxline

\end_layout

\begin_layout Subsection
int-delete.xml
\end_layout

\begin_layout Standard
Use this script to clean up the contents of the 
\emph on
intermediate
\emph default
 directory for a particular website.
 By default it will delete everything in the 
\emph on
intermediate
\emph default
 code branch for this website, apart from the 
\emph on
domain.*
\emph default
 files, and anything in the 
\emph on
shared-host
\emph default
 sub-directory, which should be symbolic links.
\end_layout

\begin_layout Subsubsection
Structure of int-delete.xml
\end_layout

\begin_layout Standard
Here we take a look at the int-delete.xml script.
\end_layout

\begin_layout Standard

\lyxline

\end_layout

\begin_layout LyX-Code

\family roman
\series bold
int-delete.xml
\family default
\series default

\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset


\series bold
01 <?xml version="1.0" ?>
\end_layout

\begin_layout LyX-Code

\series bold
02
\end_layout

\begin_layout LyX-Code

\series bold
03 <project name="kazaam-sitetpl"
\end_layout

\begin_layout LyX-Code

\series bold
04          default="finished" basedir=".">
\end_layout

\begin_layout LyX-Code

\series bold
05
\end_layout

\begin_layout LyX-Code

\series bold
06 <target name="t1">
\end_layout

\begin_layout LyX-Code

\series bold
07   <echo>Deleting all files in kazaam-sitetpl
\end_layout

\begin_layout LyX-Code

\series bold
08           intermediate directory...
\end_layout

\begin_layout LyX-Code

\series bold
09   </echo>
\end_layout

\begin_layout LyX-Code

\series bold
10 
\end_layout

\begin_layout LyX-Code

\series bold
11   <echo>Except the following files:
\end_layout

\begin_layout LyX-Code

\series bold
12 /shared/incs/domain.* files...
\end_layout

\begin_layout LyX-Code

\series bold
13 /shared-host/incs/*.* symbolic link files...
\end_layout

\begin_layout LyX-Code

\series bold
14   </echo>
\end_layout

\begin_layout LyX-Code

\series bold
15
\end_layout

\begin_layout LyX-Code

\series bold
16   <echo>Please wait.
 This could take some time
\end_layout

\begin_layout LyX-Code

\series bold
17   </echo>
\end_layout

\begin_layout LyX-Code

\series bold
18
\end_layout

\begin_layout LyX-Code

\series bold
19   <delete includeemptydirs="true">
\end_layout

\begin_layout LyX-Code

\series bold
20     <!-- Fileset for all files to be deleted -->
\end_layout

\begin_layout LyX-Code

\series bold
21     <fileset dir="../../intermediate/kazaam-sitetpl">
\end_layout

\begin_layout LyX-Code

\series bold
22       <include name="**" />
\end_layout

\begin_layout LyX-Code

\series bold
23
\end_layout

\begin_layout LyX-Code

\series bold
24       <!-- do not delete domain.* files -->
\end_layout

\begin_layout LyX-Code

\series bold
25       <!-- each website's code branch has it's own domain.* files
\end_layout

\begin_layout LyX-Code

\series bold
26            with specific settings -->
\end_layout

\begin_layout LyX-Code

\series bold
27       <exclude name="**/domain.*" />
\end_layout

\begin_layout LyX-Code

\series bold
28       <exclude name="**/tmp-backups/domain.*" />
\end_layout

\begin_layout LyX-Code

\series bold
29
\end_layout

\begin_layout LyX-Code

\series bold
30       <!-- also do not delete these directories -->
\end_layout

\begin_layout LyX-Code

\series bold
31       <!-- this directory contains symbolic links that are needed -->
\end_layout

\begin_layout LyX-Code

\series bold
32       <exclude name="**/shared-host/**" />
\end_layout

\begin_layout LyX-Code

\series bold
33
\end_layout

\begin_layout LyX-Code

\series bold
34       <!-- also do not delete these example files for now -->
\end_layout

\begin_layout LyX-Code

\series bold
35       <exclude name="**/file1.*" />
\end_layout

\begin_layout LyX-Code

\series bold
36       <exclude name="**/file2.*" />
\end_layout

\begin_layout LyX-Code

\series bold
37     </fileset>
\end_layout

\begin_layout LyX-Code

\series bold
38   </delete>
\end_layout

\begin_layout LyX-Code

\series bold
39 </target>
\end_layout

\begin_layout LyX-Code

\series bold
40
\end_layout

\begin_layout LyX-Code

\series bold
41 <target name="finished" depends="t1">
\end_layout

\begin_layout LyX-Code

\series bold
42   <echo msg="All files in kazaam-sitetpl
\end_layout

\begin_layout LyX-Code

\series bold
43 intermediate directory deleted OK!" />
\end_layout

\begin_layout LyX-Code

\series bold
44   </target>
\end_layout

\begin_layout LyX-Code

\series bold
45
\end_layout

\begin_layout LyX-Code

\series bold
46 </project>
\end_layout

\begin_layout Standard

\lyxline

\end_layout

\begin_layout Subsubsection
How int-delete.xml works
\end_layout

\begin_layout Standard
Here we look at some important lines of code in this script.
\end_layout

\begin_layout Description
line
\begin_inset space ~
\end_inset

01 declares the document type as xml version one.
\end_layout

\begin_layout Description
lines
\begin_inset space ~
\end_inset

03
\begin_inset space ~
\end_inset

-
\begin_inset space ~
\end_inset

04 This is the start of the PHING script.
\end_layout

\begin_layout Description
line
\begin_inset space ~
\end_inset

06 is the start of target 
\series bold
\emph on
t1.
\end_layout

\begin_layout Description
lines
\begin_inset space ~
\end_inset

07
\begin_inset space ~
\end_inset

-
\begin_inset space ~
\end_inset

09 output an information message about the script.
\end_layout

\begin_layout Description
lines
\begin_inset space ~
\end_inset

11
\begin_inset space ~
\end_inset

-
\begin_inset space ~
\end_inset

14 output a message saying which files are NOT being deleted.
\end_layout

\begin_layout Description
lines
\begin_inset space ~
\end_inset

16
\begin_inset space ~
\end_inset

-
\begin_inset space ~
\end_inset

17 output an information message about the script.
\end_layout

\begin_layout Description
line
\begin_inset space ~
\end_inset

19 is the start of the <delete> task.
 It also removes empty directories from the target directory.
 
\end_layout

\begin_layout Description
line
\begin_inset space ~
\end_inset

21 sets the target directory to delete contents from.
\end_layout

\begin_layout Description
line
\begin_inset space ~
\end_inset

22 deletes all directories and files from the target directory.
\end_layout

\begin_layout Description
lines
\begin_inset space ~
\end_inset

27
\begin_inset space ~
\end_inset

-
\begin_inset space ~
\end_inset

28 does not delete any files matching this pattern from the target directory.
\end_layout

\begin_layout Description
line
\begin_inset space ~
\end_inset

32 does not delete anything from the sub-directory matching this pattern
 in the target directory.
\end_layout

\begin_layout Description
lines
\begin_inset space ~
\end_inset

35
\begin_inset space ~
\end_inset

-
\begin_inset space ~
\end_inset

36 example pattern to exclude any files (or directories) you do not want
 deleted from the 
\emph on
intermediate
\emph default
 code branch for this website.
\end_layout

\begin_layout Description
line
\begin_inset space ~
\end_inset

39 is the end of target 
\series bold
\emph on
t1.
\end_layout

\begin_layout Description
lines
\begin_inset space ~
\end_inset

41
\begin_inset space ~
\end_inset

-
\begin_inset space ~
\end_inset

44 target 
\series bold
\emph on
finished
\series default
\emph default
 outputs a message saying all files in the 
\emph on
intermediate
\emph default
 code branch for this website have been deleted ok.
\end_layout

\begin_layout Standard

\lyxline

\end_layout

\begin_layout Subsection
live-build.xml
\end_layout

\begin_layout Standard
This script is used to copy a complete website from the 
\emph on
intermediate
\emph default
 code branch, to the 
\emph on
live 
\emph default
code branch.
\end_layout

\begin_layout Subsubsection
Structure of live-build.xml
\end_layout

\begin_layout Standard
Here we take a look at the live-build.xml script.
\end_layout

\begin_layout Standard

\lyxline

\end_layout

\begin_layout LyX-Code

\family roman
\series bold
live-build.xml
\family default
\series default

\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset


\series bold
01 <?xml version="1.0" ?>
\end_layout

\begin_layout LyX-Code

\series bold
02 
\end_layout

\begin_layout LyX-Code

\series bold
03 <project name="kazaam-sitetpl"
\end_layout

\begin_layout LyX-Code

\series bold
04          default="finished" basedir=".">
\end_layout

\begin_layout LyX-Code

\series bold
05
\end_layout

\begin_layout LyX-Code

\series bold
06 <target name="t1">
\end_layout

\begin_layout LyX-Code

\series bold
07   <echo>Copying kazaam-sitetpl intermediate files
\end_layout

\begin_layout LyX-Code

\series bold
08           to live directory...
\end_layout

\begin_layout LyX-Code

\series bold
09   </echo>
\end_layout

\begin_layout LyX-Code

\series bold
10 
\end_layout

\begin_layout LyX-Code

\series bold
11   <echo>Except the following files:
\end_layout

\begin_layout LyX-Code

\series bold
12 /shared/incs/domain.* files...
\end_layout

\begin_layout LyX-Code

\series bold
13 /shared-host/incs/*.* symbolic link files...
\end_layout

\begin_layout LyX-Code

\series bold
14   </echo>
\end_layout

\begin_layout LyX-Code

\series bold
15 
\end_layout

\begin_layout LyX-Code

\series bold
16   <echo>Please wait.
 This could take some time
\end_layout

\begin_layout LyX-Code

\series bold
17   </echo>
\end_layout

\begin_layout LyX-Code

\series bold
18 
\end_layout

\begin_layout LyX-Code

\series bold
19   <copy todir="../../live/kazaam-sitetpl"
\end_layout

\begin_layout LyX-Code

\series bold
20         overwrite="true">
\end_layout

\begin_layout LyX-Code

\series bold
21 
\end_layout

\begin_layout LyX-Code

\series bold
22     <!-- Fileset for all files to be copied -->
\end_layout

\begin_layout LyX-Code

\series bold
23     <fileset dir=".">
\end_layout

\begin_layout LyX-Code

\series bold
24       <include name="**" />
\end_layout

\begin_layout LyX-Code

\series bold
25
\end_layout

\begin_layout LyX-Code

\series bold
26       <!-- don't overwrite domain.* files -->
\end_layout

\begin_layout LyX-Code

\series bold
27       <!-- each website's code branch has it's own domain.* files
\end_layout

\begin_layout LyX-Code

\series bold
28            with specific settings -->
\end_layout

\begin_layout LyX-Code

\series bold
29       <exclude name="**/domain.*" />
\end_layout

\begin_layout LyX-Code

\series bold
30 
\end_layout

\begin_layout LyX-Code

\series bold
31       <!-- do not copy these directories for now -->
\end_layout

\begin_layout LyX-Code

\series bold
32       <!-- shared-host contains symbolic link files
\end_layout

\begin_layout LyX-Code

\series bold
33            so we don't want to overwrite them with REAL files -->
\end_layout

\begin_layout LyX-Code

\series bold
34       <exclude name="**/shared-host/**" />
\end_layout

\begin_layout LyX-Code

\series bold
35 
\end_layout

\begin_layout LyX-Code

\series bold
36       <exclude name="**/new-ext-module/**" />
\end_layout

\begin_layout LyX-Code

\series bold
37       <exclude name="**/new-module/**" />
\end_layout

\begin_layout LyX-Code

\series bold
38       <exclude name="**/website-docs/" />
\end_layout

\begin_layout LyX-Code

\series bold
39       <exclude name="**/tmp-backups/" />
\end_layout

\begin_layout LyX-Code

\series bold
40
\end_layout

\begin_layout LyX-Code

\series bold
41       <!-- do not copy any of these files
\end_layout

\begin_layout LyX-Code

\series bold
42            to the live directory -->
\end_layout

\begin_layout LyX-Code

\series bold
43       <exclude name="**/*.BASH" />
\end_layout

\begin_layout LyX-Code

\series bold
44       <exclude name="**/*.NOTES" />
\end_layout

\begin_layout LyX-Code

\series bold
45       <exclude name="**/robots.*" />
\end_layout

\begin_layout LyX-Code

\series bold
46       <exclude name="**/*.bak" />
\end_layout

\begin_layout LyX-Code

\series bold
47       <exclude name="**/*.xml" />
\end_layout

\begin_layout LyX-Code

\series bold
48
\end_layout

\begin_layout LyX-Code

\series bold
49     </fileset>
\end_layout

\begin_layout LyX-Code

\series bold
50   </copy>
\end_layout

\begin_layout LyX-Code

\series bold
51 </target>
\end_layout

\begin_layout LyX-Code

\series bold
52
\end_layout

\begin_layout LyX-Code

\series bold
53 <target name="finished" depends="t1">
\end_layout

\begin_layout LyX-Code

\series bold
54   <echo msg="All intermediate files copied
\end_layout

\begin_layout LyX-Code

\series bold
55 to live directory OK!" />
\end_layout

\begin_layout LyX-Code

\series bold
56 </target>
\end_layout

\begin_layout LyX-Code

\series bold
57
\end_layout

\begin_layout LyX-Code

\series bold
58 </project>
\end_layout

\begin_layout Standard

\lyxline

\end_layout

\begin_layout Subsubsection
How live-build.xml works
\end_layout

\begin_layout Standard
Here we look at some important lines of code in this script.
\end_layout

\begin_layout Description
line
\begin_inset space ~
\end_inset

01 declares the document type as xml version one.
\end_layout

\begin_layout Description
lines
\begin_inset space ~
\end_inset

03
\begin_inset space ~
\end_inset

-
\begin_inset space ~
\end_inset

04 This is the start of the PHING script.
\end_layout

\begin_layout Description
line
\begin_inset space ~
\end_inset

06 is the start of target 
\series bold
\emph on
t1.
\end_layout

\begin_layout Description
lines
\begin_inset space ~
\end_inset

07
\begin_inset space ~
\end_inset

-
\begin_inset space ~
\end_inset

09 output an information message about the script.
\end_layout

\begin_layout Description
lines
\begin_inset space ~
\end_inset

11
\begin_inset space ~
\end_inset

-
\begin_inset space ~
\end_inset

14 output a message saying which files are NOT being copied.
\end_layout

\begin_layout Description
lines
\begin_inset space ~
\end_inset

16
\begin_inset space ~
\end_inset

-
\begin_inset space ~
\end_inset

17 output an information message about the script.
\end_layout

\begin_layout Description
line
\begin_inset space ~
\end_inset

19 sets the directory destination where the files will be copied to.
\end_layout

\begin_layout Description
line
\begin_inset space ~
\end_inset

20 overwrites any existing directories or files while copying.
\end_layout

\begin_layout Description
line
\begin_inset space ~
\end_inset

23 sets the source directory to copy from.
\end_layout

\begin_layout Description
line
\begin_inset space ~
\end_inset

24 copies all directories & files from the source directory.
\end_layout

\begin_layout Description
line
\begin_inset space ~
\end_inset

29 does not copy any files matching this pattern.
\end_layout

\begin_layout Description
line
\begin_inset space ~
\end_inset

34 does not copy anything from the directory matching this pattern.
\end_layout

\begin_layout Description
lines
\begin_inset space ~
\end_inset

36
\begin_inset space ~
\end_inset

-
\begin_inset space ~
\end_inset

39 does not copy anything from the directories matching these patterns.
\end_layout

\begin_layout Description
lines
\begin_inset space ~
\end_inset

43
\begin_inset space ~
\end_inset

-
\begin_inset space ~
\end_inset

47 does not copy any files matching these patterns.
\end_layout

\begin_layout Description
line
\begin_inset space ~
\end_inset

51 is the end of target 
\series bold
\emph on
t1.
\end_layout

\begin_layout Description
lines
\begin_inset space ~
\end_inset

53
\begin_inset space ~
\end_inset

-
\begin_inset space ~
\end_inset

56 target 
\series bold
\emph on
finished
\series default
\emph default
 outputs a message saying the 
\emph on
intermediate
\emph default
 code for this website has been copied to the 
\emph on
live
\emph default
 code branch ok.
\end_layout

\begin_layout Standard

\lyxline

\end_layout

\begin_layout Subsection
live-delete.xml
\end_layout

\begin_layout Standard
Only use this script to clean up the contents of the 
\emph on
live
\emph default
 directory for a particular website 
\series bold
\emph on
Before
\series default
\emph default
 the website has gone live.
\begin_inset Newline newline
\end_inset


\series bold

\begin_inset Newline newline
\end_inset

WARNING: Running this script on a live operational website is NOT RECOMMENDED.
 It will delete all of the website, except for the domain.conf.php and robots.txt
 files, and symbolic link files in shared-host!
\begin_inset Newline newline
\end_inset


\end_layout

\begin_layout Subsubsection
Structure of live-delete.xml
\end_layout

\begin_layout Standard
Here we take a look at the live-delete.xml script.
\end_layout

\begin_layout Standard

\lyxline

\end_layout

\begin_layout LyX-Code

\family roman
\series bold
live-delete.xml
\family default
\series default

\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset


\series bold
01 <?xml version="1.0" ?>
\end_layout

\begin_layout LyX-Code

\series bold
02
\end_layout

\begin_layout LyX-Code

\series bold
03 <project name="kazaam-sitetpl"
\end_layout

\begin_layout LyX-Code

\series bold
04          default="finished" basedir=".">
\end_layout

\begin_layout LyX-Code

\series bold
05
\end_layout

\begin_layout LyX-Code

\series bold
06 <target name="t1">
\end_layout

\begin_layout LyX-Code

\series bold
07   <echo>Deleting all files in kazaam-sitetpl
\end_layout

\begin_layout LyX-Code

\series bold
08           live directory...
\end_layout

\begin_layout LyX-Code

\series bold
09   </echo>
\end_layout

\begin_layout LyX-Code

\series bold
10
\end_layout

\begin_layout LyX-Code

\series bold
11   <echo>Except the following files:
\end_layout

\begin_layout LyX-Code

\series bold
12 /shared/incs/domain.* files...
\end_layout

\begin_layout LyX-Code

\series bold
13 /shared-host/incs/*.* symbolic link files...
\end_layout

\begin_layout LyX-Code

\series bold
14   </echo>
\end_layout

\begin_layout LyX-Code

\series bold
15
\end_layout

\begin_layout LyX-Code

\series bold
16   <echo>Please wait.
 This could take some time
\end_layout

\begin_layout LyX-Code

\series bold
17   </echo>
\end_layout

\begin_layout LyX-Code

\series bold
18
\end_layout

\begin_layout LyX-Code

\series bold
19   <delete includeemptydirs="true">
\end_layout

\begin_layout LyX-Code

\series bold
20     <!-- Fileset for all files to be deleted -->
\end_layout

\begin_layout LyX-Code

\series bold
21     <fileset dir="../../live/kazaam-sitetpl">
\end_layout

\begin_layout LyX-Code

\series bold
22       <include name="**" />
\end_layout

\begin_layout LyX-Code

\series bold
23
\end_layout

\begin_layout LyX-Code

\series bold
24       <!-- do not delete domain.* files -->
\end_layout

\begin_layout LyX-Code

\series bold
25       <!-- each website's code branch has it's own domain.* files
\end_layout

\begin_layout LyX-Code

\series bold
26            with specific settings -->
\end_layout

\begin_layout LyX-Code

\series bold
27       <exclude name="**/domain.*" />
\end_layout

\begin_layout LyX-Code

\series bold
28       <exclude name="**/tmp-backups/domain.*" />
\end_layout

\begin_layout LyX-Code

\series bold
29
\end_layout

\begin_layout LyX-Code

\series bold
30       <!-- also do not delete these directories -->
\end_layout

\begin_layout LyX-Code

\series bold
31       <!-- this directory contains symbolic links that are needed -->
\end_layout

\begin_layout LyX-Code

\series bold
32       <exclude name="**/shared-host/**" />
\end_layout

\begin_layout LyX-Code

\series bold
33
\end_layout

\begin_layout LyX-Code

\series bold
34       <!-- do not delete any of these files -->
\end_layout

\begin_layout LyX-Code

\series bold
35       <exclude name="**/robots.*" />
\end_layout

\begin_layout LyX-Code

\series bold
36       <exclude name="**/tmp-backups/robots.*" />
\end_layout

\begin_layout LyX-Code

\series bold
37
\end_layout

\begin_layout LyX-Code

\series bold
38     </fileset>
\end_layout

\begin_layout LyX-Code

\series bold
39   </delete>
\end_layout

\begin_layout LyX-Code

\series bold
40 </target>
\end_layout

\begin_layout LyX-Code

\series bold
41
\end_layout

\begin_layout LyX-Code

\series bold
42 <target name="finished" depends="t1">
\end_layout

\begin_layout LyX-Code

\series bold
43   <echo msg="All files in kazaam-sitetpl
\end_layout

\begin_layout LyX-Code

\series bold
44 live directory deleted OK!" />
\end_layout

\begin_layout LyX-Code

\series bold
45 </target>
\end_layout

\begin_layout LyX-Code

\series bold
46
\end_layout

\begin_layout LyX-Code

\series bold
47 </project>
\end_layout

\begin_layout Standard

\lyxline

\end_layout

\begin_layout Subsubsection
How live-delete.xml works
\end_layout

\begin_layout Standard
Here we look at some important lines of code in this script.
\end_layout

\begin_layout Description
line
\begin_inset space ~
\end_inset

01 declares the document type as xml version one.
\end_layout

\begin_layout Description
lines
\begin_inset space ~
\end_inset

03
\begin_inset space ~
\end_inset

-
\begin_inset space ~
\end_inset

04 This is the start of the PHING script.
\end_layout

\begin_layout Description
line
\begin_inset space ~
\end_inset

06 is the start of target 
\series bold
\emph on
t1.
\end_layout

\begin_layout Description
lines
\begin_inset space ~
\end_inset

07
\begin_inset space ~
\end_inset

-
\begin_inset space ~
\end_inset

09 output an information message about the script.
\end_layout

\begin_layout Description
lines
\begin_inset space ~
\end_inset

11
\begin_inset space ~
\end_inset

-
\begin_inset space ~
\end_inset

14 output a message saying which files are NOT being deleted.
\end_layout

\begin_layout Description
lines
\begin_inset space ~
\end_inset

16
\begin_inset space ~
\end_inset

-
\begin_inset space ~
\end_inset

17 output an information message about the script.
\end_layout

\begin_layout Description
line
\begin_inset space ~
\end_inset

19 is the start of the <delete> task.
 It also removes empty directories from the target directory.
 
\end_layout

\begin_layout Description
line
\begin_inset space ~
\end_inset

21 sets the target directory to delete contents from.
\end_layout

\begin_layout Description
line
\begin_inset space ~
\end_inset

22 deletes all directories and files from the target directory.
\end_layout

\begin_layout Description
lines
\begin_inset space ~
\end_inset

27
\begin_inset space ~
\end_inset

-
\begin_inset space ~
\end_inset

28 does not delete any files matching this pattern from the target directory.
\end_layout

\begin_layout Description
line
\begin_inset space ~
\end_inset

32 does not delete anything from the sub-directory matching this pattern
 in the target directory.
\end_layout

\begin_layout Description
lines
\begin_inset space ~
\end_inset

35
\begin_inset space ~
\end_inset

-
\begin_inset space ~
\end_inset

36 do not delete the robots.* files from the 
\emph on
live 
\emph default
code branch for this website.
\end_layout

\begin_layout Description
line
\begin_inset space ~
\end_inset

40 is the end of target 
\series bold
\emph on
t1.
\end_layout

\begin_layout Description
lines
\begin_inset space ~
\end_inset

42
\begin_inset space ~
\end_inset

-
\begin_inset space ~
\end_inset

45 target 
\series bold
\emph on
finished
\series default
\emph default
 outputs a message saying all files in the 
\emph on
live
\emph default
 code branch for this website have been deleted ok.
\end_layout

\begin_layout Standard

\lyxline

\end_layout

\begin_layout Section
Kazaam Tutorials Part 1
\end_layout

\begin_layout Subsection
Chapter Overview
\end_layout

\begin_layout Standard
Having looked at how the PHING build scripts work, this chapter now looks
 at using the PHING scripts to:
\end_layout

\begin_layout Itemize
create a new website
\end_layout

\begin_layout Itemize
create a new module for a website
\end_layout

\begin_layout Itemize
copy a website to the 
\emph on
intermediate
\emph default
 code branch
\end_layout

\begin_layout Itemize
copy a website to the 
\emph on
live
\emph default
 code branch
\end_layout

\begin_layout Subsection
Creating a new website
\end_layout

\begin_layout Standard

\series bold
cd
\series default
 to the root of the 
\emph on
develop
\emph default
 directory.
 It should look something like this:
\begin_inset Newline newline
\end_inset


\end_layout

\begin_layout Standard
\begin_inset Box Frameless
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
status open

\begin_layout LyX-Code

\series bold
develop
\end_layout

\begin_layout LyX-Code

\series bold
├── karsites
\end_layout

\begin_layout LyX-Code

\series bold
├── kazaam-sitetpl   <- website template
\end_layout

\begin_layout LyX-Code

\series bold
├── php-debuggers
\end_layout

\begin_layout LyX-Code

\series bold
├── raised-from-the-dead
\end_layout

\begin_layout LyX-Code

\series bold
└── create-new-website.xml
\end_layout

\end_inset


\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

Now run the PHING script 
\emph on
create-new-website.xml
\emph default
 :
\begin_inset Newline newline
\end_inset


\lyxline

\end_layout

\begin_layout LyX-Code

\series bold
[root@karsites develop]# phing -f create-new-website.xml
\begin_inset Newline newline
\end_inset

Buildfile: /kazaam-mwf/develop/create-new-website.xml
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

Create new website > t1:
\end_layout

\begin_layout LyX-Code

\series bold
[echo]
\end_layout

\begin_layout LyX-Code

\series bold
Please enter name of new website: first-site
\end_layout

\begin_layout LyX-Code

\series bold
[echo] Creating new kazaam 'first-site' website
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

Create new website > t2:
\begin_inset Newline newline
\end_inset

[echo] Copying kazaam-sitetpl website template to new 'first-site'
\begin_inset Newline newline
\end_inset

       website directory...
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

[echo]
\begin_inset Newline newline
\end_inset

[echo] Please wait.
 This could take some time...
\begin_inset Newline newline
\end_inset

[echo]
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

[copy] Copying 861 files to /kazaam-mwf/develop/first-site
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

[copy] Copied 28 empty directories to
\begin_inset Newline newline
\end_inset

       /kazaam-mwf/develop/first-site
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset


\end_layout

\begin_layout LyX-Code

\series bold
Create new website > t3:
\begin_inset Newline newline
\end_inset

[echo] replacing 'kazaam-sitetpl' text with 'first-site'
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

[reflexive] Applying reflexive processing to 861 files.
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

Create new website > t4:
\begin_inset Newline newline
\end_inset

[echo] New kazaam website 'first-site' created OK!
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

Create new website > t5:
\begin_inset Newline newline
\end_inset

[echo] Copying domain.conf.php files to new
\end_layout

\begin_layout LyX-Code

\series bold
       'intermediate/first-site/shared/incs/' directory...
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

[copy] Copying 4 files to
\begin_inset Newline newline
\end_inset

       /kazaam-mwf/intermediate/first-site/shared/incs
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

Create new website > t6:
\begin_inset Newline newline
\end_inset

[echo] replacing 'develop' text with 'intermediate'
\begin_inset Newline newline
\end_inset

[echo] replacing 'DEVELOPMENT' text with 'INTERMEDIATE'
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

[reflexive] Applying reflexive processing to 4 files.
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

Create new website > t7:
\begin_inset Newline newline
\end_inset

[echo] Copying domain.conf.php files to new
\begin_inset Newline newline
\end_inset

       'live/first-site/shared/incs/' directory...
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

[copy] Copying 4 files to
\begin_inset Newline newline
\end_inset

       /kazaam-mwf/live/first-site/shared/incs
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

Create new website > t8:
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

[echo] replacing 'develop' text with 'live'
\begin_inset Newline newline
\end_inset

[echo] replacing 'DEVELOPMENT' text with 'LIVE'
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

[reflexive] Applying reflexive processing to 4 files.
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

Create new website > finished:
\begin_inset Newline newline
\end_inset

[echo] New kazaam website 'first-site' created OK!
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

[echo] intermediate directory for new kazaam website 'first-site'
\begin_inset Newline newline
\end_inset

       created OK!
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

[echo] live directory for new kazaam website 'first-site'
\begin_inset Newline newline
\end_inset

       created OK!
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

BUILD FINISHED
\end_layout

\begin_layout LyX-Code

\series bold
Total time: 49.9379 seconds
\begin_inset Newline newline
\end_inset


\series default

\begin_inset VSpace defskip
\end_inset


\end_layout

\begin_layout Standard

\lyxline

\begin_inset VSpace defskip
\end_inset

If we do a directory listing, we should now have a new website in the 
\emph on
develop
\emph default
 directory, called 
\series bold
first-site
\series default
.
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset


\begin_inset Box Frameless
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
status open

\begin_layout LyX-Code

\series bold
develop
\end_layout

\begin_layout LyX-Code

\series bold
├── first-site
\end_layout

\begin_layout LyX-Code

\series bold
├── karsites
\end_layout

\begin_layout LyX-Code

\series bold
├── kazaam-sitetpl   <- website template
\end_layout

\begin_layout LyX-Code

\series bold
├── php-debuggers
\end_layout

\begin_layout LyX-Code

\series bold
├── raised-from-the-dead
\end_layout

\begin_layout LyX-Code

\series bold
└── create-new-website.xml
\end_layout

\end_inset


\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

We can check this out by opening a web browser, and going to:
\end_layout

\begin_layout Standard

\family typewriter
\series bold
\emph on
http://localhost/kazaam-mwf/develop/first-site/
\end_layout

\begin_layout Standard

\family typewriter
\series bold
\emph on
home/anyuser/home.php
\begin_inset Newline newline
\end_inset


\family default
\series default
\emph default
You should now see the homepage for the new site you have just created.
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

Before we go any further, we need to change the site-logo, so we know which
 website we are working on.
 Look under
\begin_inset Newline newline
\end_inset


\emph on
/kazaam-mwf/framework-docs/tutorials/website-images, 
\emph default
and you will find a file called 
\emph on
first-site-logo-1.jpg .
 
\emph default
Copy this file into the:
\begin_inset Newline newline
\end_inset


\emph on
/kazaam-mwf/develop/first-site/shared/images/ 
\emph default
directory.
 Now copy this file again to overwrite the
\emph on
 site-logo 
\emph default
image file in the same directory.
 If you reload the page, you should now see a different yellow-colored site
 banner, with the text 'first-site' on it.
 If the new 
\emph on
site-logo
\emph default
 does not appear, you may need to clear your browser cache and reload the
 page again, to force the browser to load the new 
\emph on
site-logo
\emph default
 banner.
\end_layout

\begin_layout Subsection
Creating a new module
\end_layout

\begin_layout Standard
Now we have created a new website, we can extended it by adding new modules
 to it.
 
\series bold
cd
\series default
 to the 
\series bold
\emph on
first-site
\series default
\emph default
 directory, in the 
\emph on
develop
\emph default
 directory.
 It should look like this:
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset


\begin_inset Box Frameless
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
status open

\begin_layout LyX-Code

\series bold
first-site
\end_layout

\begin_layout LyX-Code

\series bold
├── fedora-services
\end_layout

\begin_layout LyX-Code

\series bold
├── home
\end_layout

\begin_layout LyX-Code

\series bold
├── module-example1
\end_layout

\begin_layout LyX-Code

\series bold
├── module-example2
\end_layout

\begin_layout LyX-Code

\series bold
├── module-example3
\end_layout

\begin_layout LyX-Code

\series bold
├── new-ext-module  <- module template
\end_layout

\begin_layout LyX-Code

\series bold
├── new-module      <- module template
\end_layout

\begin_layout LyX-Code

\series bold
├── shared
\end_layout

\begin_layout LyX-Code

\series bold
├── shared-host
\end_layout

\begin_layout LyX-Code

\series bold
├── tmp-backups
\end_layout

\begin_layout LyX-Code

\series bold
├── website-docs
\end_layout

\begin_layout LyX-Code

\series bold
├── create-new-ext-module.xml
\end_layout

\begin_layout LyX-Code

\series bold
├── create-new-module.xml
\end_layout

\begin_layout LyX-Code

\series bold
├── int-build.xml
\end_layout

\begin_layout LyX-Code

\series bold
├── int-delete.xml
\end_layout

\begin_layout LyX-Code

\series bold
├── live-build.xml
\end_layout

\begin_layout LyX-Code

\series bold
├── live-delete.xml
\end_layout

\begin_layout LyX-Code

\series bold
└── robots.txt
\begin_inset Newline newline
\end_inset


\end_layout

\end_inset


\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

We want to create a new module named 
\emph on
'sports-cars'
\emph default
 to keep details of some high performance sports cars we are interested
 in.
 So lets run the PHING script 
\emph on
create-new-module.xml
\emph default
 :
\begin_inset Newline newline
\end_inset


\lyxline

\end_layout

\begin_layout LyX-Code

\series bold
[root@karsites first-site]# phing -f create-new-module.xml
\begin_inset Newline newline
\end_inset

Buildfile: /kazaam-mwf/develop/first-site/create-new-module.xml
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

Create new website module > get-module-name:
\end_layout

\begin_layout LyX-Code

\series bold
Please enter new module name: sports-cars
\begin_inset Newline newline
\end_inset

[echo] Creating new kazaam 'sports-cars' module
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset


\end_layout

\begin_layout LyX-Code

\series bold
Create new website module > copy-module-files:
\begin_inset Newline newline
\end_inset

[echo] Copying files to 'sports-cars' module directory...
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

[copy] Copying 78 files to
\begin_inset Newline newline
\end_inset

        /kazaam-mwf/develop/first-site/sports-cars
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

[copy] Copied 4 empty directories to
\begin_inset Newline newline
\end_inset

        /kazaam-mwf/develop/first-site/sports-cars
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

[move] Copying 1 file to
\begin_inset Newline newline
\end_inset

        /kazaam-mwf/develop/first-site/sports-cars
\begin_inset Newline newline
\end_inset

        /anyuser
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

[move] Copying 1 file to
\begin_inset Newline newline
\end_inset

        /kazaam-mwf/develop/first-site/sports-cars
\begin_inset Newline newline
\end_inset

        /anyuser
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

[move] Copying 1 file to
\begin_inset Newline newline
\end_inset

        /kazaam-mwf/develop/first-site/sports-cars
\begin_inset Newline newline
\end_inset

        /anyuser/tmp-backups
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

[move] Copying 1 file to
\begin_inset Newline newline
\end_inset

        /kazaam-mwf/develop/first-site/sports-cars
\begin_inset Newline newline
\end_inset

        /anyuser/tmp-backups
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

[move] Copying 1 file to
\begin_inset Newline newline
\end_inset

       /kazaam-mwf/develop/first-site/sports-cars
\begin_inset Newline newline
\end_inset

       /local/incs
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

[move] Copying 1 file to
\begin_inset Newline newline
\end_inset

       /kazaam-mwf/develop/first-site/sports-cars
\begin_inset Newline newline
\end_inset

       /local/incs
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

[move] Copying 1 file to
\begin_inset Newline newline
\end_inset

        /kazaam-mwf/develop/first-site/sports-cars
\begin_inset Newline newline
\end_inset

        /local/incs/tmp-backups
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

[move] Copying 1 file to
\begin_inset Newline newline
\end_inset

        /kazaam-mwf/develop/first-site/sports-cars
\begin_inset Newline newline
\end_inset

        /local/incs/tmp-backups
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

[move] Copying 1 file to
\begin_inset Newline newline
\end_inset

        /kazaam-mwf/develop/first-site/sports-cars
\begin_inset Newline newline
\end_inset

        /local/incs/mod
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

[move] Copying 1 file to
\begin_inset Newline newline
\end_inset

        /kazaam-mwf/develop/first-site/sports-cars
\begin_inset Newline newline
\end_inset

        /local/incs/mod
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

[move] Copying 1 file to
\begin_inset Newline newline
\end_inset

        /kazaam-mwf/develop/first-site/sports-cars
\begin_inset Newline newline
\end_inset

        /local/incs/mod/tmp-backups
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

[move] Copying 1 file to
\begin_inset Newline newline
\end_inset

        /kazaam-mwf/develop/first-site/sports-cars
\begin_inset Newline newline
\end_inset

        /local/incs/mod/tmp-backups
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

[move] Copying 1 file to
\begin_inset Newline newline
\end_inset

        /kazaam-mwf/develop/first-site/sports-cars
\begin_inset Newline newline
\end_inset

        /local/incs/mod
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

[move] Copying 1 file to
\begin_inset Newline newline
\end_inset

        /kazaam-mwf/develop/first-site/sports-cars
\begin_inset Newline newline
\end_inset

        /local/incs/mod
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

[move] Copying 1 file to
\begin_inset Newline newline
\end_inset

        /kazaam-mwf/develop/first-site/sports-cars
\begin_inset Newline newline
\end_inset

        /local/incs/mod/tmp-backups
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

[move] Copying 1 file to
\begin_inset Newline newline
\end_inset

        /kazaam-mwf/develop/first-site/sports-cars
\begin_inset Newline newline
\end_inset

        /local/incs/mod/tmp-backups
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

Create new website module > clean-up:
\begin_inset Newline newline
\end_inset

[echo] Cleaning up unnecessary template files
\begin_inset Newline newline
\end_inset

[delete] Deleting 16 files from sports-cars
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

Create new website module > replace-module-text:
\begin_inset Newline newline
\end_inset

[echo] replacing 'new-module' text with 'sports-cars'
\begin_inset Newline newline
\end_inset

[echo] replacing 'New Module' text with 'sports-cars'
\begin_inset Newline newline
\end_inset

[reflexive] Applying reflexive processing to 78 files.
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

Create new website module > module-created:
\begin_inset Newline newline
\end_inset

[echo] New kazaam module 'sports-cars' created OK!
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

Create new website module > create-meta-menu:
\begin_inset Newline newline
\end_inset

[echo]
\begin_inset Newline newline
\end_inset

[echo] Creating meta-menu for new kazaam module 'sports-cars'
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

Create new website module > copy-meta-menu-files:
\begin_inset Newline newline
\end_inset

[echo] Copying 'new-module.php' (meta-menu template files)
\begin_inset Newline newline
\end_inset

        to 'sports-cars.php'
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

[copy] Copying 1 file to
\begin_inset Newline newline
\end_inset

        /kazaam-mwf/develop/first-site
\begin_inset Newline newline
\end_inset

        /shared/meta-menus
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

[copy] Copying 1 file to
\begin_inset Newline newline
\end_inset

        /kazaam-mwf/develop/first-site
\begin_inset Newline newline
\end_inset

        /shared/meta-menus
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

[copy] Copying 1 file to
\begin_inset Newline newline
\end_inset

        /kazaam-mwf/develop/first-site
\begin_inset Newline newline
\end_inset

        /shared/meta-menus/tmp-backups
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

[copy] Copying 1 file to
\begin_inset Newline newline
\end_inset

        /kazaam-mwf/develop/first-site
\begin_inset Newline newline
\end_inset

        /shared/meta-menus/tmp-backups
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

Create new website module > replace-meta-menu-text:
\begin_inset Newline newline
\end_inset

[echo] replacing 'new-module' text with 'sports-cars'
\begin_inset Newline newline
\end_inset

[echo] replacing 'New Module' text with 'sports-cars'
\begin_inset Newline newline
\end_inset

[reflexive] Applying reflexive processing to 4 files.
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

Create new website module > meta-menu-created:
\begin_inset Newline newline
\end_inset

[echo] meta-menu for new kazaam module 'sports-cars' created OK!
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

BUILD FINISHED
\begin_inset Newline newline
\end_inset

Total time: 9.2949 seconds
\begin_inset Newline newline
\end_inset


\series default

\begin_inset VSpace defskip
\end_inset


\end_layout

\begin_layout Standard

\lyxline

\begin_inset VSpace defskip
\end_inset

If we do a directory listing, we should now have a new module in the 
\emph on
first-site 
\emph default
website directory, called 
\series bold
sports-cars
\series default
:
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset


\begin_inset Box Frameless
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
status open

\begin_layout LyX-Code

\series bold
first-site
\end_layout

\begin_layout LyX-Code

\series bold
├── fedora-services
\end_layout

\begin_layout LyX-Code

\series bold
├── home
\end_layout

\begin_layout LyX-Code

\series bold
├── module-example1
\end_layout

\begin_layout LyX-Code

\series bold
├── module-example2
\end_layout

\begin_layout LyX-Code

\series bold
├── module-example3
\end_layout

\begin_layout LyX-Code

\series bold
├── new-ext-module
\end_layout

\begin_layout LyX-Code

\series bold
├── new-module
\end_layout

\begin_layout LyX-Code

\series bold
├── shared
\end_layout

\begin_layout LyX-Code

\series bold
├── shared-host
\end_layout

\begin_layout LyX-Code

\series bold
├── sports-cars   <- new website module
\end_layout

\begin_layout LyX-Code

\series bold
├── tmp-backups
\end_layout

\begin_layout LyX-Code

\series bold
├── website-docs
\end_layout

\begin_layout LyX-Code

\series bold
├── create-new-ext-module.xml
\end_layout

\begin_layout LyX-Code

\series bold
├── create-new-module.xml
\end_layout

\begin_layout LyX-Code

\series bold
├── int-build.xml
\end_layout

\begin_layout LyX-Code

\series bold
├── int-delete.xml
\end_layout

\begin_layout LyX-Code

\series bold
├── live-build.xml
\end_layout

\begin_layout LyX-Code

\series bold
├── live-delete.xml
\end_layout

\begin_layout LyX-Code

\series bold
└── robots.txt
\begin_inset Newline newline
\end_inset


\end_layout

\end_inset


\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

Now we have created a new module, we can access the module by
\begin_inset Newline newline
\end_inset

'plugging it into' the website in two different ways.
 We can:
\end_layout

\begin_layout Description
1 add the 
\emph on
sports-cars
\emph default
 meta-menu to the website's homepage menu that
\begin_inset Newline newline
\end_inset

appears in the left-hand colum of all 2 or 3 column pages;
\end_layout

\begin_layout Description
2 or add a link to the 
\emph on
sports-cars
\emph default
 module's homepage, into an existing
\begin_inset Newline newline
\end_inset

meta-menu of the website's homepage menu.
\end_layout

\begin_layout Subsubsection
Adding the sports-cars meta-menu
\end_layout

\begin_layout Standard
To add the sports-cars meta-menu to the website's homepage menu open:
\begin_inset Newline newline
\end_inset


\emph on
/develop/first-site/shared/incs/homepage-menu.php ,
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset


\emph default
and add the following line to the top of the file:
\end_layout

\begin_layout LyX-Code

\series bold
<?php require "$SHARED_META_MENUS/sports-cars.php"; ?>
\end_layout

\begin_layout LyX-Code
\begin_inset VSpace defskip
\end_inset


\end_layout

\begin_layout Standard
Save the file and reload the 
\emph on
first-site
\emph default
 homepage.
 You should now see the 
\emph on
sports-cars
\emph default
 meta-menu added at the top of the other meta-menu items in the left-hand
 column homepage menu.
 This is OK for a module that only links to a few pages.
 Clicking on any of the links in the 
\emph on
sports-cars
\emph default
 meta-menu will take you to that particular page template.
 You will then be presented with that page template, and the module's own
 custom left-hand menu, in place of the homepage menu you have just come
 from.
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

NB.
 A module's custom left-hand column menu is 
\emph on
not
\emph default
 the same as the module's meta-menu.
 You should prefer the module's custom left-hand menu over the meta-menu,
 as it is more flexible and extendable, and will go with the module when
 you copy a module from one website to another website.
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

As our collection of sports-cars could grow considerably, we will opt to
 use the module's own custom left-hand column menu, instead of the homepage
 menu, and we will put one link on the homepage menu to the 
\emph on
sports-cars.php
\emph default
 module's homepage.
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

Lets now remove the sports-cars meta-menu from the homepage-menu:
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

Restore
\begin_inset space ~
\end_inset


\emph on
 /develop/first-site/shared/incs/homepage-menu.php
\begin_inset Newline newline
\end_inset


\emph default
to what it was like before adding the:
\end_layout

\begin_layout LyX-Code

\series bold
<?php require "$SHARED_META_MENUS/sports-cars.php"; ?>
\end_layout

\begin_layout LyX-Code
\begin_inset VSpace defskip
\end_inset


\end_layout

\begin_layout Standard
line to it, and reload the first-site homepage.
 The sports-cars meta-menu should be gone now.
\end_layout

\begin_layout Subsubsection
Adding a single link to the sports-cars.php homepage
\end_layout

\begin_layout Standard
Another way of adding the 
\emph on
sports-cars
\emph default
 module to the website is to link
\begin_inset Newline newline
\end_inset

directly to the module's homepage, in:
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset


\emph on
/develop/first-site/sports-cars/anyuser/sports-cars.php .
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset


\emph default
This will only use one link on the homepage menu.
 This link can be added to an existing meta-menu in:
\begin_inset Newline newline
\end_inset


\emph on
/develop/first-site/shared/meta-menus/ .
\begin_inset Newline newline
\end_inset


\emph default

\begin_inset Newline newline
\end_inset

Lets add a link from the 'Module Example1' meta-menu (fourth one down from
 the top of the homepage menu), to the 
\emph on
sports-cars
\emph default
 module's homepage.
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

Open 
\emph on
/develop/first-site/shared/meta-menus/module-example1.php
\begin_inset Newline newline
\end_inset


\emph default
and add the following lines of code as the first href link:
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset


\begin_inset Box Frameless
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
status open

\begin_layout Plain Layout

\family typewriter
\series bold
<a
\begin_inset space ~
\end_inset

href="<?php
\begin_inset space ~
\end_inset

echo
\begin_inset space ~
\end_inset

$WEBSITE_ROOT
\begin_inset space ~
\end_inset

?>/sports-cars/anyuser/sports-cars.php"
\begin_inset Newline newline
\end_inset


\begin_inset space ~
\end_inset

title="Some very nice sports cars!"
\begin_inset Newline newline
\end_inset

>Sports Cars</a>
\begin_inset Newline newline
\end_inset


\end_layout

\end_inset


\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

Save the file and reload the 
\emph on
first-site
\emph default
 homepage.
 You should now see the link to the 
\emph on
sports-cars
\emph default
 module's homepage as the first link in the 'Module Example1' meta-menu.
 Clicking on this link will take you to the homepage for the 
\emph on
sports-cars
\emph default
 module.
 This will load the 
\emph on
sports-cars
\emph default
 own custom navigation menu in the left-hand column, in place of the website's
 homepage menu.
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

This custom menu will be used by all pages in the 
\emph on
sports-cars
\emph default
 module.
\begin_inset Newline newline
\end_inset

You can use this menu to navigate around the default page templates, which
 we will customise shortly.
 Clicking on the title of the module's menu ('sports- cars') will take you
 back to the homepage for that module.
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

By default, the 
\emph on
create-new-module.xml
\emph default
 script creates the following page templates with integrated <
\series bold
body
\series default
> content, under the module's 
\emph on
anyuser
\emph default
 sub-dir for the particular module you have just created:
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset


\begin_inset Box Frameless
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
status open

\begin_layout LyX-Code

\series bold
anyuser
\end_layout

\begin_layout LyX-Code

\series bold
├── tmp-backups
\end_layout

\begin_layout LyX-Code

\series bold
├── 1-column-page.php
\end_layout

\begin_layout LyX-Code

\series bold
├── 2-column-page.php
\end_layout

\begin_layout LyX-Code

\series bold
├── 3-column-page.php
\end_layout

\begin_layout LyX-Code

\series bold
└── sports-cars.php
\series default

\begin_inset Newline newline
\end_inset


\end_layout

\end_inset


\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset


\end_layout

\begin_layout Subsubsection
Adding pages to the module
\end_layout

\begin_layout Standard
Now we have a new 
\emph on
sports-cars
\emph default
 module, we can use the default page templates and add some usefull content
 to this module.
 First lets add some content to the module's homepage, to tell users what
 this section of the website is all about.
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

Open 
\emph on
/develop/first-site/sports-cars/anyuser/sports-cars.php
\begin_inset Newline newline
\end_inset


\emph default
for editing.
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

In the <div id=
\begin_inset Quotes erd
\end_inset

main_window_2col
\begin_inset Quotes erd
\end_inset

> section, change the contents of the second <div class="box2"> , so it
 looks like this:
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset


\series bold

\begin_inset Box Frameless
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
status open

\begin_layout Plain Layout

\family typewriter
\series bold
<div class="box2">
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

<p>Here is a collection of really nice high performance sports cars, designed
 to be used on the public highway.
 I hope to add to this part of the website as more of these cars are found.</p>
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

</div>
\family default

\begin_inset Newline newline
\end_inset


\end_layout

\end_inset


\begin_inset Newline newline
\end_inset


\series default
Save the file and click on the title for the sports-car menu.
 The page should reload with the new contents above.
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

That should do for the sports-cars homepage.
 Now we need to add some pages with details of various sports cars.
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

Lets add 3 pages with details of the following cars:
\end_layout

\begin_layout Itemize
Audi GT3
\end_layout

\begin_layout Itemize
Corvette ZR1
\end_layout

\begin_layout Itemize
Shelby Ultimate Aero Twin Turbo (my favourite)
\end_layout

\begin_layout Standard
We will create a simple page for each sports car, showing the car's image,
 and a few details about the car.
 We'll use the 
\emph on
2-column-page.php
\emph default
 template in the 
\emph on
anyuser
\emph default
 directory as the basis for each car's page.
\begin_inset Newline newline
\end_inset


\end_layout

\begin_layout Subsubsection
creating the Audi GT3 page
\end_layout

\begin_layout Standard
We'll call this page 
\emph on
audi-GT3.php
\emph default
 .
 Copy the 
\emph on
2-column-page.php 
\emph default
template to a new file called 
\emph on
audi-GT3.php .
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset


\emph default
Open 
\emph on
/develop/first-site/sports-cars/anyuser/audi-GT3.php
\begin_inset Newline newline
\end_inset


\emph default
for editing.
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

Edit the <div id=
\begin_inset Quotes erd
\end_inset

main_window_2col
\begin_inset Quotes erd
\end_inset

> section so it looks the same as the example xhtml code in:
\begin_inset Newline newline
\end_inset


\emph on
/framework-docs/tutorials/sports-cars/Audi-GT3/audi-GT3.html .
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset


\emph default
Now copy the image file 
\emph on
audi-GT3-1.jpg 
\emph default
from the 
\emph on
Audi-GT3 
\emph default
directory to the 
\emph on
sports-cars
\emph default
 module image directory:
\begin_inset Newline newline
\end_inset


\emph on
/develop/first-site/sports-cars/local/images/
\begin_inset Newline newline
\end_inset


\emph default

\begin_inset Newline newline
\end_inset

That's the 
\emph on
audi-GT3.php
\emph default
 page contents sorted.
 Now we need to add a link from the 
\emph on
sports-cars
\emph default
 module's custom left-hand menu to the 
\emph on
audi-GT3.php
\emph default
 page.
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

Open 
\emph on
/develop/first-site/sports-cars/local/incs/mod/sports-cars-menu.php
\begin_inset Newline newline
\end_inset


\emph default
for editing.
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

As the first menu item after the end of the <span class="module_title_box">
 add this code:
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset


\begin_inset Box Frameless
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
status open

\begin_layout Plain Layout

\family typewriter
\series bold
<a
\begin_inset space ~
\end_inset

href="<?php
\begin_inset space ~
\end_inset

echo
\begin_inset space ~
\end_inset

$WEBSITE_ROOT
\begin_inset space ~
\end_inset

?>/sports-cars/anyuser/audi-GT3.php"
\begin_inset Newline newline
\end_inset


\begin_inset space ~
\end_inset

title="Audi GT3 sports car"
\begin_inset Newline newline
\end_inset

>Audi GT3</a>
\family default
\series default

\begin_inset Newline newline
\end_inset


\end_layout

\end_inset


\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

You can also delete the other menu items that refer to the 3-column,
\begin_inset Newline newline
\end_inset

2-column and single column page templates, as they are not needed now.
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

There should now be only one menu item in 
\emph on
sports-cars-menu.php
\emph default
,
\emph on

\begin_inset Newline newline
\end_inset


\emph default
a href link to the 
\emph on
audi-GT3.php 
\emph default
page, and the file should now look like this:
\begin_inset Newline newline
\end_inset


\end_layout

\begin_layout LyX-Code

\family typewriter
\series bold
<?php
\begin_inset Newline newline
\end_inset

// get the global left-side menu file
\end_layout

\begin_layout LyX-Code

\family typewriter
\series bold
// require "$SHARED_INCS/homepage-menu.php";
\begin_inset Newline newline
\end_inset

?>
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

<!-- use a customised LHS column menu instead of the
\begin_inset Newline newline
\end_inset

default one from the site homepage -->
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

<div class="internal_menu">
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

<div class="box1">
\end_layout

\begin_layout LyX-Code

\family typewriter
\series bold
<span class="module_title_box">
\end_layout

\begin_layout LyX-Code

\family typewriter
\series bold
<a href="<?php echo $WEBSITE_ROOT ?>/sports-cars/anyuser/sports-cars.php"
\end_layout

\begin_layout LyX-Code

\family typewriter
\series bold
 id="module_home_link" title="sports-cars Home"
\end_layout

\begin_layout LyX-Code

\family typewriter
\series bold
>sports-cars</a>
\end_layout

\begin_layout LyX-Code

\family typewriter
\series bold
</span>
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

<a href="<?php echo $WEBSITE_ROOT ?>/sports-cars/anyuser/audi-GT3.php"
\end_layout

\begin_layout LyX-Code

\family typewriter
\series bold
 title="Audi GT3 sports car"
\end_layout

\begin_layout LyX-Code

\family typewriter
\series bold
>Audi GT3</a>
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

</div>
\end_layout

\begin_layout LyX-Code

\family typewriter
\series bold
</div>
\end_layout

\begin_layout Standard
If we click on the title bar of the 
\emph on
sports-cars 
\emph default
menu, the homepage for this module should reload, and we should now see
 only one menu entry called 'Audi GT3' - the link to the 
\emph on
audi-GT3.php
\emph default
 page.
 Clicking on this link will take us to the page with a picture of the Audi
 GT3, and some details about the car.
 So that's the first of our three pages about high performance sports cars
 finished.
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

We can now create a page for the Corvette ZR1, and a page for the Shelby
 Ultimate Aero TT.
 We will use the 
\emph on
audi-GT3.php
\emph default
 page as a pattern for these other two cars' pages.
\end_layout

\begin_layout Subsubsection
creating the Corvette ZR1 page
\end_layout

\begin_layout Standard
We'll call this page 
\emph on
corvette-ZR1.php
\emph default
 .
 Copy the 
\emph on
audi-GT3.php 
\emph default
page to a new file called 
\emph on
corvette-ZR1.php .
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset


\emph default
Open 
\emph on
/develop/first-site/sports-cars/anyuser/corvette-ZR1.php
\begin_inset Newline newline
\end_inset


\emph default
for editing.
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

Edit the <div id=
\begin_inset Quotes erd
\end_inset

main_window_2col
\begin_inset Quotes erd
\end_inset

> section so it looks the same as the example xhtml code in:
\begin_inset Newline newline
\end_inset


\emph on
/framework-docs/tutorials/sports-cars/Corvette-ZR1/corvette-ZR1.html .
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset


\emph default
Now copy the image file 
\emph on
corvette_ZR1-1.jpg 
\emph default
from the 
\emph on
Corvette-ZR1 
\emph default
directory to the 
\emph on
sports-cars
\emph default
 module image directory:
\begin_inset Newline newline
\end_inset


\emph on
/develop/first-site/sports-cars/local/images/
\begin_inset Newline newline
\end_inset


\emph default

\begin_inset Newline newline
\end_inset

That's the 
\emph on
corvette-ZR1.php
\emph default
 page contents sorted.
 Now we need to add a link from the 
\emph on
sports-cars
\emph default
 module's custom left-hand menu to the 
\emph on
corvette-ZR1.php
\emph default
 page.
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

Open 
\emph on
/develop/first-site/sports-cars/local/incs/mod/sports-cars-menu.php
\begin_inset Newline newline
\end_inset


\emph default
for editing.
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

As the second menu item after the 
\emph on
audi-GT3.php
\emph default
 href link, add this code:
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset


\begin_inset Box Frameless
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
status open

\begin_layout Plain Layout

\family typewriter
\series bold
<a
\begin_inset space ~
\end_inset

href="<?php
\begin_inset space ~
\end_inset

echo
\begin_inset space ~
\end_inset

$WEBSITE_ROOT
\begin_inset space ~
\end_inset

?>/sports-cars/anyuser/corvette-ZR1.php"
\begin_inset Newline newline
\end_inset


\begin_inset space ~
\end_inset

title="Corvette ZR1 sports car"
\begin_inset Newline newline
\end_inset

>Corvette ZR1</a>
\family default
\series default

\begin_inset Newline newline
\end_inset


\end_layout

\end_inset


\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

After saving 
\emph on
sports-cars-menu.php
\emph default
, if we click on the title bar of the 
\emph on
sports-cars 
\emph default
menu, the homepage for this module reloads, and we should now see the second
 menu entry called 'Corvette ZR1' - the link to the 
\emph on
corvette-ZR1.php
\emph default
 page.
 Clicking on this link will take us to the page with a picture of the Corvette
 ZR1, and some details about the car.
 So that's the second of our three pages about high performance sports cars
 finished.
\end_layout

\begin_layout Subsubsection
creating the Shelby Ultimate Aero Twin Turbo page
\end_layout

\begin_layout Standard
We'll call this page 
\emph on
shelby-UA-TT.php
\emph default
 .
 Copy the 
\emph on
audi-GT3.php 
\emph default
page to a new file called 
\emph on
shelby-UA-TT.php .
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset


\emph default
Open 
\emph on
/develop/first-site/sports-cars/anyuser/shelby-UA-TT.php
\begin_inset Newline newline
\end_inset


\emph default
for editing.
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

Edit the <div id=
\begin_inset Quotes erd
\end_inset

main_window_2col
\begin_inset Quotes erd
\end_inset

> section so it looks the same as the example xhtml code in:
\begin_inset Newline newline
\end_inset


\emph on
/framework-docs/tutorials/sports-cars/Shelby-UA-TT/shelby-UA-TT.html .
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset


\emph default
Now copy the image file 
\emph on
ssc-ultimate-aero-1.jpg 
\emph default
from the 
\emph on
Shelby-UA-TT 
\emph default
directory to the 
\emph on
sports-cars
\emph default
 module image directory:
\begin_inset Newline newline
\end_inset


\emph on
/develop/first-site/sports-cars/local/images/
\begin_inset Newline newline
\end_inset


\emph default

\begin_inset Newline newline
\end_inset

That's the 
\emph on
shelby-UA-TT.php
\emph default
 page contents sorted.
 Now we need to add a link from the 
\emph on
sports-cars
\emph default
 module's custom left-hand menu to the 
\emph on
shelby-UA-TT.php
\emph default
 page.
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

Open 
\emph on
/develop/first-site/sports-cars/local/incs/mod/sports-cars-menu.php
\begin_inset Newline newline
\end_inset


\emph default
for editing.
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

As the third menu item after the 
\emph on
corvette-ZR1.php
\emph default
 href link, add this code:
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset


\begin_inset Box Frameless
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
status open

\begin_layout Plain Layout

\family typewriter
\series bold
<a
\begin_inset space ~
\end_inset

href="<?php
\begin_inset space ~
\end_inset

echo
\begin_inset space ~
\end_inset

$WEBSITE_ROOT
\begin_inset space ~
\end_inset

?>/sports-cars/anyuser/shelby-UA-TT.php"
\begin_inset Newline newline
\end_inset


\begin_inset space ~
\end_inset

title="Shelby Ultimate Aero Twin Turbo sports car"
\begin_inset Newline newline
\end_inset

>Shelby Ultimate Aero Twin Turbo</a>
\family default
\series default

\begin_inset Newline newline
\end_inset


\end_layout

\end_inset


\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

After saving 
\emph on
sports-cars-menu.php
\emph default
, if we click on the title bar of the 
\emph on
sports-cars 
\emph default
menu, the homepage for this module reloads, and we should now see the third
 menu entry called 'Shelby Ultimate Aero Twin Turbo' - the link to the 
\emph on
shelby-UA-TT.php
\emph default
 page.
 Clicking on this link will take us to the page with a picture of the Shelby
 Ultimate Aero Twin Turbo, and some details about the car.
 So that's the final page of our three pages about high performance sports
 cars finished.
\begin_inset Newline newline
\end_inset


\end_layout

\begin_layout Standard

\lyxline

\end_layout

\begin_layout Subsection
Creating a new 'external content' module
\end_layout

\begin_layout Standard
The only difference between 
\emph on
create-new-module.xml
\emph default
 and 
\emph on
create-new-ext-module.xml
\emph default
 is this latter script creates the following page templates with external
 <
\series bold
body
\series default
> content, under the module's 
\emph on
anyuser
\emph default
 sub-dir for the particular module you have just created:
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset


\begin_inset Box Frameless
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
status open

\begin_layout LyX-Code

\series bold
anyuser
\end_layout

\begin_layout LyX-Code

\series bold
├── tmp-backups
\end_layout

\begin_layout LyX-Code

\series bold
├── 1-column-ext-page.php
\end_layout

\begin_layout LyX-Code

\series bold
├── 1-column-page.cont.php
\end_layout

\begin_layout LyX-Code

\series bold
├── 2-column-ext-page.php
\end_layout

\begin_layout LyX-Code

\series bold
├── 2-column-page.cont.php
\end_layout

\begin_layout LyX-Code

\series bold
├── 3-column-ext-page.php
\end_layout

\begin_layout LyX-Code

\series bold
├── 3-column-page.cont.php
\end_layout

\begin_layout LyX-Code

\series bold
├── sports-cars2.cont.php
\end_layout

\begin_layout LyX-Code

\series bold
└── sports-cars2.php
\begin_inset Newline newline
\end_inset


\end_layout

\begin_layout LyX-Code

\end_layout

\end_inset


\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

If we 
\series bold
cd
\series default
 to the 
\series bold
\emph on
first-site
\series default
\emph default
 directory, in the 
\emph on
develop
\emph default
 directory.
 It should now look like this:
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset


\begin_inset Box Frameless
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
status open

\begin_layout LyX-Code

\series bold
first-site
\end_layout

\begin_layout LyX-Code

\series bold
├── fedora-services
\end_layout

\begin_layout LyX-Code

\series bold
├── home
\end_layout

\begin_layout LyX-Code

\series bold
├── module-example1
\end_layout

\begin_layout LyX-Code

\series bold
├── module-example2
\end_layout

\begin_layout LyX-Code

\series bold
├── module-example3
\end_layout

\begin_layout LyX-Code

\series bold
├── new-ext-module  <- module template
\end_layout

\begin_layout LyX-Code

\series bold
├── new-module      <- module template
\end_layout

\begin_layout LyX-Code

\series bold
├── shared
\end_layout

\begin_layout LyX-Code

\series bold
├── shared-host
\end_layout

\begin_layout LyX-Code

\series bold
├── sports-cars
\end_layout

\begin_layout LyX-Code

\series bold
├── tmp-backups
\end_layout

\begin_layout LyX-Code

\series bold
├── website-docs
\end_layout

\begin_layout LyX-Code

\series bold
├── create-new-ext-module.xml
\end_layout

\begin_layout LyX-Code

\series bold
├── create-new-module.xml
\end_layout

\begin_layout LyX-Code

\series bold
├── int-build.xml
\end_layout

\begin_layout LyX-Code

\series bold
├── int-delete.xml
\end_layout

\begin_layout LyX-Code

\series bold
├── live-build.xml
\end_layout

\begin_layout LyX-Code

\series bold
├── live-delete.xml
\end_layout

\begin_layout LyX-Code

\series bold
└── robots.txt
\begin_inset Newline newline
\end_inset


\end_layout

\end_inset


\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

Lets now create another new module named 
\emph on
sports-cars2
\emph default
 .
 This will contain the same car pages as the 
\emph on
sports-cars
\emph default
 module, but will demonstrate how to use pages with external <
\series bold
body
\series default
> content, instead of pages with integrated <
\series bold
body
\series default
> content.
 This makes it easy to convert existing website pages to integrate into
 the Kazaam framework.
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

So lets run the PHING script 
\emph on
create-new-ext-module.xml
\emph default
 :
\begin_inset Newline newline
\end_inset


\lyxline

\end_layout

\begin_layout LyX-Code

\series bold
[root@karsites first-site]# phing -f create-new-ext-module.xml
\begin_inset Newline newline
\end_inset

Buildfile: /kazaam-mwf/develop/first-site/
\begin_inset Newline newline
\end_inset

            create-new-ext-module.xml
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

Create new external-content website module > get-module-name:
\end_layout

\begin_layout LyX-Code

\series bold
Please enter new module name: sports-cars2
\begin_inset Newline newline
\end_inset

[echo] Creating new kazaam 'sports-cars2' module
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset


\end_layout

\begin_layout LyX-Code

\series bold
Create new external-content website module > copy-module-files:
\begin_inset Newline newline
\end_inset

[echo] Copying files to new 'sports-cars2' module directory...
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

[copy] Copying 94 files to
\begin_inset Newline newline
\end_inset

        /kazaam-mwf/develop/first-site/sports-cars2
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

[copy] Copied 4 empty directories to
\begin_inset Newline newline
\end_inset

        /kazaam-mwf/develop/first-site/sports-cars2
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

...
\begin_inset Newline newline
\end_inset

...
\begin_inset Newline newline
\end_inset

...
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

Create new external-content website module > clean-up:
\begin_inset Newline newline
\end_inset

[echo] Cleaning up unnecessary template files
\begin_inset Newline newline
\end_inset

[delete] Deleting 20 files from sports-cars2
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

Create new external-content website module > replace-module-text:
\begin_inset Newline newline
\end_inset

[echo] replacing 'new-ext-module' text with 'sports-cars2'
\begin_inset Newline newline
\end_inset

[echo] replacing 'New Ext Module' text with 'sports-cars2'
\begin_inset Newline newline
\end_inset

[reflexive] Applying reflexive processing to 94 files.
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

Create new external-content website module > module-created:
\begin_inset Newline newline
\end_inset

[echo] New kazaam module 'sports-cars2' created OK!
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

Create new external-content website module > create-ext-meta-menu:
\begin_inset Newline newline
\end_inset

[echo]
\begin_inset Newline newline
\end_inset

[echo] Creating meta-menu for new kazaam module 'sports-cars2'
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

Create new external-content website module > copy-meta-menu-files:
\begin_inset Newline newline
\end_inset

[echo] Copying 'new-ext-module.php' (meta-menu template files)
\begin_inset Newline newline
\end_inset

        to 'sports-cars2.php'
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

...
\begin_inset Newline newline
\end_inset

...
\begin_inset Newline newline
\end_inset

...
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

Create new external-content website module > replace-meta-menu-text:
\begin_inset Newline newline
\end_inset

[echo] replacing 'new-ext-module' text with 'sports-cars2'
\begin_inset Newline newline
\end_inset

[echo] replacing 'New Ext Module' text with 'sports-cars2'
\begin_inset Newline newline
\end_inset

[reflexive] Applying reflexive processing to 4 files.
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

Create new external-content website module > meta-menu-created:
\begin_inset Newline newline
\end_inset

[echo] meta-menu for new kazaam module 'sports-cars2' created OK!
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

BUILD FINISHED
\begin_inset Newline newline
\end_inset

Total time: 12.5390 seconds
\begin_inset Newline newline
\end_inset


\series default

\begin_inset VSpace defskip
\end_inset


\end_layout

\begin_layout Standard

\lyxline

\begin_inset VSpace defskip
\end_inset

If we do a directory listing, we should now have a new module in the 
\emph on
first-site 
\emph default
website directory, called 
\series bold
sports-cars2
\series default
:
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset


\begin_inset Box Frameless
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
status open

\begin_layout LyX-Code

\series bold
first-site
\end_layout

\begin_layout LyX-Code

\series bold
├── fedora-services
\end_layout

\begin_layout LyX-Code

\series bold
├── home
\end_layout

\begin_layout LyX-Code

\series bold
├── module-example1
\end_layout

\begin_layout LyX-Code

\series bold
├── module-example2
\end_layout

\begin_layout LyX-Code

\series bold
├── module-example3
\end_layout

\begin_layout LyX-Code

\series bold
├── new-ext-module
\end_layout

\begin_layout LyX-Code

\series bold
├── new-module
\end_layout

\begin_layout LyX-Code

\series bold
├── shared
\end_layout

\begin_layout LyX-Code

\series bold
├── shared-host
\end_layout

\begin_layout LyX-Code

\series bold
├── sports-cars   <- new website module
\end_layout

\begin_layout LyX-Code

\series bold
├── sports-cars2  <- new 'external content' website module
\end_layout

\begin_layout LyX-Code

\series bold
├── tmp-backups
\end_layout

\begin_layout LyX-Code

\series bold
├── website-docs
\end_layout

\begin_layout LyX-Code

\series bold
├── create-new-ext-module.xml
\end_layout

\begin_layout LyX-Code

\series bold
├── create-new-module.xml
\end_layout

\begin_layout LyX-Code

\series bold
├── int-build.xml
\end_layout

\begin_layout LyX-Code

\series bold
├── int-delete.xml
\end_layout

\begin_layout LyX-Code

\series bold
├── live-build.xml
\end_layout

\begin_layout LyX-Code

\series bold
├── live-delete.xml
\end_layout

\begin_layout LyX-Code

\series bold
└── robots.txt
\begin_inset Newline newline
\end_inset


\end_layout

\end_inset


\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

Now we have created a new module, we can access the module by
\begin_inset Newline newline
\end_inset

'plugging it into' the website in two different ways.
 We can:
\end_layout

\begin_layout Description
1 add the 
\emph on
sports-cars2
\emph default
 meta-menu to the website's homepage menu that
\begin_inset Newline newline
\end_inset

appears in the left-hand colum of all 2 or 3 column pages;
\end_layout

\begin_layout Description
2 or add a link to the 
\emph on
sports-cars2
\emph default
 module's homepage, into an existing
\begin_inset Newline newline
\end_inset

meta-menu of the website's homepage menu.
\end_layout

\begin_layout Subsubsection
Adding the sports-cars2 meta-menu
\end_layout

\begin_layout Standard
To add the 
\emph on
sports-cars2
\emph default
 meta-menu to the website's homepage menu open:
\begin_inset Newline newline
\end_inset


\emph on
/develop/first-site/shared/incs/homepage-menu.php ,
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset


\emph default
and add the following line to the top of the file:
\end_layout

\begin_layout LyX-Code

\series bold
<?php require "$SHARED_META_MENUS/sports-cars2.php"; ?>
\end_layout

\begin_layout LyX-Code
\begin_inset VSpace defskip
\end_inset


\end_layout

\begin_layout Standard
Save the file and reload the 
\emph on
first-site
\emph default
 homepage.
 You should now see the 
\emph on
sports-cars2
\emph default
 meta-menu added at the top of the other meta-menu items in the left-hand
 column homepage menu.
 This is OK for a module that only links to a few pages.
 Clicking on any of the links in the 
\emph on
sports-cars2
\emph default
 meta-menu will take you to that particular page template.
 You will then be presented with that page template, and the module's own
 custom left-hand menu, in place of the homepage menu you have just come
 from.
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

NB.
 A module's custom left-hand column menu is 
\emph on
not
\emph default
 the same as the module's meta-menu.
 You should prefer the module's custom left-hand menu over the meta-menu,
 as it is more flexible and extendable, and will go with the module when
 you copy a module from one website to another website.
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

As our collection of sports-cars could grow considerably, we will opt to
 use the module's own custom left-hand column menu, instead of the homepage
 menu, and we will put one link on the homepage menu to the 
\emph on
sports-cars2.php
\emph default
 module's homepage.
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

Lets now remove the 
\emph on
sports-cars2
\emph default
 meta-menu from the homepage-menu:
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

Restore
\begin_inset space ~
\end_inset


\emph on
 /develop/first-site/shared/incs/homepage-menu.php
\begin_inset Newline newline
\end_inset


\emph default
to what it was like before adding the:
\end_layout

\begin_layout LyX-Code

\series bold
<?php require "$SHARED_META_MENUS/sports-cars2.php"; ?>
\end_layout

\begin_layout LyX-Code
\begin_inset VSpace defskip
\end_inset


\end_layout

\begin_layout Standard
line to it, and reload the first-site homepage.
 The 
\emph on
sports-cars2
\emph default
 meta-menu should be gone now.
\end_layout

\begin_layout Subsubsection
Adding a single link to the sports-cars2.php homepage
\end_layout

\begin_layout Standard
Another way of adding the 
\emph on
sports-cars2
\emph default
 module to the website is to link
\begin_inset Newline newline
\end_inset

directly to the module's homepage, in:
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset


\emph on
/develop/first-site/sports-cars2/anyuser/sports-cars2.php .
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset


\emph default
This will only use one link on the homepage menu.
 This link can be added to an existing meta-menu in:
\begin_inset Newline newline
\end_inset


\emph on
/develop/first-site/shared/meta-menus/ .
\begin_inset Newline newline
\end_inset


\emph default

\begin_inset Newline newline
\end_inset

Lets add a link from the 'Module Example1' meta-menu (fourth one down from
 the top of the homepage menu), to the 
\emph on
sports-cars2
\emph default
 module's homepage.
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

Open 
\emph on
/develop/first-site/shared/meta-menus/module-example1.php
\begin_inset Newline newline
\end_inset


\emph default
and add the following lines of code as the second href link:
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset


\begin_inset Box Frameless
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
status open

\begin_layout Plain Layout

\family typewriter
\series bold
<a
\begin_inset space ~
\end_inset

href="<?php
\begin_inset space ~
\end_inset

echo
\begin_inset space ~
\end_inset

$WEBSITE_ROOT
\begin_inset space ~
\end_inset

?>/sports-cars2/anyuser/sports-cars2.php"
\begin_inset Newline newline
\end_inset


\begin_inset space ~
\end_inset

title="Some very nice sports cars!"
\begin_inset Newline newline
\end_inset

>Sports Cars 2</a>
\begin_inset Newline newline
\end_inset


\end_layout

\end_inset


\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

Save the file and reload the 
\emph on
first-site
\emph default
 homepage.
 You should now see the link to the 
\emph on
sports-cars2
\emph default
 module's homepage as the second link in the 'Module Example1' meta-menu
 (after 
\emph on
sports-cars
\emph default
).
 Clicking on the 
\emph on
sports-cars2
\emph default
 link will take you to the homepage for the 
\emph on
sports-cars2
\emph default
 module.
 This will load the 
\emph on
sports-cars2
\emph default
 module's own custom navigation menu in the left-hand column, in place of
 the website's homepage menu.
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

This custom menu will be used by all pages in the 
\emph on
sports-cars2
\emph default
 module.
\begin_inset Newline newline
\end_inset

You can use this menu to navigate around the default page templates, which
 we will customise shortly.
 Clicking on the title of the module's menu ('sports- cars2') will take
 you back to the homepage for that module.
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset


\end_layout

\begin_layout Subsubsection
Adding pages to the module
\end_layout

\begin_layout Standard
Now we have a new 
\emph on
sports-cars2
\emph default
 module, we can use the default page templates and add some usefull content
 to this module.
 First lets add some content to the module's homepage, to tell users what
 this section of the website is all about.
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

If you look at the module's homepage:
\begin_inset Newline newline
\end_inset

 
\emph on
/develop/first-site/sports-cars2/anyuser/sports-cars2.php
\emph default
 
\emph on
,
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset


\emph default
you will see that the <div id=
\begin_inset Quotes erd
\end_inset

main_window_2col
\begin_inset Quotes erd
\end_inset

> section, consists of the following:
\begin_inset Newline newline
\end_inset


\end_layout

\begin_layout LyX-Code

\series bold
<div id="main_window_2col">
\begin_inset Newline newline
\end_inset

 <?php require "./sports-cars2.cont.php" ?>
\end_layout

\begin_layout LyX-Code

\series bold
</div>
\series default

\begin_inset Newline newline
\end_inset


\series bold

\begin_inset Newline newline
\end_inset


\end_layout

\begin_layout Standard
So the actual content for the 
\emph on
sports-cars2.php
\emph default
 homepage has been moved out into 
\emph on
sports-cars2.cont.php
\emph default
.
 This is the file we now need to edit to change the 
\emph on
sports-cars2.php
\emph default
 homepage.
 
\emph on
sports-cars2.php
\emph default
 is now just a wrapper that includes 
\emph on
sports-cars2.cont.php
\emph default
.
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

Open:
\begin_inset Newline newline
\end_inset


\emph on
/develop/first-site/sports-cars2/anyuser/sports-cars2.cont.php
\begin_inset Newline newline
\end_inset


\emph default
for editing.
\emph on

\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset


\emph default
Change the contents of the second <div class="box2"> , so it looks like
 this:
\begin_inset Newline newline
\end_inset


\emph on

\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset


\series bold
\emph default

\begin_inset Box Frameless
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
status open

\begin_layout Plain Layout

\family typewriter
\series bold
<div class="box2">
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

<p>Here is a collection of really nice high performance sports cars, designed
 to be used on the public highway.
 I hope to add to this part of the website as more of these cars are found.</p>
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

</div>
\family default

\begin_inset Newline newline
\end_inset


\end_layout

\end_inset


\begin_inset Newline newline
\end_inset


\series default
Save the file and click on the title for the sports-cars2 menu.
 The page should reload with the new contents above.
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

That should do for the sports-cars2 homepage.
 Now we need to add some pages with details of various sports cars.
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

Lets add 3 pages with details of the following cars:
\end_layout

\begin_layout Itemize
Audi GT3
\end_layout

\begin_layout Itemize
Corvette ZR1
\end_layout

\begin_layout Itemize
Shelby Ultimate Aero Twin Turbo (my favourite)
\end_layout

\begin_layout Standard
We will create a simple page for each sports car, showing the car's image,
 and a few details about the car.
 We'll use the 
\emph on
2-column-ext-page.php
\emph default
 template as the wrapper for the each of the car pages, and put the content
 for each page in 
\emph on
2-column-page.cont.php
\emph default
.
 These files are in the 
\emph on
anyuser
\emph default
 directory of the 
\emph on
sports-cars2
\emph default
 module.
\begin_inset Newline newline
\end_inset


\end_layout

\begin_layout Subsubsection
creating the Audi GT3 page
\end_layout

\begin_layout Standard
We'll call this page 
\emph on
audi-GT3.php 
\emph default
.
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

Copy the 
\emph on
2-column-ext-page.php 
\emph default
template to a new file called 
\emph on
audi-GT3.php
\begin_inset space ~
\end_inset

.
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset


\emph default
Copy the 
\emph on
2-column-page.cont.php 
\emph default
template to a new file called 
\emph on
audi-GT3.cont.php
\begin_inset space ~
\end_inset

.
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset


\emph default
Open 
\emph on
/develop/first-site/sports-cars/anyuser/audi-GT3.php
\begin_inset Newline newline
\end_inset


\emph default
for editing.
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

Edit the <div id=
\begin_inset Quotes erd
\end_inset

main_window_2col
\begin_inset Quotes erd
\end_inset

> section so it looks the same as the example xhtml code in:
\begin_inset Newline newline
\end_inset


\emph on
/framework-docs/tutorials/sports-cars/Audi-GT3/audi-GT3.html .
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset


\emph default
Now copy the image file 
\emph on
audi-GT3-1.jpg 
\emph default
from the 
\emph on
Audi-GT3 
\emph default
directory to the 
\emph on
sports-cars
\emph default
 module image directory:
\begin_inset Newline newline
\end_inset


\emph on
/develop/first-site/sports-cars/local/images/
\begin_inset Newline newline
\end_inset


\emph default

\begin_inset Newline newline
\end_inset

That's the 
\emph on
audi-GT3.php
\emph default
 page contents sorted.
 Now we need to add a link from the 
\emph on
sports-cars
\emph default
 module's custom left-hand menu to the 
\emph on
audi-GT3.php
\emph default
 page.
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

Open 
\emph on
/develop/first-site/sports-cars/local/incs/mod/sports-cars-menu.php
\begin_inset Newline newline
\end_inset


\emph default
for editing.
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

As the first menu item after the end of the <span class="module_title_box">
 add this code:
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset


\begin_inset Box Frameless
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
status open

\begin_layout Plain Layout

\family typewriter
\series bold
<a
\begin_inset space ~
\end_inset

href="<?php
\begin_inset space ~
\end_inset

echo
\begin_inset space ~
\end_inset

$WEBSITE_ROOT
\begin_inset space ~
\end_inset

?>/sports-cars/anyuser/audi-GT3.php"
\begin_inset Newline newline
\end_inset


\begin_inset space ~
\end_inset

title="Audi GT3 sports car"
\begin_inset Newline newline
\end_inset

>Audi GT3</a>
\family default
\series default

\begin_inset Newline newline
\end_inset


\end_layout

\end_inset


\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

You can also delete the other menu items that refer to the 3-column,
\begin_inset Newline newline
\end_inset

2-column and single column page templates, as they are not needed now.
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

There should now be only one menu item in 
\emph on
sports-cars-menu.php
\emph default
,
\emph on

\begin_inset Newline newline
\end_inset


\emph default
a href link to the 
\emph on
audi-GT3.php 
\emph default
page, and the file should now look like this:
\begin_inset Newline newline
\end_inset


\end_layout

\begin_layout LyX-Code

\family typewriter
\series bold
<?php
\begin_inset Newline newline
\end_inset

// get the global left-side menu file
\end_layout

\begin_layout LyX-Code

\family typewriter
\series bold
// require "$SHARED_INCS/homepage-menu.php";
\begin_inset Newline newline
\end_inset

?>
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

<!-- use a customised LHS column menu instead of the
\begin_inset Newline newline
\end_inset

default one from the site homepage -->
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

<div class="internal_menu">
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

<div class="box1">
\end_layout

\begin_layout LyX-Code

\family typewriter
\series bold
<span class="module_title_box">
\end_layout

\begin_layout LyX-Code

\family typewriter
\series bold
<a href="<?php echo $WEBSITE_ROOT ?>/sports-cars/anyuser/sports-cars.php"
\end_layout

\begin_layout LyX-Code

\family typewriter
\series bold
 id="module_home_link" title="sports-cars Home"
\end_layout

\begin_layout LyX-Code

\family typewriter
\series bold
>sports-cars</a>
\end_layout

\begin_layout LyX-Code

\family typewriter
\series bold
</span>
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

<a href="<?php echo $WEBSITE_ROOT ?>/sports-cars/anyuser/audi-GT3.php"
\end_layout

\begin_layout LyX-Code

\family typewriter
\series bold
 title="Audi GT3 sports car"
\end_layout

\begin_layout LyX-Code

\family typewriter
\series bold
>Audi GT3</a>
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

</div>
\end_layout

\begin_layout LyX-Code

\family typewriter
\series bold
</div>
\end_layout

\begin_layout Standard
If we click on the title bar of the 
\emph on
sports-cars 
\emph default
menu, the homepage for this module should reload, and we should now see
 only one menu entry called 'Audi GT3' - the link to the 
\emph on
audi-GT3.php
\emph default
 page.
 Clicking on this link will take us to the page with a picture of the Audi
 GT3, and some details about the car.
 So that's the first of our three pages about high performance sports cars
 finished.
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

We can now create a page for the Corvette ZR1, and a page for the Shelby
 Ultimate Aero TT.
 We will use the 
\emph on
audi-GT3.php
\emph default
 page as a pattern for these other two cars' pages.
\end_layout

\begin_layout Subsubsection
creating the Corvette ZR1 page
\end_layout

\begin_layout Standard
We'll call this page 
\emph on
corvette-ZR1.php
\emph default
 .
 Copy the 
\emph on
audi-GT3.php 
\emph default
page to a new file called 
\emph on
corvette-ZR1.php .
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset


\emph default
Open 
\emph on
/develop/first-site/sports-cars/anyuser/corvette-ZR1.php
\begin_inset Newline newline
\end_inset


\emph default
for editing.
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

Edit the <div id=
\begin_inset Quotes erd
\end_inset

main_window_2col
\begin_inset Quotes erd
\end_inset

> section so it looks the same as the example xhtml code in:
\begin_inset Newline newline
\end_inset


\emph on
/framework-docs/tutorials/sports-cars/Corvette-ZR1/corvette-ZR1.html .
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset


\emph default
Now copy the image file 
\emph on
corvette_ZR1-1.jpg 
\emph default
from the 
\emph on
Corvette-ZR1 
\emph default
directory to the 
\emph on
sports-cars
\emph default
 module image directory:
\begin_inset Newline newline
\end_inset


\emph on
/develop/first-site/sports-cars/local/images/
\begin_inset Newline newline
\end_inset


\emph default

\begin_inset Newline newline
\end_inset

That's the 
\emph on
corvette-ZR1.php
\emph default
 page contents sorted.
 Now we need to add a link from the 
\emph on
sports-cars
\emph default
 module's custom left-hand menu to the 
\emph on
corvette-ZR1.php
\emph default
 page.
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

Open 
\emph on
/develop/first-site/sports-cars/local/incs/mod/sports-cars-menu.php
\begin_inset Newline newline
\end_inset


\emph default
for editing.
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

As the second menu item after the 
\emph on
audi-GT3.php
\emph default
 href link, add this code:
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset


\begin_inset Box Frameless
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
status open

\begin_layout Plain Layout

\family typewriter
\series bold
<a
\begin_inset space ~
\end_inset

href="<?php
\begin_inset space ~
\end_inset

echo
\begin_inset space ~
\end_inset

$WEBSITE_ROOT
\begin_inset space ~
\end_inset

?>/sports-cars/anyuser/corvette-ZR1.php"
\begin_inset Newline newline
\end_inset


\begin_inset space ~
\end_inset

title="Corvette ZR1 sports car"
\begin_inset Newline newline
\end_inset

>Corvette ZR1</a>
\family default
\series default

\begin_inset Newline newline
\end_inset


\end_layout

\end_inset


\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

After saving 
\emph on
sports-cars-menu.php
\emph default
, if we click on the title bar of the 
\emph on
sports-cars 
\emph default
menu, the homepage for this module reloads, and we should now see the second
 menu entry called 'Corvette ZR1' - the link to the 
\emph on
corvette-ZR1.php
\emph default
 page.
 Clicking on this link will take us to the page with a picture of the Corvette
 ZR1, and some details about the car.
 So that's the second of our three pages about high performance sports cars
 finished.
\end_layout

\begin_layout Subsubsection
creating the Shelby Ultimate Aero Twin Turbo page
\end_layout

\begin_layout Standard
We'll call this page 
\emph on
shelby-UA-TT.php
\emph default
 .
 Copy the 
\emph on
audi-GT3.php 
\emph default
page to a new file called 
\emph on
shelby-UA-TT.php .
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset


\emph default
Open 
\emph on
/develop/first-site/sports-cars/anyuser/shelby-UA-TT.php
\begin_inset Newline newline
\end_inset


\emph default
for editing.
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

Edit the <div id=
\begin_inset Quotes erd
\end_inset

main_window_2col
\begin_inset Quotes erd
\end_inset

> section so it looks the same as the example xhtml code in:
\begin_inset Newline newline
\end_inset


\emph on
/framework-docs/tutorials/sports-cars/Shelby-UA-TT/shelby-UA-TT.html .
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset


\emph default
Now copy the image file 
\emph on
ssc-ultimate-aero-1.jpg 
\emph default
from the 
\emph on
Shelby-UA-TT 
\emph default
directory to the 
\emph on
sports-cars
\emph default
 module image directory:
\begin_inset Newline newline
\end_inset


\emph on
/develop/first-site/sports-cars/local/images/
\begin_inset Newline newline
\end_inset


\emph default

\begin_inset Newline newline
\end_inset

That's the 
\emph on
shelby-UA-TT.php
\emph default
 page contents sorted.
 Now we need to add a link from the 
\emph on
sports-cars
\emph default
 module's custom left-hand menu to the 
\emph on
shelby-UA-TT.php
\emph default
 page.
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

Open 
\emph on
/develop/first-site/sports-cars/local/incs/mod/sports-cars-menu.php
\begin_inset Newline newline
\end_inset


\emph default
for editing.
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

As the third menu item after the 
\emph on
corvette-ZR1.php
\emph default
 href link, add this code:
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset


\begin_inset Box Frameless
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
status open

\begin_layout Plain Layout

\family typewriter
\series bold
<a
\begin_inset space ~
\end_inset

href="<?php
\begin_inset space ~
\end_inset

echo
\begin_inset space ~
\end_inset

$WEBSITE_ROOT
\begin_inset space ~
\end_inset

?>/sports-cars/anyuser/shelby-UA-TT.php"
\begin_inset Newline newline
\end_inset


\begin_inset space ~
\end_inset

title="Shelby Ultimate Aero Twin Turbo sports car"
\begin_inset Newline newline
\end_inset

>Shelby Ultimate Aero Twin Turbo</a>
\family default
\series default

\begin_inset Newline newline
\end_inset


\end_layout

\end_inset


\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

After saving 
\emph on
sports-cars-menu.php
\emph default
, if we click on the title bar of the 
\emph on
sports-cars 
\emph default
menu, the homepage for this module reloads, and we should now see the third
 menu entry called 'Shelby Ultimate Aero Twin Turbo' - the link to the 
\emph on
shelby-UA-TT.php
\emph default
 page.
 Clicking on this link will take us to the page with a picture of the Shelby
 Ultimate Aero Twin Turbo, and some details about the car.
 So that's the final page of our three pages about high performance sports
 cars finished.
\begin_inset Newline newline
\end_inset


\end_layout

\begin_layout Subsection
Copying a website from 
\emph on
develop
\emph default
 to 
\emph on
intermediate
\emph default
 directory
\end_layout

\begin_layout Subsection
Copying a website from 
\emph on
intermediate
\emph default
 to 
\emph on
live
\emph default
 directory
\end_layout

\begin_layout Standard

\lyxline

\end_layout

\begin_layout Section
\start_of_appendix
Start of Appendix
\end_layout

\end_body
\end_document
